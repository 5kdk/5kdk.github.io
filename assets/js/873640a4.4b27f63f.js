"use strict";(self.webpackChunk_5_kdk_blog=self.webpackChunk_5_kdk_blog||[]).push([[391],{3905:(e,t,n)=>{n.d(t,{Zo:()=>o,kt:()=>k});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},o=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),p=u(n),m=l,k=p["".concat(s,".").concat(m)]||p[m]||h[m]||r;return n?a.createElement(k,i(i({ref:t},o),{},{components:n})):a.createElement(k,i({ref:t},o))}));function k(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:l,i[1]=c;for(var u=2;u<r;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8447:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>u});var a=n(7462),l=(n(7294),n(3905));const r={title:"\ub77c\uc774\ube0c\ub7ec\ub9ac \uc5c6\uc774 \ub85c\uceec \uce90\uc2f1 \uad6c\ud604\ud558\uae30",authors:"5kdk",tags:["React","SWR","React-Query"],enableComments:!0},i=void 0,c={permalink:"/blog/2023/07/23/caching-technique-without-libraries",editUrl:"https://github.com/5kdk/5kdk.github.io/tree/main/blog/2023-07-23-caching-technique-without-libraries/index.md",source:"@site/blog/2023-07-23-caching-technique-without-libraries/index.md",title:"\ub77c\uc774\ube0c\ub7ec\ub9ac \uc5c6\uc774 \ub85c\uceec \uce90\uc2f1 \uad6c\ud604\ud558\uae30",description:"SWR, React-query \uac19\uc740 data fetching \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4e4\uc740 \uae30\ubcf8\uc801\uc73c\ub85c fetch\ud55c \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uce90\uc2f1 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4.",date:"2023-07-23T00:00:00.000Z",formattedDate:"2023\ub144 7\uc6d4 23\uc77c",tags:[{label:"React",permalink:"/blog/tags/react"},{label:"SWR",permalink:"/blog/tags/swr"},{label:"React-Query",permalink:"/blog/tags/react-query"}],readingTime:16.895,hasTruncateMarker:!0,authors:[{name:"Dongkyu Kim",title:"Collaborative FE developer",url:"https://github.com/5kdk",imageURL:"https://github.com/5kdk.png",key:"5kdk"}],frontMatter:{title:"\ub77c\uc774\ube0c\ub7ec\ub9ac \uc5c6\uc774 \ub85c\uceec \uce90\uc2f1 \uad6c\ud604\ud558\uae30",authors:"5kdk",tags:["React","SWR","React-Query"],enableComments:!0},nextItem:{title:"useMemo, useCallback\uc73c\ub85c \ucd5c\uc801\ud654\uac00 \uaf2d \ud544\uc694\ud560\uae4c?",permalink:"/blog/2023/07/04/necessary-with-usememo-and-usecallback"}},s={authorsImageUrls:[void 0]},u=[{value:"1. \uc0ac\uc804 \uc900\ube44",id:"1-\uc0ac\uc804-\uc900\ube44",level:2},{value:"\uc11c\ubc84 \uc0c1\ud0dc \ub77c\uc774\ube0c\ub7ec\ub9ac \uc54c\uc544\ubcf4\uae30",id:"\uc11c\ubc84-\uc0c1\ud0dc-\ub77c\uc774\ube0c\ub7ec\ub9ac-\uc54c\uc544\ubcf4\uae30",level:3},{value:"\uad6c\ud604\ud560 \uae30\ub2a5\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \uc791\uc131\ud574\ubcf4\uc790",id:"\uad6c\ud604\ud560-\uae30\ub2a5\uc5d0-\ub300\ud55c-\uc815\ubcf4\ub97c-\uc791\uc131\ud574\ubcf4\uc790",level:3},{value:"2. \ud575\uc2ec \uae30\ub2a5 \uad6c\ud604",id:"2-\ud575\uc2ec-\uae30\ub2a5-\uad6c\ud604",level:2},{value:"\uce90\uc2dc\ub97c \uc800\uc7a5\ud560 \uac1d\uccb4 \uc0dd\uc131",id:"\uce90\uc2dc\ub97c-\uc800\uc7a5\ud560-\uac1d\uccb4-\uc0dd\uc131",level:3},{value:"\uce90\uc2f1 \ucee4\uc2a4\ud140 \ud6c5 \uad6c\ud604",id:"\uce90\uc2f1-\ucee4\uc2a4\ud140-\ud6c5-\uad6c\ud604",level:3},{value:"\ud504\ub85c\uc81d\ud2b8\uc5d0 \uc801\uc6a9\ud574\ubcf4\uae30",id:"\ud504\ub85c\uc81d\ud2b8\uc5d0-\uc801\uc6a9\ud574\ubcf4\uae30",level:3},{value:"3. \uce90\uc2dc \uc815\ucc45 \uad6c\ud604",id:"3-\uce90\uc2dc-\uc815\ucc45-\uad6c\ud604",level:2},{value:"\uc5b4\ub5bb\uac8c \ud558\uba74 \uce90\uc2dc \uc815\ucc45\uc744 \uad6c\ud604\ud560 \uc218 \uc788\uc744\uae4c?",id:"\uc5b4\ub5bb\uac8c-\ud558\uba74-\uce90\uc2dc-\uc815\ucc45\uc744-\uad6c\ud604\ud560-\uc218-\uc788\uc744\uae4c",level:3},{value:"\ucee4\uc2a4\ud140 \ud6c5\uc5d0 \uc801\uc6a9\ud558\uae30",id:"\ucee4\uc2a4\ud140-\ud6c5\uc5d0-\uc801\uc6a9\ud558\uae30",level:3},{value:"4. \ubd80\uac00 \uae30\ub2a5 \uad6c\ud604",id:"4-\ubd80\uac00-\uae30\ub2a5-\uad6c\ud604",level:2},{value:"\ub9c8\uce58\uba70",id:"\ub9c8\uce58\uba70",level:2}],o={toc:u},p="wrapper";function h(e){let{components:t,...r}=e;return(0,l.kt)(p,(0,a.Z)({},o,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"SWR, React-query \uac19\uc740 data fetching \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4e4\uc740 \uae30\ubcf8\uc801\uc73c\ub85c fetch\ud55c \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uce90\uc2f1 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4."),(0,l.kt)("p",null,"\uc774 \ud3ec\uc2a4\ud305\uc5d0\uc11c\ub294 \uc11c\ubc84\uc5d0\uc11c \ubc1b\uc544\uc628 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uce90\uc2f1 \uacfc\uc815\uc744 \ub77c\uc774\ube0c\ub7ec\ub9ac \uc5c6\uc774 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\uba74\uc11c \uc774\ud574\ud574\ubcf8\ub2e4."),(0,l.kt)("h2",{id:"1-\uc0ac\uc804-\uc900\ube44"},"1. \uc0ac\uc804 \uc900\ube44"),(0,l.kt)("h3",{id:"\uc11c\ubc84-\uc0c1\ud0dc-\ub77c\uc774\ube0c\ub7ec\ub9ac-\uc54c\uc544\ubcf4\uae30"},"\uc11c\ubc84 \uc0c1\ud0dc \ub77c\uc774\ube0c\ub7ec\ub9ac \uc54c\uc544\ubcf4\uae30"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"SWR")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'"Stale-While-Revalidate" \uce90\uc2f1 \uc804\ub7b5\uc5d0 \ucd08\uc810\uc744 \ub9de\ucd98 React \ub77c\uc774\ube0c\ub7ec\ub9ac\ub2e4.'),(0,l.kt)("li",{parentName:"ul"},"\uad6c\uc131 \uac00\ub2a5\ud55c \uc635\uc158\uc744 \ud1b5\ud574 \ub370\uc774\ud130 \uc694\uccad \ube48\ub3c4\ub97c \uc870\uc808\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \uc571 \ud639\uc740 \ube0c\ub77c\uc6b0\uc800 \ud0ed\uc5d0 focus\ud560 \ub54c \ub370\uc774\ud130 \uc7ac\uac80\uc99d\uc744 \uc218\ud589\ud55c\ub2e4.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"React-Query")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\uc11c\ubc84 \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\uace0 \uce90\uc2f1\ud558\ub294 \ub370 \ucd5c\uc801\ud654\ub41c React \ub77c\uc774\ube0c\ub7ec\ub9ac\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\uace0\uc218\uc900\uc758 \ucd94\uc0c1\ud654\ub85c \uc804\uc5ed \uc0c1\ud0dc \uad00\ub9ac \ubc0f \ub370\uc774\ud130 \ub3d9\uae30\ud654\uac00 \uac00\ub2a5\ud558\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\ud655\uc7a5\uc131\uacfc \ub354 \ud070 \ud504\ub85c\uc81d\ud2b8\uc5d0 \uc801\ud569\ud558\uba70, \uc5d0\ub7ec \ucc98\ub9ac \ubc0f \uacb0\uacfc\uac12\uc758 \uc0c1\ud0dc\ub97c \uc27d\uac8c \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4.")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("details",null,(0,l.kt)("summary",null,"Stale-While-Revalidate"),(0,l.kt)("div",null,"Stale-While-Revalidate\uc740 \uce90\uc2f1 \uc804\ub7b5 \uc911 \ud558\ub098\ub85c, \uc624\ub798\ub41c(Stale) \ub370\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \uc5c5\ub370\uc774\ud2b8\ub41c \ub370\uc774\ud130\ub97c \uc7ac\uac80\uc99d(Revalidate)\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc758 \ub370\uc774\ud130\uac00 \uc11c\ubc84\uc640 \ub3d9\uae30\ud654\ub418\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\uc5d0\uc11c\ub3c4 \uc0ac\uc6a9\uc790\uc5d0\uac8c \ube60\ub974\uac8c \ub370\uc774\ud130\ub97c \uc81c\uacf5\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc900\ub2e4.",(0,l.kt)("br",null),(0,l.kt)("br",null),"\uae30\ubcf8 \uc6d0\ub9ac\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4:",(0,l.kt)("br",null),"- \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uba74, \uce90\uc2dc\ub41c \ub370\uc774\ud130(\uc788\uc744 \uacbd\uc6b0)\ub97c \uba3c\uc800 \ubc18\ud658\ud558\uc5ec \ube60\ub978 \uc751\ub2f5\uc744 \ubcf4\uc7a5\ud55c\ub2e4.",(0,l.kt)("br",null),"- \ub3d9\uc2dc\uc5d0 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc11c\ubc84\uc5d0 \ub370\uc774\ud130\uc758 \ucd5c\uc2e0 \ubc84\uc804\uc744 \uc694\uccad\ud558\uc5ec \uce90\uc2dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4.",(0,l.kt)("br",null),"- \uc5c5\ub370\uc774\ud2b8\ub41c \ub370\uc774\ud130\uac00 \uc900\ube44\ub418\uba74, \ub2e4\uc74c \uc694\uccad\ubd80\ud130\ub294 \ucd5c\uc2e0 \ub370\uc774\ud130\ub85c \uc751\ub2f5\uc744 \ubcf4\ub0b8\ub2e4.",(0,l.kt)("br",null),"- \uc774\ub807\uac8c \ud558\uba74 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc774 \ud5a5\uc0c1\ub418\uace0, \uc11c\ubc84\uc758 \ubd80\ud558\ub3c4 \uc904\uc77c \uc218 \uc788\ub2e4."))),(0,l.kt)("p",null,"\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ucee8\uc149\uc740 \uc870\uae08 \ub2e4\ub974\uc9c0\ub9cc, \uc11c\ubc84 \ub370\uc774\ud130\uc5d0 \ub300\ud574 \uce90\uc2f1\ud558\uace0 \ud6a8\uc728\uc801\uc778 \uc11c\ubc84 \ub370\uc774\ud130 \uc694\uccad\uc744 \ucd94\uad6c\ud55c\ub2e4\ub294 \uc810\uc740 \uac19\ub2e4. \uce90\uc2f1 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0 \ub300\ud55c \ud3ec\uc2a4\ud305\uc774 \uc544\ub2c8\uae30\uc5d0, \ubcf8 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 \uc790\uc138\ud558\uac8c \ub2e4\ub8e8\uc9c4 \uc54a\uaca0\ub2e4.",(0,l.kt)("del",{parentName:"p"},"(\uac00\uc7a5 \ud070 \ucc28\uc774\uc810\uc740 \uc804\uc5ed \uc0c1\ud0dc\uad00\ub9ac\ub85c\uc11c\uc758 \uc0ac\uc6a9 \uadf8\ub9ac\uace0 \uc11c\ubc84\ub85c\uc758 mutation \uc5ec\ubd80\ub2e4.)")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"\uad6c\ud604\ud560-\uae30\ub2a5\uc5d0-\ub300\ud55c-\uc815\ubcf4\ub97c-\uc791\uc131\ud574\ubcf4\uc790"},"\uad6c\ud604\ud560 \uae30\ub2a5\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \uc791\uc131\ud574\ubcf4\uc790"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ub85c\uceec\uc5d0\uc11c \uce90\uc2dc \ub370\uc774\ud130\ub4e4\uc744 \ub2f4\uc544\ub458 \uc218 \uc788\ub294 \ubcc0\uc218 (\uc11c\ubc84\uc5d0\uc11c \ubc1b\uc740 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud574 \ub193\uc744 \ubb34\uc5b8\uac00 \ud544\uc694)"),(0,l.kt)("li",{parentName:"ul"},"cache time \uc774\ub0b4\uc758 \uc11c\ubc84 \uc694\uccad \ud638\ucd9c \ubc29\uc9c0 \ucc98\ub9ac (\uce90\uc2dc \ud0c0\uc784 \ube44\uad50 \ub85c\uc9c1)"),(0,l.kt)("li",{parentName:"ul"},"\uc11c\ubc84 \ub370\uc774\ud130 \uc694\uccad\uc5d0 \ub300\ud55c status\ub97c \uac00\uc9c0\uace0 \uc788\ub294 custom hook (\uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud1b5\ud55c \ube44\ub3d9\uae30 \ub85c\uc9c1 \ucea1\uc290\ud654)")),(0,l.kt)("p",null,"\uac04\ub2e8\ud788 \ub9d0\ud558\uba74 \uc11c\ubc84\uc5d0\uc11c \ubc1b\uc544\uc628 \ub370\uc774\ud130\ub97c \ubcc0\uc218(\ud2b9\uc815 \uc790\ub8cc\uad6c\uc870)\uc5d0 \uc800\uc7a5\ud558\uace0, \ub85c\uceec\uc5d0 \uc720\ud6a8\ud55c \ub370\uc774\ud130\uac00 \uc788\uc73c\uba74 \uc774\ub97c \uc0ac\uc6a9, \ub370\uc774\ud130\uac00 \uc5c6\uac70\ub098 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc73c\uba74 \uc11c\ubc84\uc5d0 \ub2e4\uc2dc \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uacfc\uc815\uc744 \uad6c\ud604\ud558\uba74 \ub420 \uac83 \uac19\ub2e4."),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"2-\ud575\uc2ec-\uae30\ub2a5-\uad6c\ud604"},"2. \ud575\uc2ec \uae30\ub2a5 \uad6c\ud604"),(0,l.kt)("h3",{id:"\uce90\uc2dc\ub97c-\uc800\uc7a5\ud560-\uac1d\uccb4-\uc0dd\uc131"},"\uce90\uc2dc\ub97c \uc800\uc7a5\ud560 \uac1d\uccb4 \uc0dd\uc131"),(0,l.kt)("p",null,"\uc81c\uc77c \uba3c\uc800 \ub85c\uceec\uc5d0\uc11c '\uce90\uc2dc'\ub97c \uad00\ub9ac\ud560 \uac1d\uccb4\ub97c \uc0dd\uc131\ud574\ubcf4\uc790. \uce90\uc2dc\ub97c \uac1d\uccb4\ub85c \uad00\ub9ac\ud558\ub294 \uc774\uc720\ub294?"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"key-value \uad6c\uc870\ub85c \uc77c\uad00\uc801\uc774\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\ub97c \ud655\uc7a5\ud558\ub294 \ub370 \uc720\uc6a9\ud558\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"value\uc5d0 \ub300\ud55c \uc811\uadfc\uc131\uc774 \uc88b\ub2e4.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const cacheStore = new Map();\n")),(0,l.kt)("p",null,"\ud544\uc790\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"Map")," \uac1d\uccb4\ub97c \ud65c\uc6a9\ud558\uc5ec ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheStore"),"\ub97c \ub9cc\ub4e4\uc5b4 \uc8fc\uc5c8\ub2e4. \uc0ac\uc2e4, \uc77c\ubc18 \uac1d\uccb4\ub85c \ub9cc\ub4e4\uc5b4\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc.. \uc544\ub798\uc640 \uac19\uc740 \uc774\uc720\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"Map"),"\uc744 \uc120\ud0dd\ud588\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Map")," \uac1d\uccb4\ub294 key\uac00 \ub2e8 \ud558\ub098\ub9cc \uc874\uc7ac\ud574\uc57c \ud55c\ub2e4\ub294 \uc810",(0,l.kt)("br",{parentName:"li"}),"-> ",(0,l.kt)("strong",{parentName:"li"},"\ud574\ub2f9 key\uc5d0\ub294 \uc720\uc77c\ud55c \uce90\uc2dc \uac12\uc774 \ubcf4\uc7a5\ub41c\ub2e4.")),(0,l.kt)("li",{parentName:"ul"},"\uac1d\uccb4\ub97c \ucee8\ud2b8\ub864 \ud560 \uc218 \uc788\ub294 \uc9c1\uad00\uc801\uc778 \ud504\ub85c\ud1a0\ud0c0\uc785 \uba54\uc11c\ub4dc\ub4e4\uc744 \uc81c\uacf5(ex: ",(0,l.kt)("inlineCode",{parentName:"li"},"has()"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"set()")," \ub4f1)",(0,l.kt)("br",{parentName:"li"}),"-> ",(0,l.kt)("strong",{parentName:"li"},"\uc120\uc5b8\uc801\uc778 \ucf54\ub4dc \uc791\uc131\uc774 \uac00\ub2a5\ud558\ub2e4.")),(0,l.kt)("li",{parentName:"ul"},"\ud6c4\uc220\ud560 \ud14c \uc9c0\ub9cc \ucd94\uac00 \uae30\ub2a5\uc744 \uace0\ub824\ud574 \uc21c\uc11c\uac00 \ubcf4\uc7a5\ub418\ub294 ",(0,l.kt)("inlineCode",{parentName:"li"},"Map"),"\uc744 \uc120\ud0dd\ud588\ub2e4.",(0,l.kt)("br",{parentName:"li"}),"-> ",(0,l.kt)("strong",{parentName:"li"},"\ub370\uc774\ud130 \uc0bd\uc785 \uc21c\uc11c\uac00 \ubcf4\uc7a5\ub41c\ub2e4."))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"\uce90\uc2f1-\ucee4\uc2a4\ud140-\ud6c5-\uad6c\ud604"},"\uce90\uc2f1 \ucee4\uc2a4\ud140 \ud6c5 \uad6c\ud604"),(0,l.kt)("p",null,"\uad00\uc2ec\uc0ac\ub97c \ubd84\ub9ac\ud558\uc5ec \uce90\uc2dc\ub97c \ud655\uc778\ud574\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc624\ub294 \ub85c\uc9c1\ub4e4\ub9cc\uc744 \uac00\uc9c4 \ud6c5\uc744 \ub9cc\ub4e4\uc5b4\ubcf4\uc790.\nReact-Query\uc758 ",(0,l.kt)("inlineCode",{parentName:"p"},"useQuery"),"\uc758 \uc774\ub984\uc744 \ubcf8\ub530 ",(0,l.kt)("inlineCode",{parentName:"p"},"useCacheQuery"),"\ub77c\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc744 \ub9cc\ub4e4\uc5c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"// highlight-next-line\nconst cacheStore = new Map();\n\nconst useCacheQuery = () => {};\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cacheStore")," \uac1d\uccb4\ub97c ",(0,l.kt)("inlineCode",{parentName:"li"},"useCacheQuery.js"),"\uc758 \ubaa8\ub4c8\uc2a4\ucf54\ud504\uc5d0 \uc120\uc5b8\ud568\uc73c\ub85c\uc11c ",(0,l.kt)("inlineCode",{parentName:"li"},"cacheStore"),"\ub97c \uacf5\uc720\ud560 \uc218 \uc788\ub3c4\ub85d \ud588\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\uc989, ",(0,l.kt)("inlineCode",{parentName:"li"},"useCacheQuery"),"\ub97c \uc5b4\ub514\uc11c \ud638\ucd9c\ud558\ub4e0 ",(0,l.kt)("inlineCode",{parentName:"li"},"cacheStore"),"\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub2e4.\n(\ud30c\uc77c\ub85c \ubd84\ub9ac\ud574\ub3c4 \ub41c\ub2e4. ex: ",(0,l.kt)("inlineCode",{parentName:"li"},"cacheStore.js"),")")),(0,l.kt)("p",null,"\ub370\uc774\ud130 \uc694\uccad\uc758 \uc0c1\ud0dc\ub97c \ucef4\ud3ec\ub10c\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d ",(0,l.kt)("inlineCode",{parentName:"p"},"isLoading"),"\uacfc ",(0,l.kt)("inlineCode",{parentName:"p"},"error"),"\uc5d0 \ub300\ud55c \uc0c1\ud0dc\ub3c4 \ud568\uaed8 \ucea1\uc290\ud654\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"import { useState } from 'react';\n\nconst cacheStore = new Map();\n\nconst useCacheQuery = () => {\n  // highlight-start\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  // highlight-end\n\n  return { data, isLoading, error };\n};\n")),(0,l.kt)("p",null,"\ub9e4\uac1c\ubcc0\uc218\ub85c\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheStore"),"\uc758 key\uac00 \ub420 ",(0,l.kt)("inlineCode",{parentName:"p"},"queryKey"),"\uc640 \uc694\uccad\uc744 \uc218\ud589\ud560 ",(0,l.kt)("inlineCode",{parentName:"p"},"queryFn")," \ube44\ub3d9\uae30 \ud568\uc218, \uce90\uc2dc\uc758 \uc720\ud6a8\uc2dc\uac04 ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheTime"),"\ub97c \uc120\ud0dd\uc801\uc73c\ub85c \uc8fc\uc785 \ubc1b\uc744 \uc218 \uc788\ub3c4\ub85d \ud558\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"import { useState } from 'react';\n\n// highlight-next-line\nconst initialCacheTime = 5 * 60 * 1000;\nconst cacheStore = new Map();\n\n// highlight-next-line\nconst useCacheQuery = ({ queryKey, queryFn, cacheTime = initialCacheTime }) => {\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  return { data, isLoading, error };\n};\n")),(0,l.kt)("p",null,"\uadf8\ub9ac\uace0 \ub370\uc774\ud130\ub97c \uc11c\ubc84\uc5d0\uc11c \uac00\uc838\uc624\uace0 \uce90\uc2dc\uc5d0 \uc800\uc7a5\ud558\ub294 \ub85c\uc9c1\uc744 \uc791\uc131\ud574\ubcf4\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"// ...\nconst fetchWithCache = async () => {\n  try {\n    setIsLoading(true);\n    const { data } = await queryFn();\n    cacheStore.set(queryKey, { data, createAt: Date.now() });\n    setData(data);\n  } catch (e) {\n    setError(e);\n  } finally {\n    setIsLoading(false);\n  }\n};\n// ...\n")),(0,l.kt)("p",null,"\uc11c\ubc84\uc5d0\uc11c \ubc1b\uc544\uc628 \ub370\uc774\ud130\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheStore"),"\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},"{ data: \uc11c\ubc84\uc5d0\uc11c \uac00\uc838\uc628 \ub370\uc774\ud130, createAt: \ud604\uc7ac \uc2dc\uac04 }")," \uc758 \ud615\ud0dc\ub85c \uc800\uc7a5\ud558\ub3c4\ub85d \ud558\uc600\ub2e4. \ud604\uc7ac \uc2dc\uac04\uc744 \ud568\uaed8 \uc800\uc7a5\ud574\uc57c \ud6c4\uc5d0 \uce90\uc2dc \ud0c0\uc784\uacfc \ube44\uad50\ub97c \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("inlineCode",{parentName:"p"},"isLoading")," \uc0c1\ud0dc\ub294 \uc694\uccad\uc774 \uc131\uacf5\ud558\ub4e0 \uc2e4\ud328\ub97c \ud558\ub4e0 \ube44\ub3d9\uae30 \uc791\uc5c5\uc774 \uc644\ub8cc\uac00 \ub418\uba74 ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),"\ub85c \ubcc0\uacbd\ud574\uc8fc\uc5b4\uc57c \ud558\ubbc0\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"finally")," \ubb38\uc5d0\uc11c \ucc98\ub9ac\ud574\uc900\ub2e4.")),(0,l.kt)("p",null,"\uadf8\ub807\ub2f4 \uc6b0\ub9ac\uc758 \uce90\uc2dc \ud655\uc778 \uacfc\uc815\uc740 \uc5b8\uc81c \uc5b4\ub5bb\uac8c \uc774\ub8e8\uc5b4\uc9c8\uae4c? \uc11c\ubc84\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \ub85c\uc9c1\uc5d0 \uce90\uc2dc \ud655\uc778 \uacfc\uc815\uc744 \uc5b9\uc5b4\ubcf4\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"// ...\nconst fetchWithCache = async () => {\n  if (cacheStore.has(queryKey)) {\n    const cache = cacheStore.get(queryKey);\n    if (Date.now() - cache.createAt < cacheTime) {\n      setData(cache.data);\n      return;\n    }\n  }\n};\n// ...\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\uc0ac\uc6a9\uc790\uc758 \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uba74 ",(0,l.kt)("inlineCode",{parentName:"li"},"cacheStore"),"\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"li"},"queryKey"),"\uac00 \uc788\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"cacheStore"),"\uc5d0 \ud574\ub2f9 key\uac00 \uc874\uc7ac\ud55c\ub2e4\uba74 value\uc758 \uc0dd\uc131\uc2dc\uac04(ms)\uacfc \ud604\uc7ac\uc2dc\uac04(ms)\uc758 \ucc28\uc774\ub97c ",(0,l.kt)("inlineCode",{parentName:"li"},"cacheTime"),"\uacfc \ube44\uad50\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ol"},"\ub9cc\uc57d \uc870\uac74\uc774 \ubaa8\ub450 \ub9cc\uc871\ub418\uba74 \uce90\uc2dc\ub97c \uc0ac\uc6a9\ud558\uc5ec ",(0,l.kt)("inlineCode",{parentName:"li"},"data"),"\uc0c1\ud0dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uace0 \uc11c\ubc84\uc5d0 \ub370\uc774\ud130 \uc694\uccad\uc744 \ubcf4\ub0b4\uc9c0 \uc54a\ub294\ub2e4. \uc720\ud6a8\ud55c \uce90\uc2dc\uac00 \uc5c6\uc744 \uacbd\uc6b0 \uc11c\ubc84\uc5d0 \ub370\uc774\ud130 \uc694\uccad\uc744 \uc218\ud589\ud55c\ub2e4.")),(0,l.kt)("p",null,"\ub9c8\uc9c0\ub9c9\uc73c\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"useCallback"),"\uacfc ",(0,l.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub85c \ube44\ub3d9\uae30 \ud568\uc218\ub97c \uc815\ub9ac\ud574\ubcf4\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"// ...\nconst fetchWithCache = useCallback(async () => {\n  // ...\n}, [cacheTime, queryFn, queryKey]);\n\nuseEffect(() => {\n  fetchWithCache();\n}, [fetchWithCache]);\n// ...\n")),(0,l.kt)("details",null,(0,l.kt)("summary",null,"\uc9c0\uae08\uae4c\uc9c0\uc758 ",(0,l.kt)("code",null,"useCacheQuery")," \ucf54\ub4dc \uc804\ubb38"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"import { useState, useEffect, useCallback } from 'react';\n\nconst initialCacheTime = 5 * 60 * 1000;\nconst cacheStore = new Map();\n\nconst useCacheQuery = ({ queryKey, queryFn, cacheTime = initialCacheTime }) => {\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchWithCache = useCallback(async () => {\n    if (cacheStore.has(queryKey)) {\n      const cache = cacheStore.get(queryKey);\n      if (Date.now() - cache.createAt < cacheTime) {\n        setData(cache.data);\n        return;\n      }\n    }\n    try {\n      setIsLoading(true);\n      const { data } = await queryFn();\n      cacheStore.set(queryKey, { data, createAt: Date.now() });\n      setData(data);\n    } catch (e) {\n      setError(e);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [cacheTime, queryFn, queryKey]);\n\n  useEffect(() => {\n    fetchWithCache();\n  }, [fetchWithCache]);\n\n  return { data, isLoading, error };\n};\n"))),(0,l.kt)("h3",{id:"\ud504\ub85c\uc81d\ud2b8\uc5d0-\uc801\uc6a9\ud574\ubcf4\uae30"},"\ud504\ub85c\uc81d\ud2b8\uc5d0 \uc801\uc6a9\ud574\ubcf4\uae30"),(0,l.kt)("p",null,"\uc790\ub3d9\uc644\uc131 \uac80\uc0c9 \uae30\ub2a5\uc5d0 \ubc29\uae08 \ub9cc\ub4e0 \uc774 \ucee4\uc2a4\ud140 \ud6c5\uc744 \uc801\uc6a9\ud574\ubcf4\uc790. ",(0,l.kt)("inlineCode",{parentName:"p"},"getSearchTerms"),"\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"input"),"\uc744 \ud30c\ub77c\ubbf8\ud130\ub85c \uc124\uc815\ud558\uc5ec \uc11c\ubc84\uc5d0 \ub370\uc774\ud130 \uc694\uccad\uc744 \ud558\ub294 \ube44\ub3d9\uae30 \ud568\uc218\ub2e4. (",(0,l.kt)("inlineCode",{parentName:"p"},"input")," \uc0c1\ud0dc \ub300\ud55c \ub514\ubc14\uc6b4\uc2f1 \ucc98\ub9ac\uc640 \ud14d\uc2a4\ud2b8 \uc804\ucc98\ub9ac\ub85c \uce90\uc2dc\uc5d0 \ubd88\ud544\uc694\ud55c \uc694\uccad\uc774 \ub4e4\uc5b4\uac00\uc9c0 \uc54a\ub3c4\ub85d \ucc98\ub9ac\ud574\ub450\uc5c8\ub2e4. \ucef4\ud3ec\ub10c\ud2b8\uc758 \uc0c1\uc138 \ucf54\ub4dc\ub294 \uc0dd\ub7b5\ud55c\ub2e4.)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="SearchBar.jsx"',title:'"SearchBar.jsx"'},"// ...\nconst {\n  data: recommendations,\n  isLoading,\n  error,\n} = useCacheQuery({\n  queryKey: `@Suggestion ${input}`,\n  queryFn: useCallback(() => getSearchTerms(input), []),\n});\n// ...\n")),(0,l.kt)("p",null,"\uc774\uc5d0 \ub300\ud55c \uacb0\uacfc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"example image 1",src:n(473).Z,width:"1200",height:"556"}),"\n",(0,l.kt)("img",{alt:"example image 2",src:n(4771).Z,width:"869",height:"364"})),(0,l.kt)("p",null,"\uac19\uc740 \uac80\uc0c9\uc5b4\ub97c \uc5ec\ub7ec\ucc28\ub840 \uac80\uc0c9\ud588\uc9c0\ub9cc \uc694\uccad\uc740 1\ubc88\ub9cc \uc77c\uc5b4\ub0ac\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheStore"),"\uc5d0 \uc81c\ub300\ub85c \ub4e4\uc5b4\uac00 \uc788\ub294 \uac83\uc744 \ubcf4\ub2c8 \uce90\uc2f1\uc774 \uc81c\ub300\ub85c \ub3d9\uc791\ud558\ub294 \uac83\uc744 \ud655\uc778\ud588\ub2e4."),(0,l.kt)("p",null,"\uadf8\ub7f0\ub370 \uc774 \ucee4\uc2a4\ud140 \ud6c5\uc5d4 \ubb38\uc81c\uc810\uc774 \uc788\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ud604\uc7ac \uce90\uc2dc\ub294 \ub85c\uceec \uba54\ubaa8\ub9ac\uc5d0 \uc800\uc7a5\ub418\uace0 \uc788\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\ucffc\ub9ac\uc758 \uac1c\uc218\uac00 \ub298\uc5b4\ub0a0\uc218\ub85d \uce90\uc2dc\uac00 \ubb34\ud55c\uc815 \ucee4\uc9c4\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\uc989, \uba54\ubaa8\ub9ac \ub204\uc218\uac00 \uc0dd\uae34\ub2e4.")),(0,l.kt)("p",null,"\uc774\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uc801\uc808\ud55c \uce90\uc2dc \uc815\ucc45\uc744 \uad6c\ud604\ud574\uc57c \ud55c\ub2e4. \uce90\uc2dc\uc5d0 \ub300\ud55c \ub9cc\ub8cc \uc815\ucc45\uc774\ub098 \uc81c\ud55c\ub41c \uba54\ubaa8\ub9ac \uc0ac\uc6a9\uc744 \uace0\ub824\ud574\ubcf4\uc790."),(0,l.kt)("h2",{id:"3-\uce90\uc2dc-\uc815\ucc45-\uad6c\ud604"},"3. \uce90\uc2dc \uc815\ucc45 \uad6c\ud604"),(0,l.kt)("h3",{id:"\uc5b4\ub5bb\uac8c-\ud558\uba74-\uce90\uc2dc-\uc815\ucc45\uc744-\uad6c\ud604\ud560-\uc218-\uc788\uc744\uae4c"},"\uc5b4\ub5bb\uac8c \ud558\uba74 \uce90\uc2dc \uc815\ucc45\uc744 \uad6c\ud604\ud560 \uc218 \uc788\uc744\uae4c?"),(0,l.kt)("p",null,"\ud544\uc790\ub294 \ucd5c\ub300 \uce90\uc2dc\uc758 \uac1c\uc218\ub97c \uc124\uc815\ud558\uace0 \uc774\ub97c \ub118\uc744\uc2dc \uc624\ub798\ub41c \uce90\uc2dc\ubd80\ud130 \uc9c0\uc6b0\ub294 \ubc29\ubc95\uc744 \uc120\ud0dd\ud588\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ucd5c\ub300 \uce90\uc2dc \uac1c\uc218 \uc120\uc5b8"),(0,l.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130 \uc694\uccad \uacfc\uc815\uc911 \uce90\uc2dc \ud655\uc778 \uc791\uc5c5(\uac1c\uc218, \ucd5c\uc2e0\ud654)"),(0,l.kt)("li",{parentName:"ul"},"\uc624\ub798\ub41c \uce90\uc2dc \uc0ad\uc81c \uc791\uc5c5")),(0,l.kt)("h3",{id:"\ucee4\uc2a4\ud140-\ud6c5\uc5d0-\uc801\uc6a9\ud558\uae30"},"\ucee4\uc2a4\ud140 \ud6c5\uc5d0 \uc801\uc6a9\ud558\uae30"),(0,l.kt)("p",null,"\uc6b0\uc120 \ucd5c\ub300 \uce90\uc2dc \uac1c\uc218 ",(0,l.kt)("inlineCode",{parentName:"p"},"maxCacheSize"),"\ub97c \uc120\uc5b8\ud574\uc8fc\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"import { useState, useEffect, useCallback } from 'react';\n\nconst initialCacheTime = 5 * 60 * 1000;\n// highlight-next-line\nconst maxCacheSize = 100;\nconst cacheStore = new Map();\n\n// ...\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"cacheStore"),"\uac00 ",(0,l.kt)("inlineCode",{parentName:"p"},"maxCacheSize"),"\uc758 \uac1c\uc218\ub97c \ub118\ub294\ub2e4\uba74 \uc624\ub798\ub41c \uce90\uc2dc\ub97c \uc0ad\uc81c\ud574\uc8fc\ub294 \ub85c\uc9c1\uc744 \ucd94\uac00\ud574\uc8fc\uc790. ",(0,l.kt)("inlineCode",{parentName:"p"},"Map"),"\uc740 \uc0bd\uc785\ub41c \uc21c\uc11c\ub97c \uae30\uc5b5\ud558\ubbc0\ub85c \uccab\ubc88\uc9f8 key\ub97c \ucd94\ucd9c\ud558\uace0 \uce90\uc2dc\ub97c \uc9c0\uc6cc\uc8fc\uba74 \ub41c\ub2e4!"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"try {\n  setIsLoading(true);\n  const { data } = await queryFn();\n  cacheStore.set(queryKey, { data, createAt: Date.now() });\n\n  // highlight-start\n  if (cacheStore.size > maxCacheSize) {\n    const oldestCacheKey = cacheStore.keys().next().value;\n    cacheStore.delete(oldestCacheKey);\n  }\n  // highlight-end\n\n  // ...\n}\n")),(0,l.kt)("p",null,"\ub2e8, \uce90\uc2dc\ub97c \ucd5c\uadfc\uc5d0 \uc0ac\uc6a9\ud588\uc74c\uc5d0\ub3c4 \uba3c\uc800 \uc9c0\uc6cc\uc9c0\ub294 \uac83\uc744 \ubc29\uc9c0\ud574\uc8fc\uae30 \uc704\ud574 \uce90\uc2dc \uc21c\uc11c\ub97c \ucd5c\uc2e0\ud654 \ud574\uc8fc\uc5b4\uc57c\ud55c\ub2e4."),(0,l.kt)("p",null,"\uadf8\ub9ac\uace0 \uce90\uc2dc\ud0c0\uc784\uc774 \uc9c0\ub0ac\uc744 \uacbd\uc6b0\ub3c4 \uc0ad\uc81c\ud574 \uc8fc\uc5b4\uc57c\ud55c\ub2e4. \ub450 \ub85c\uc9c1\uc744 \ucd94\uac00\ud574\uc8fc\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"const fetchWithCache = useCallback(async () => {\n  if (cacheStore.has(queryKey)) {\n    const cache = cacheStore.get(queryKey);\n    if (Date.now() - cache.createAt < cacheTime) {\n      setData(cache.data);\n      // highlight-start\n      cacheStore.delete(queryKey);\n      cacheStore.set(queryKey, cache);\n      // highlight-end\n      return;\n      // highlight-start\n    } else {\n      cacheStore.delete(queryKey);\n    }\n    // highlight-end\n  }\n  // ...\n}, [cacheTime, queryFn, queryKey]);\n")),(0,l.kt)("p",null,"\uc774\uc81c \ubb34\uc218\ud55c \ub370\uc774\ud130\ub85c \uba54\ubaa8\ub9ac \ub204\uc218\uac00 \ub420 \uc704\ud5d8\uc744 \uc81c\uac70\ud588\ub2e4."),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"4-\ubd80\uac00-\uae30\ub2a5-\uad6c\ud604"},"4. \ubd80\uac00 \uae30\ub2a5 \uad6c\ud604"),(0,l.kt)("p",null,"\uc9c0\uae08 \uc0c1\ud0dc\uc5d0\uc11c \ubc1b\uc544\uc628 \ub370\uc774\ud130\ub97c \ucef4\ud3ec\ub10c\ud2b8\uc5d0\uc11c \uac00\uacf5\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ubd80\uac00\uc801\uc73c\ub85c, \ucee4\uc2a4\ud140 \ud6c5\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},"select")," \uc635\uc158\uc744 \ub9cc\ub4e4\uc5b4\uc11c \ub370\uc774\ud130\ub97c \uac00\uacf5\ud558\uc5ec \uc6d0\ud558\ub294 \ud615\ud0dc\ub85c \uac00\uc838\uc62c \uc218 \uc788\uc73c\uba74 \uc88b\uc744 \uac83 \uac19\uc558\ub2e4."),(0,l.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"initialData"),"\ub3c4 \ucd94\uac00\ud588\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"// ...\nconst useCacheQuery = ({\n  queryKey,\n  queryFn,\n  // highlight-next-line\n  initialData,\n  cacheTime = initialCacheTime,\n  // highlight-next-line\n  select,\n}) => {\n  // highlight-next-line\n  const [data, setData] = useState(initialData);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // ...\n\n  // highlight-next-line\n  return { data: select ? select(data) : data, isLoading, error };\n};\n\nexport default useCacheQuery;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const {\n  data: recommendations,\n  isLoading,\n  error,\n} = useCacheQuery({\n  queryKey: `@Suggestion ${input}`,\n  queryFn: useCallback(() => getSearchTerms(input), []),\n  initialData: [],\n  cacheTime: 2 * 60 * 1000,\n  select: data => data.slice(0, 7),\n});\n")),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("inlineCode",{parentName:"p"},"select"),"\ub85c \uc0ac\uc6a9\ud560 \ucf5c\ubc31 \ud568\uc218\uc5d0 \ubd80\uc218\ud6a8\uacfc\uac00 \uc788\ub294(\uc6d0\ubcf8 \ubc30\uc5f4\uc744 \ubc14\uafb8\ub294) \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294\ub2e4.\n\ubd80\uc218\ud6a8\uacfc\ub294 \uc608\uae30\uce58 \ubabb\ud55c \uacb0\uacfc\ub97c \ub9cc\ub4e4\uc5b4 \ub0b8\ub2e4."),(0,l.kt)("p",{parentName:"admonition"},"ex) ",(0,l.kt)("inlineCode",{parentName:"p"},"push"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"shift"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"splice"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"concat")," \ub4f1")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\ub9c8\uce58\uba70"},"\ub9c8\uce58\uba70"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"\uc644\uc131\ub41c ",(0,l.kt)("code",null,"useCacheQuery")," \ucf54\ub4dc \uc804\ubb38"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="useCacheQuery.js"',title:'"useCacheQuery.js"'},"import { useCallback, useEffect, useState } from 'react';\n\nconst initialCacheTime = 5 * 60 * 1000;\nconst cacheStore = new Map();\nconst maxCacheSize = 100;\n\nconst useCacheQuery = ({\n  queryKey,\n  queryFn,\n  initialData,\n  cacheTime = initialCacheTime,\n  select,\n}) => {\n  const [data, setData] = useState(initialData);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchWithCache = useCallback(async () => {\n    if (cacheStore.has(queryKey)) {\n      const cache = cacheStore.get(queryKey);\n      if (Date.now() - cache.createAt < cacheTime) {\n        setData(cache.data);\n        cacheStore.delete(queryKey);\n        cacheStore.set(queryKey, cache);\n        return;\n      } else {\n        cacheStore.delete(queryKey);\n      }\n    }\n\n    try {\n      setIsLoading(true);\n      const { data } = await queryFn();\n      cacheStore.set(queryKey, { data, createAt: Date.now() });\n\n      if (cacheStore.size > maxCacheSize) {\n        const oldestCacheKey = cacheStore.keys().next().value;\n        cacheStore.delete(oldestCacheKey);\n      }\n\n      setData(data);\n    } catch (e) {\n      setError(e);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [cacheTime, queryFn, queryKey]);\n\n  useEffect(() => {\n    fetchWithCache();\n  }, [fetchWithCache]);\n\n  return { data: select ? select(data) : data, isLoading, error };\n};\n\nexport default useCacheQuery;\n")),(0,l.kt)("p",null,"\uc694\uc57d\ud558\uc790\uba74 ",(0,l.kt)("inlineCode",{parentName:"p"},"useCacheQuery"),"\ub97c \ud638\ucd9c\ud558\uba74 ",(0,l.kt)("inlineCode",{parentName:"p"},"initialData"),"\ub97c \ucd08\uae30 \uc0c1\ud0dc\ub85c \uc800\uc7a5\ud558\uace0 \ube44\ub3d9\uae30 \ud568\uc218 ",(0,l.kt)("inlineCode",{parentName:"p"},"queryFn"),"\uc744 \ub798\ud551\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"fetchWithCache"),"\ub97c ",(0,l.kt)("inlineCode",{parentName:"p"},"useEffect"),"\uc5d0\uc11c \ud638\ucd9c\ud55c\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"fetchWithCache"),"\uc5d0\uc11c\ub294 \ub85c\uceec \uce90\uc2dc\ub97c \ud655\uc778\ud558\uace0 \ucd5c\uc2e0\ud654\ud558\uba70 \ud544\uc694\uc2dc \uc11c\ubc84\uc5d0 \ub370\uc774\ud130\ub97c \uc694\uccad\ud574 ",(0,l.kt)("inlineCode",{parentName:"p"},"data"),"\uc640 \uce90\uc2dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"data"),"\ub97c ",(0,l.kt)("inlineCode",{parentName:"p"},"select"),"\uc5ec\ubd80\uc5d0 \ub530\ub77c \uac00\uacf5\ud574\uc11c \ubc18\ud658\ud558\uac70\ub098 \uadf8\ub300\ub85c \ubc18\ud658\ud55c\ub2e4.")),(0,l.kt)("p",null,"\uc774\ub807\uac8c fetching \uc804\uc6a9 \ub85c\uceec \uce90\uc2f1 \uae30\ub2a5\uc744 \uac00\uc9c4 \ucee4\uc2a4\ud140 \ud6c5\uc744 \uad6c\ud604\ud574\ubd24\ub2e4."),(0,l.kt)("p",null,"\uc9e7\uc740 \uae30\uac04, \uc791\uc740 \ud504\ub85c\uc81d\ud2b8\uc9c0\ub9cc \uc5b4\ub5bb\uac8c \uce90\uc2f1\uc744 \uad6c\ud604\ud560\uc9c0 \uace0\ubbfc\ud574\ubcf4\ub294 \uc2dc\uac04\uc774 \uc54c\ucc3c\ub358\uac70 \uac19\ub2e4. (\ub355\ubd84\uc5d0 react query \ubcf5\uc2b5\ub3c4)"),(0,l.kt)("p",null,"\ucd94\uac00\ub85c \uc11c\ubc84\uc5d0 POST, PUT, DELETE \ub4f1 \uc694\uccad\uc744 \ub2f4\ub2f9\ud558\ub294 mutation \uae30\ub2a5, \uc0c1\ud0dc\uc758 \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8\uc640 \ube44\uad00\uc801 \uc5c5\ub370\uc774\ud2b8, \ub370\uc774\ud130 \ubcc0\uacbd\uc2dc query invalid \uae30\ub2a5, \uc120\uc5b8\uc801\uc73c\ub85c \uc5d0\ub7ec, \ub85c\ub529 \ucc98\ub9ac\ub97c \ud560 \uc218 \uc788\ub3c4\ub85d ",(0,l.kt)("inlineCode",{parentName:"p"},"ErrorBoundary"),"\uc640 ",(0,l.kt)("inlineCode",{parentName:"p"},"Suspence"),"\ub97c \uc9c0\uc6d0\ud558\ub294 \uae30\ub2a5\uae4c\uc9c0 \ucd94\uac00\ud558\uba74 \uc88b\uc744 \uac83 \uac19\ub2e4."))}h.isMDXComponent=!0},473:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/asset-1-d24ca9fa20460a642fe62426af52c6a9.png"},4771:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/asset-2-6f9b4bb0da042e7764d8a9071a7cfd01.png"}}]);