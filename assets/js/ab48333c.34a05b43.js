"use strict";(self.webpackChunk_5kdk_blog=self.webpackChunk_5kdk_blog||[]).push([[8614],{3331:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>c});var t=r(6672);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},4219:e=>{e.exports=JSON.parse('{"permalink":"/blog/2025/04/04/query-factory","editUrl":"https://github.com/5kdk/5kdk.github.io/tree/main/blog/2025-04-04-query-factory.md","source":"@site/blog/2025-04-04-query-factory.md","title":"Querykey factory\uc5d0\uc11c Query factory\ub85c","description":"TanStack React Query\uc758 \ucffc\ub9ac\ub4e4\uc744 \ubcf4\ub2e4 \uc548\uc804\ud558\uac8c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95","date":"2025-04-04T00:00:00.000Z","tags":[{"inline":true,"label":"TanStack React Query","permalink":"/blog/tags/tan-stack-react-query"}],"readingTime":11.05,"hasTruncateMarker":true,"authors":[{"name":"Dongkyu Kim","title":"Front-end Developer","url":"https://github.com/5kdk","imageURL":"https://github.com/5kdk.png","key":"5kdk","page":null}],"frontMatter":{"title":"Querykey factory\uc5d0\uc11c Query factory\ub85c","authors":"5kdk","description":"TanStack React Query\uc758 \ucffc\ub9ac\ub4e4\uc744 \ubcf4\ub2e4 \uc548\uc804\ud558\uac8c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95","tags":["TanStack React Query"],"keywords":["queryKey","QueryKey factory","\ucffc\ub9ac\ud0a4 \uad00\ub9ac","\ucffc\ub9ac\ud0a4 \ud329\ud1a0\ub9ac","\ucffc\ub9ac \ud329\ud1a0\ub9ac","Query factory"],"comments":true},"unlisted":false,"prevItem":{"title":"\ud5c8\uc810 \uc5c6\ub294 UX\ub97c \ub9cc\ub4dc\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc \uc804\ub7b5","permalink":"/blog/2025/04/28/flawless-ux-frontend-strategy"},"nextItem":{"title":"Yarn v4, Next.js \ud658\uacbd \uc138\ud305\uacfc \ub9c8\uc8fc\ud588\ub358 \uc774\uc288\ub4e4","permalink":"/blog/2024/04/23/yarn-v4-nextjs-issues"}}')},9646:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>t,toc:()=>d});var t=r(4219),s=r(3420),o=r(3331);const i={title:"Querykey factory\uc5d0\uc11c Query factory\ub85c",authors:"5kdk",description:"TanStack React Query\uc758 \ucffc\ub9ac\ub4e4\uc744 \ubcf4\ub2e4 \uc548\uc804\ud558\uac8c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95",tags:["TanStack React Query"],keywords:["queryKey","QueryKey factory","\ucffc\ub9ac\ud0a4 \uad00\ub9ac","\ucffc\ub9ac\ud0a4 \ud329\ud1a0\ub9ac","\ucffc\ub9ac \ud329\ud1a0\ub9ac","Query factory"],comments:!0},c=void 0,l={authorsImageUrls:[void 0]},d=[{value:"1. QueryKey factory",id:"1-querykey-factory",level:2},{value:"2. React Query\uc758 \uc635\uc158 \uac1d\uccb4 \ucd94\uc0c1\ud654 \uc2dc \ud55c\uacc4\uc810",id:"2-react-query\uc758-\uc635\uc158-\uac1d\uccb4-\ucd94\uc0c1\ud654-\uc2dc-\ud55c\uacc4\uc810",level:2},{value:"3. queryOptions\uc758 \ub4f1\uc7a5",id:"3-queryoptions\uc758-\ub4f1\uc7a5",level:2},{value:"4. QueryKey factory\uc5d0\uc11c Query factory\ub85c\uc758 \uc804\ud658",id:"4-querykey-factory\uc5d0\uc11c-query-factory\ub85c\uc758-\uc804\ud658",level:2},{value:"5. \uacb0\ub860",id:"5-\uacb0\ub860",level:2}];function u(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["\uc774 \uae00\uc5d0\uc11c\ub294 TanStack React Query\uc5d0\uc11c \ucffc\ub9ac \ud0a4(queryKey)\ub97c \ud6a8\uc728\uc801\uc774\uace0 \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud558\ub294 ",(0,s.jsx)(n.strong,{children:"\ucffc\ub9ac \ud0a4 \ud329\ud1a0\ub9ac(QueryKey factory)"})," \ud328\ud134\uc5d0 \ub300\ud574 \uc0b4\ud3b4\ubcf4\uace0, TanStack React Query v5\uc5d0\uc11c \ub3c4\uc785\ub41c ",(0,s.jsx)(n.code,{children:"queryOptions"}),"\ub97c \ud65c\uc6a9\ud558\uc5ec \ucffc\ub9ac\ud0a4\uc640 \ucffc\ub9ac\ub97c \ud1b5\ud569\ud558\uc5ec \uad00\ub9ac\ud558\ub294 ",(0,s.jsx)(n.strong,{children:"\ucffc\ub9ac \ud329\ud1a0\ub9ac(Query factory)"})," \uc5d0 \ub300\ud574 \uc54c\uc544\ubd05\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["\uae00\uc5d0 \ub4e4\uc5b4\uac00\uae30 \uc55e\uc11c ",(0,s.jsx)(n.strong,{children:"QueryKey factory"})," \uc640 ",(0,s.jsx)(n.strong,{children:"Query factory"})," \ub97c \uad6c\ubd84\ud558\uc138\uc694."]})}),"\n",(0,s.jsx)(n.h2,{id:"1-querykey-factory",children:"1. QueryKey factory"}),"\n",(0,s.jsx)(n.p,{children:"React Query\ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \uc5ec\ub7ec \ucffc\ub9ac\ub4e4\uc744 \uc0ac\uc6a9\ud558\ub2e4 \ubcf4\uba74, \ud0a4 \uad00\ub9ac\uac00 \uc5b4\ub824\uc6cc \ucf54\ub4dc\ubca0\uc774\uc2a4\ub97c \ud55c\ucc38 \ucc3e\uc544\ubcf4\uac70\ub098 \uc911\ubcf5 \ucffc\ub9ac\ud0a4\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(n.p,{children:["\uc774\ub7f0 \ubb38\uc81c\ub97c \uc608\ubc29\ud558\uae30 \uc704\ud574 \ucd94\ucc9c\ub418\ub294 \ubc29\ubc95\uc774 \ubc14\ub85c ",(0,s.jsx)(n.strong,{children:"\ucffc\ub9ac \ud0a4 \ud329\ud1a0\ub9ac"})," \ud328\ud134\uc785\ub2c8\ub2e4. \uc774 \ud328\ud134\uc740 \ud558\ub098\uc758 \uae30\ub2a5(feature)\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ucffc\ub9ac \ud0a4\ub97c \uc0c1\uc218\ub85c \uad00\ub9ac\ud558\uc5ec \uc77c\uad00\uc131\uacfc \uc720\uc9c0\ubcf4\uc218\uc131\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"\ucffc\ub9ac \ud0a4\ub97c \uc218\ub3d9\uc73c\ub85c \ub9ce\uc774 \uc120\uc5b8\ud558\uba74 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uae30 \uc26c\uc6b8 \ubfd0\ub9cc \uc544\ub2c8\ub77c, \ucd94\ud6c4\uc5d0 \ud0a4\uc5d0 \ub354 \uc138\ubd84\ud654\ub41c \uc218\uc900(granularity)\uc744 \ucd94\uac00\ud558\uace0 \uc2f6\uc5b4\uc9c8 \uacbd\uc6b0 \ubcc0\uacbd\ub3c4 \ub354 \uc5b4\ub835\uac8c \ub9cc\ub4ed\ub2c8\ub2e4."}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"\uadf8\ub798\uc11c \uc800\ub294 \uae30\ub2a5(feature) \ub2e8\uc704\ub85c \ud558\ub098\uc758 \ucffc\ub9ac \ud0a4 \ud329\ud1a0\ub9ac(Query Key factory)\ub97c \ub9cc\ub4dc\ub294 \uac83\uc744 \uad8c\uc7a5\ud569\ub2c8\ub2e4. \uc774\ub294 \ub2e8\uc21c\ud788 \ucffc\ub9ac \ud0a4\ub97c \uc0dd\uc131\ud558\ub294 \ud56d\ubaa9\uacfc \ud568\uc218\ub4e4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uac1d\uccb4\uc77c \ubfd0\uc774\uba70, \uc774\ub97c \ucee4\uc2a4\ud140 \ud6c5\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Dominik D"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="typescript"',children:"const todoKeys = {\n  all: ['todos'] as const,\n  lists: () => [...todoKeys.all, 'list'] as const,\n  list: (filters: string) => [...todoKeys.lists(), { filters }] as const,\n  details: () => [...todoKeys.all, 'detail'] as const,\n  detail: (id: number) => [...todoKeys.details(), id] as const,\n};\n\nuseQuery({\n  queryKey: todoKeys.detail(todoId),\n  queryFn: () => fetchTodo(todoId),\n});\n\nqueryClient.removeQueries({\n  queryKey: todoKeys.all,\n});\n\nqueryClient.invalidateQueries({\n  queryKey: todoKeys.lists(),\n});\n\nqueryClient.prefetchQueries({\n  queryKey: todoKeys.detail(id),\n  queryFn: () => fetchTodo(id),\n});\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"2-react-query\uc758-\uc635\uc158-\uac1d\uccb4-\ucd94\uc0c1\ud654-\uc2dc-\ud55c\uacc4\uc810",children:"2. React Query\uc758 \uc635\uc158 \uac1d\uccb4 \ucd94\uc0c1\ud654 \uc2dc \ud55c\uacc4\uc810"}),"\n",(0,s.jsx)(n.p,{children:"\ucffc\ub9ac \ud0a4\ub97c \uc0c1\uc218\ub85c \uad00\ub9ac\ud588\ub4ef\uc774 \uc635\uc158 \uac1d\uccb4\ub97c \uc0c1\uc218\ub85c \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\ub3c4 \uac00\ub2a5\ud569\ub2c8\ub2e4. \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c\ub294 \uc544\ub798\uc640 \uac19\uc740 \ucf54\ub4dc\uac00 \uae54\ub054\ud558\uac8c \ub3d9\uc791\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="javascript"',children:"const todosQuery = {\n  queryKey: todokeys.all,\n  queryFn: fetchTodos,\n  staleTime: 5000,\n};\n\nuseQuery(todosQuery);\n\nqueryClient.prefetchQuery(todosQuery);\n\nuseSuspenseQuery(todosQuery);\n\nuseQueries([\n  {\n    queries: [todosQuery],\n  },\n]);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\ud558\uc9c0\ub9cc \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c\ub294 \uc774 \ud328\ud134\uc5d0 \ud55c \uac00\uc9c0 \uc911\uc694\ud55c \ubb38\uc81c\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8\uc758 \uad6c\uc870\uc801 \ud0c0\uc785 \uc2dc\uc2a4\ud15c(structural typing)\uc73c\ub85c \uc778\ud574 \uac1d\uccb4\ub85c \ubd84\ub9ac\ub41c \uc635\uc158\uc5d0\uc11c \uc624\ud0c0\ub098 \uc798\ubabb\ub41c \ud504\ub85c\ud37c\ud2f0 \uc0ac\uc6a9 \uc2dc \ud0c0\uc785 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing#%EB%8D%95-%ED%83%80%EC%9D%B4%ED%95%91%EA%B3%BC-objectkeys%EC%9D%98-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84",children:"\ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8\uc758 \uad6c\uc870\uc801 \ud0c0\uc785 \uc2dc\uc2a4\ud15c"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="typescript"',children:"useQuery({\n  queryKey: todokeys.all,\n  queryFn: fetchTodos,\n  stallTime: 5000, // staleTime\uc758 \uc624\ud0c0 - type error \ubc1c\uc0dd\n});\n\nconst todosQuery = {\n  queryKey: todokeys.all,\n  queryFn: fetchTodos,\n  stallTime: 5000, // staleTime\uc758 \uc624\ud0c0\n};\n\nuseQuery(todosQuery); // type error\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uc74c\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\ub610\ud55c ",(0,s.jsx)(n.code,{children:"queryClient.getQueryData"}),"\uc640 \uc720\uc0ac\ud55c \ud568\uc218\ub4e4\uc758 \ud0c0\uc785 \uc218\uc900\uc5d0\uc11c ",(0,s.jsx)(n.code,{children:"unknown"}),"\uc744 \ubc18\ud658\ud558\uae30\ub3c4 \ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c \uc81c\ub124\ub9ad\uc744 \uc0ac\uc6a9\ud568\uc73c\ub85c\uc368 \uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const todoDetailQuery = (id: number) => ({\n  queryKey: ['todos'],\n  queryFn: () => fetchTodo(id),\n  fooTime: 5000, // \uc624\ud0c0\uc5ec\ub3c4 \uc778\ub77c\uc778\uc774 \uc544\ub2c8\uba74 \ud0c0\uc785 \uccb4\ud06c\uc5d0\uc11c \ubb34\uc2dc\ub428\n});\n\nconst App = ({ param }: { param: number }) => {\n  const queryClient = new QueryClient();\n\n  const query = useQuery(todoDetailQuery(param));\n\n  const data = queryClient.getQueryData(todoDetailQuery(params));\n  // data\uc758 \ucd94\ub860\uc774 \uc81c\ub300\ub85c \uc548 \ub418\uace0 unknown -> \uc81c\ub124\ub9ad \ub9e4\uac1c\ubcc0\uc218 \ud544\uc694\n\n  const todos = queryClient.getQueryData<Todo>(todoDetailQuery(params));\n  // Todo | undefined\n};\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"3-queryoptions\uc758-\ub4f1\uc7a5",children:"3. queryOptions\uc758 \ub4f1\uc7a5"}),"\n",(0,s.jsxs)(n.p,{children:["TanStack React Query v5\uc5d0\uc11c\ub294 \uc704 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c ",(0,s.jsx)(n.code,{children:"queryOptions"}),"\uac00 \uc0c8\ub86d\uac8c \ub3c4\uc785\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub7f0\ud0c0\uc784\uc5d0\uc11c\ub294 \uc0ac\uc2e4\uc0c1 \ub2e8\uc21c identity \ud568\uc218 \uc5ed\ud560\uc744 \ud558\uc9c0\ub9cc, \ud0c0\uc785 \ub808\ubca8\uc5d0\uc11c\ub294 ",(0,s.jsx)(n.code,{children:"queryClient"}),"\uc758 \uc5ec\ub7ec \ubd80\ubd84\ub4e4\uc744 \ud0c0\uc785 \uc548\uc804\ud558\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc8fc\uba70, ",(0,s.jsx)(n.code,{children:"queryKey"}),"\uc640 ",(0,s.jsx)(n.code,{children:"queryFn"})," \ub4f1\uc744 \ubc00\uc811\ud558\uac8c \ud0dc\uae45\ud574 \uc815\ud655\ud55c \ud0c0\uc785 \ucd94\ub860\uc744 \uc9c0\uc6d0\ud574 \uc90d\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud0c0\uc785 \uc624\ub958\uc758 \uc989\uac01\uc801\uc778 \uac10\uc9c0"}),": ",(0,s.jsx)(n.code,{children:"queryOptions"}),"\ub85c \uac10\uc2f8\uba74, ",(0,s.jsx)(n.code,{children:"staleTime"}),"\uc774\ub098 ",(0,s.jsx)(n.code,{children:"gcTime"}),", ",(0,s.jsx)(n.code,{children:"select"})," \uac19\uc740 \uc635\uc158\uc5d0 \uc624\ud0c0\uac00 \uc788\uc744 \ub54c \uc989\uc2dc \ud0c0\uc785 \uc5d0\ub7ec\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\uc790\ub3d9 \ud0c0\uc785 \ucd94\ub860"}),": ",(0,s.jsx)(n.code,{children:"getQueryData"}),", ",(0,s.jsx)(n.code,{children:"setQueryData"}),"\ub97c \uc0ac\uc6a9\ud560 \ub54c\ub3c4 \ucffc\ub9ac \ud568\uc218\uc758 \ubc18\ud658 \ud0c0\uc785\uc5d0 \ub9de\ucdb0 \uc790\ub3d9\uc73c\ub85c \uc815\ud655\ud55c \ud0c0\uc785 \ucd94\ub860\uc774 \uc774\ub904\uc9d1\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\uc77c\uad00\ub41c \uc7ac\uc0ac\uc6a9"}),": \ud558\ub098\uc758 \uac1d\uccb4\ub85c \ucffc\ub9ac \ud0a4, \ud568\uc218, \uc635\uc158\uc744 \ubb36\uc5b4 React Query\uc758 API \uc804\ubc18\uc5d0\uc11c \uc77c\uad00\ub418\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const todosQuery = queryOptions({\n  queryKey: ['todos'],\n  queryFn: fetchTodos,\n  staleTime: 30000,\n});\n\nconst data = queryClient.getQueryData(todosQuery.queryKey);\n// data\uac00 fetchTodo(id)\uc758 \ubc18\ud658 \ud0c0\uc785 \ub610\ub294 undefined\ub85c \uc815\ud655\ud558\uac8c \ucd94\ub860\ub428\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"queryOptions"}),"\ub97c \uc0ac\uc6a9\ud558\uba74 \uc624\ud0c8\uc790 \ubc29\uc9c0\ub294 \ubb3c\ub860, ",(0,s.jsx)(n.strong,{children:'\ucffc\ub9ac \ud0a4\uac00 \ud574\ub2f9 \ucffc\ub9ac \ud568\uc218\uc640 "\ub3d9\uc77c \uac1d\uccb4"'})," \uc784\uc744 \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8\uac00 \uc778\uc2dd\ud569\ub2c8\ub2e4. \uc774\ub294 React Query\ub97c \uc0ac\uc6a9\ud560 \ub54c \uacaa\ub294 \ub9ce\uc740 \ud0c0\uc785 \uad00\ub828 \ubb38\uc81c\ub97c \ud574\uacb0\ud574 \uc90d\ub2c8\ub2e4."]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"4-querykey-factory\uc5d0\uc11c-query-factory\ub85c\uc758-\uc804\ud658",children:"4. QueryKey factory\uc5d0\uc11c Query factory\ub85c\uc758 \uc804\ud658"}),"\n",(0,s.jsxs)(n.p,{children:["\uae30\uc874\uc758 \ucffc\ub9ac \ud0a4\ub9cc \uad00\ub9ac\ud558\ub294 \ud329\ud1a0\ub9ac\uc5d0\uc11c \ud55c \ub2e8\uacc4 \ub354 \ubc1c\uc804\ud558\uc5ec, \ud0a4\uc640 \uad00\ub828\ub41c \ucffc\ub9ac \ud568\uc218, \ucd94\uac00 \uc635\uc158\uc744 \ubaa8\ub450 \uacb0\ud569\ud558\uc5ec \uad00\ub9ac\ud558\ub294 ",(0,s.jsx)(n.strong,{children:"\ucffc\ub9ac \ud329\ud1a0\ub9ac(Query factory)"})," \ub85c \uc804\ud658\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ubaa8\ub4e0 \uc635\uc158\uc744 \ud55c\uacf3\uc5d0\uc11c \uad00\ub9ac\ud558\uba70 \ud0c0\uc785 \uc548\uc804\uc131\uacfc \ucf54\ub4dc\uc758 \uba85\ud655\uc131\uc744 \ub192\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud0a4\uc640 \ud568\uc218\uc758 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \uacb0\ud569"}),": \ucffc\ub9ac \ud0a4\uc640 \ucffc\ub9ac \ud568\uc218\ub294 \ubcf8\uc9c8\uc801\uc73c\ub85c \ubc00\uc811\ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c, \ud568\uaed8 \uad00\ub9ac\ud558\ub294 \uac83\uc774 \ub17c\ub9ac\uc801\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ucf54\ub4dc\uc758 \uc751\uc9d1\uc131 \ud5a5\uc0c1"}),": \uad00\ub828\ub41c \ucffc\ub9ac \ub85c\uc9c1\uc774 \ud55c \uacf3\uc5d0 \ubaa8\uc5ec \uc788\uc5b4 \ucf54\ub4dc\uc758 \uac00\ub3c5\uc131\uacfc \uc720\uc9c0\ubcf4\uc218\uc131\uc774 \ud5a5\uc0c1\ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud0c0\uc785 \uc548\uc804\uc131 \ubcf4\uc7a5"}),": ",(0,s.jsx)(n.code,{children:"queryOptions"}),"\ub97c \ud1b5\ud574 \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8\uc758 \ubaa8\ub4e0 \uc7a5\uc810\uc744 \ucd5c\ub300\ud55c \ud65c\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ucffc\ub9ac \ub85c\uc9c1\uc758 \uc7ac\uc0ac\uc6a9"}),": \ucffc\ub9ac \ub85c\uc9c1\uc744 \ud329\ud1a0\ub9ac\ub85c \ucea1\uc290\ud654\ud558\uc5ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc804\uccb4\uc5d0\uc11c \uc77c\uad00\ub418\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\ud328\uce6d\uacfc \ud504\ub9ac\ud328\uce6d \uac04 \uc635\uc158 \uacf5\uc720"}),": \ub3d9\uc77c\ud55c \ucffc\ub9ac\uc5d0 \ub300\ud55c \uc77c\ubc18 \ud328\uce6d\uacfc \ud504\ub9ac\ud328\uce6d \uc0ac\uc774\uc5d0 \ubaa8\ub4e0 \uc635\uc158\uc744 \uc77c\uad00\ub418\uac8c \uc720\uc9c0\ud560 \uc218 \uc788\uc5b4 \ucf54\ub4dc \uc911\ubcf5\uacfc \ubd88\uc77c\uce58\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const todoQueries = {\n  // \ud0a4 \uc804\uc6a9 \ud56d\ubaa9 (\ud0a4 \uacc4\uce35 \uad6c\uc870\uc6a9)\n  all: () => ['todos'],\n  lists: () => [...todoQueries.all(), 'list'],\n  details: () => [...todoQueries.all(), 'detail'],\n\n  // \uc2e4\uc81c queryOptions\ub97c \uc0ac\uc6a9\ud55c \ucffc\ub9ac \ud329\ud1a0\ub9ac\n  list: (filters: string) =>\n    queryOptions({\n      queryKey: [...todoQueries.lists(), filters],\n      queryFn: () => fetchTodos(filters),\n      // \ucd94\uac00 \uc635\uc158\ub4e4\ub3c4 \uc5ec\uae30\uc5d0 \uc124\uc815 \uac00\ub2a5\n      staleTime: 10000,\n      gcTime: 60000\n    }),\n  detail: (id: number) =>\n    queryOptions({\n      queryKey: [...todoQueries.details(), id],\n      queryFn: () => fetchTodo(id),\n      staleTime: 5000,\n    }),\n};\n\n// \ubb34\ud6a8\ud654 \uc2dc\uc5d0\ub3c4 \ud0c0\uc785 \uc548\uc804\uc131 \uc720\uc9c0\nqueryClient.invalidateQueries({\n  queryKey: todoQueries.lists(),\n});\n\n// \ud328\uce6d\uacfc \ud504\ub9ac\ud328\uce6d\uc5d0\uc11c \ub3d9\uc77c\ud55c \uc635\uc158 \uacf5\uc720 \uc608\uc2dc\nfunction TodoDetailPage({ id }: { id: number }) {\n  // \ud604\uc7ac \uc0c1\uc138 \ub370\uc774\ud130 \uc870\ud68c\n  const detailQuery = useQuery(todoQueries.detail(id));\n\n  // \uc5f0\uad00 \ub370\uc774\ud130 \ud504\ub9ac\ud328\uce6d - \ub3d9\uc77c\ud55c staleTime, \ucffc\ub9ac\ud568\uc218 \ub4f1\uc774 \uc790\ub3d9\uc73c\ub85c \uacf5\uc720\ub428\n  const prefetchNextTodo = () => {\n    queryClient.prefetchQuery(todoQueries.detail(id + 1));\n  };\n\n  return (\n    <div>\n      <h1>{detailQuery.data?.title}</h1>\n      <button onClick={prefetchNextTodo}>\ub2e4\uc74c \ud56d\ubaa9 \ubbf8\ub9ac \ub85c\ub4dc</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 \ud328\ud134\uc740 \uacc4\uce35 \uad6c\uc870 \uad6c\ucd95 \ubc0f \ucffc\ub9ac \ubb34\ud6a8\ud654\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud0a4 \uc804\uc6a9 \ud56d\ubaa9\uacfc ",(0,s.jsx)(n.code,{children:"queryOptions"})," \ud5ec\ud37c\ub85c \ub9cc\ub4e0 \uc804\uccb4 \ucffc\ub9ac \uac1d\uccb4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uacb0\ud569\ud569\ub2c8\ub2e4. \ud2b9\ud788 \ud328\uce6d\uacfc \ud504\ub9ac\ud328\uce6d \uac04\uc5d0 \ubaa8\ub4e0 \ucffc\ub9ac \uc635\uc158\uc774 \uc790\ub3d9\uc73c\ub85c \uacf5\uc720\ub418\uc5b4 \uc77c\uad00\uc131\uc744 \uc720\uc9c0\ud558\uace0 \uc911\ubcf5 \ucf54\ub4dc\ub97c \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"queryKey\uc640 queryFn\ub97c \ubd84\ub9ac\ud558\ub294 \uac83\uc740 \uc2e4\uc218\uc600\uc2b5\ub2c8\ub2e4."})}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"queryKey\ub294 queryFn\uc758 \uc758\uc874\uc131\uc744 \uc815\uc758\ud569\ub2c8\ub2e4. \uc989, queryFn \ub0b4\ubd80\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ubaa8\ub4e0 \uac83\uc740 queryKey\uc5d0 \ud3ec\ud568\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4. \uadf8\ub807\ub2e4\uba74 \uc65c queryKey\ub294 \ud55c \uacf3\uc5d0 \uc815\uc758\ud574\ub450\uace0, \uadf8\uc640 \uad00\ub828\ub41c \ud568\uc218\ub4e4\uc740 \ucee4\uc2a4\ud140 \ud6c5 \uc548\uc5d0\uc11c \uba40\ub9ac \ub5a8\uc5b4\uc9c4 \uc704\uce58\uc5d0 \ub46c\uc57c \ud560\uae4c\uc694?"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"\ud558\uc9c0\ub9cc \uc774 \ub450 \uac00\uc9c0 \ud328\ud134\uc744 \uacb0\ud569\ud558\uba74, \ud0c0\uc785 \uc548\uc804\uc131(Type-safety), \ucf54\ub4dc\uc758 \uadfc\uc811\uc131(Co-location), \uadf8\ub9ac\uace0 \ub6f0\uc5b4\ub09c \uac1c\ubc1c\uc790 \uacbd\ud5d8(DX)\uc774\ub77c\ub294 \uc138 \uac00\uc9c0 \ubaa8\ub450\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud83d\ude80"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Dominik D"})}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"5-\uacb0\ub860",children:"5. \uacb0\ub860"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"queryOptions"}),"\ub97c \uc54c\uac8c\ub41c \ub4a4\ub85c React Query\uc758 \ucffc\ub9ac \uad00\ub9ac \ubc29\uc2dd\uc758 \uc120\ud0dd\uc9c0\uac00 \ub298\uc5b4\ub0ac\uc2b5\ub2c8\ub2e4. \uc800\ub3c4 ",(0,s.jsx)(n.strong,{children:"QueryKey factory\uc5d0\uc11c Query factory\ub85c\uc758 \uc804\ud658"}),"\uc744 \uc2dc\ub3c4\ud574 \ubcfc \ucc38\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:"\ucffc\ub9ac \ud329\ud1a0\ub9ac \ud328\ud134\uc744 \uc801\uc6a9\ud558\uba74 \ud0c0\uc785 \uc548\uc804\uc131, \uc751\uc9d1\ub3c4, \uc720\uc9c0\ubcf4\uc218\uc131\uc774 \ubaa8\ub450 \ud5a5\uc0c1\ub418\ubbc0\ub85c \uc774\uc810\uc774\uc788\uc9c0\ub9cc, \ubcf5\uc7a1\ud55c \ucffc\ub9ac \ud578\ub4e4\ub9c1\uc774 \ud544\uc694\ud560 \uacbd\uc6b0\uc5d0\ub294 \uc5b4\ub5a4 \ubd88\ud3b8\ud55c DX\uc640 \uc131\ub2a5\uc0c1\uc758 \uc774\uc288\uac00 \uae30\ub2e4\ub9ac\uace0 \uc788\uc744\uc9c0\ub3c4 \uad81\uae08\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:"\ud604\uc7ac React Query\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4\uba74, Query factory \ud328\ud134\uc73c\ub85c\uc758 \uc804\ud658\uc744 \uac80\ud1a0\ud574 \ubcf4\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.admonition,{title:"\ucc38\uace0\uc790\ub8cc",type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://youtu.be/bhE3wuB_TuA?si=spuFBTq-WUscp5bE",children:"https://youtu.be/bhE3wuB_TuA?si=spuFBTq-WUscp5bE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://tanstack.com/query/latest/docs/framework/react/guides/query-options",children:"https://tanstack.com/query/latest/docs/framework/react/guides/query-options"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://tkdodo.eu/blog/the-query-options-api#queryoptions",children:"https://tkdodo.eu/blog/the-query-options-api#queryoptions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://tkdodo.eu/blog/effective-react-query-keys#use-query-key-factories",children:"https://tkdodo.eu/blog/effective-react-query-keys#use-query-key-factories"})}),"\n"]})})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);