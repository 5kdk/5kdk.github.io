<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://5kdk.github.io/blog</id>
    <title>5kdk 개발 블로그 Blog</title>
    <updated>2025-04-04T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://5kdk.github.io/blog"/>
    <subtitle>5kdk 개발 블로그 Blog</subtitle>
    <icon>https://5kdk.github.io/img/snoopy-spoon.png</icon>
    <entry>
        <title type="html"><![CDATA[Querykey factory에서 Query factory로]]></title>
        <id>https://5kdk.github.io/blog/2025/04/04/query-factory</id>
        <link href="https://5kdk.github.io/blog/2025/04/04/query-factory"/>
        <updated>2025-04-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[TanStack React Query의 쿼리들을 보다 안전하게 사용하는 방법.]]></summary>
        <content type="html"><![CDATA[<p>이 글에서는 기존 쿼리 키(queryKey)를 효율적이고 안전하게 관리하기 위해 사용하는 <strong>쿼리 키 팩토리</strong>(QueryKey factory) 패턴을 간략히 살펴보고, TanStack React Query v5에서 도입된 <code>queryOptions</code>를 활용한 <strong>쿼리 팩토리</strong>(Query factory)로 발전시키는 방법을 다룹니다.</p>
<div class="theme-admonition theme-admonition-caution admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>주의</div><div class="admonitionContent_ocWh"><p><em><strong>Query'Key' factory</strong></em> 와 <em><strong>Query factory</strong></em> 를 혼동하지 마세요!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="1-querykey-factory">1. QueryKey factory<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#1-querykey-factory" class="hash-link" aria-label="1. QueryKey factory에 대한 직접 링크" title="1. QueryKey factory에 대한 직접 링크">​</a></h2>
<p>React Query를 사용하면서 여러 쿼리를 관리하다 보면, 키 관리가 어려워 코드베이스를 한참 들여다보거나 중복 코드가 발생하는 경우가 있습니다. <em>(cursor를 괴롭히기 시작)</em></p>
<p>이런 문제를 예방하기 위해 추천되던 방법이 바로 <strong>쿼리 키 팩토리</strong> 패턴입니다. 이 패턴은 하나의 기능(feature)에서 사용하는 쿼리 키를 상수로 관리하여 일관성과 유지보수성을 향상시킵니다.</p>
<blockquote>
<p><em>쿼리 키를 수동으로 많이 선언하면 오류가 발생하기 쉬울 뿐만 아니라, 추후에 키에 더 세분화된 수준(granularity)을 추가하고 싶어질 경우 변경도 더 어렵게 만듭니다.</em><br>
<em>그래서 저는 기능(feature) 단위로 하나의 쿼리 키 팩토리(Query Key factory)를 만드는 것을 권장합니다. 이는 단순히 쿼리 키를 생성하는 항목과 함수들로 이루어진 객체일 뿐이며, 이를 커스텀 훅에서 사용할 수 있습니다.</em></p>
<p><em>Dominik D</em></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="예시-코드">예시 코드<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C" class="hash-link" aria-label="예시 코드에 대한 직접 링크" title="예시 코드에 대한 직접 링크">​</a></h3>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">typescript</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoKeys </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  all</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"todos"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">lists</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filters</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> filters </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">details</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"detail"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">detail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">details</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">detail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">removeQueries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">invalidateQueries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prefetchQueries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todoKeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">detail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="2-react-query의-옵션-객체-추상화-시-한계점">2. React Query의 옵션 객체 추상화 시 한계점<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#2-react-query%EC%9D%98-%EC%98%B5%EC%85%98-%EA%B0%9D%EC%B2%B4-%EC%B6%94%EC%83%81%ED%99%94-%EC%8B%9C-%ED%95%9C%EA%B3%84%EC%A0%90" class="hash-link" aria-label="2. React Query의 옵션 객체 추상화 시 한계점에 대한 직접 링크" title="2. React Query의 옵션 객체 추상화 시 한계점에 대한 직접 링크">​</a></h2>
<p>쿼리 키를 상수로 관리했듯이 옵션 객체를 상수로 관리하는 방법도 가능합니다. 자바스크립트에서는 아래와 같은 코드가 깔끔하게 동작합니다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">javascript</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todosQuery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todokeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fetchTodos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">staleTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todosQuery</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">prefetchQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todosQuery</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useSuspenseQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todosQuery</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useQueries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">queries</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">todosQuery</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>하지만 타입스크립트에서는 이 패턴에 한 가지 중요한 문제점이 있습니다. 타입스크립트의 구조적 타입 시스템(structural typing)으로 인해 객체로 분리된 옵션에서 오타나 잘못된 프로퍼티 사용 시 타입 에러가 발생하지 않는 문제가 있습니다.</p>
<p><a href="https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing#%EB%8D%95-%ED%83%80%EC%9D%B4%ED%95%91%EA%B3%BC-objectkeys%EC%9D%98-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84" target="_blank" rel="noopener noreferrer">타입스크립트의 구조적 타입 시스템</a></p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="예시-코드-1">예시 코드<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-1" class="hash-link" aria-label="예시 코드에 대한 직접 링크" title="예시 코드에 대한 직접 링크">​</a></h3>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">typescript</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todokeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fetchTodos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stallTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// staleTime의 오타 - type error 발생</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todosQuery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todokeys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">all</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fetchTodos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stallTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// staleTime의 오타</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todosQuery</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// type error가 발생하지 않음</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">todoDetailQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"todos"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"detail"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fooTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 오타여도 인라인이 아니면 타입 체크에서 무시됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">App</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> param </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> param</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QueryClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">todoDetailQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">param</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getQueryData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"contacts"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"detail"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// data의 추론이 제대로 안 되고 unknown -&gt; 제네릭 매개변수 필요</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="3-queryoptions의-등장">3. queryOptions의 등장<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#3-queryoptions%EC%9D%98-%EB%93%B1%EC%9E%A5" class="hash-link" aria-label="3. queryOptions의 등장에 대한 직접 링크" title="3. queryOptions의 등장에 대한 직접 링크">​</a></h2>
<p>TanStack React Query v5에서는 위 문제를 해결하기 위한 <code>queryOptions</code>가 새롭게 도입되었습니다. 런타임에서는 사실상 단순 identity 함수 역할만 하지만, 타입스크립트 레벨에서는 <code>queryClient</code>의 여러 부분들을 타입 안전하게 만들 수 있도록 도와주며, <code>queryKey</code>와 <code>queryFn</code> 등을 밀접하게 태깅해 정확한 타입 추론을 지원해 줄 수도 있습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="주요-장점">주요 장점<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#%EC%A3%BC%EC%9A%94-%EC%9E%A5%EC%A0%90" class="hash-link" aria-label="주요 장점에 대한 직접 링크" title="주요 장점에 대한 직접 링크">​</a></h3>
<ul>
<li><strong>타입 오류의 즉각적인 감지</strong>: <code>queryOptions</code>로 감싸면, <code>staleTime</code>이나 <code>select</code> 같은 옵션에 오타가 있을 때 즉시 타입 에러가 표시됩니다.</li>
<li><strong>자동 타입 추론</strong>: <code>getQueryData</code>, <code>setQueryData</code>를 사용할 때도 쿼리 함수의 반환 타입에 맞춰 자동으로 정확한 타입 추론이 이뤄집니다.</li>
<li><strong>일관된 재사용</strong>: 하나의 객체로 쿼리 키, 함수, 옵션을 묶어 React Query의 API 전반에서 일관되게 사용할 수 있습니다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="예시-코드-2">예시 코드<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-2" class="hash-link" aria-label="예시 코드에 대한 직접 링크" title="예시 코드에 대한 직접 링크">​</a></h3>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">todoDetailQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">queryOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'todos'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'detail'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staleTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">todoDetailQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getQueryData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">todoDetailQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// data가 fetchTodo(id)의 반환 타입 또는 undefined로 정확하게 추론됨</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>queryOptions</code>를 사용하면 오탈자 방지는 물론, <strong>쿼리 키가 해당 쿼리 함수와 "동일 객체"</strong> 임을 타입스크립트가 인식합니다. 이는 React Query를 사용할 때 겪는 많은 타입 관련 문제를 해결해 줍니다.</p>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="4-querykey-factory에서-query-factory로의-전환">4. QueryKey factory에서 Query factory로의 전환<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#4-querykey-factory%EC%97%90%EC%84%9C-query-factory%EB%A1%9C%EC%9D%98-%EC%A0%84%ED%99%98" class="hash-link" aria-label="4. QueryKey factory에서 Query factory로의 전환에 대한 직접 링크" title="4. QueryKey factory에서 Query factory로의 전환에 대한 직접 링크">​</a></h2>
<p>기존의 쿼리 키만 관리하는 팩토리에서 한 단계 더 발전하여, 키와 관련된 쿼리 함수, 추가 옵션을 모두 결합하여 관리하는 <strong>쿼리 팩토리(Query factory)</strong> 로 전환할 수 있습니다. 이를 통해 모든 옵션을 한곳에서 관리하며 타입 안전성과 코드의 명확성을 높일 수 있습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="query-factory-전환의-이점">Query factory 전환의 이점<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#query-factory-%EC%A0%84%ED%99%98%EC%9D%98-%EC%9D%B4%EC%A0%90" class="hash-link" aria-label="Query factory 전환의 이점에 대한 직접 링크" title="Query factory 전환의 이점에 대한 직접 링크">​</a></h3>
<ol>
<li><strong>키와 함수의 자연스러운 결합</strong>: 쿼리 키와 쿼리 함수는 본질적으로 밀접하게 연결되어 있으므로, 함께 관리하는 것이 논리적입니다.</li>
<li><strong>코드의 응집성 향상</strong>: 관련된 쿼리 로직이 한 곳에 모여 있어 코드의 가독성과 유지보수성이 향상됩니다.</li>
<li><strong>타입 안전성 보장</strong>: <code>queryOptions</code>를 통해 타입스크립트의 모든 장점을 최대한 활용할 수 있습니다.</li>
<li><strong>쿼리 로직의 재사용</strong>: 쿼리 로직을 팩토리로 캡슐화하여 애플리케이션 전체에서 일관되게 사용할 수 있습니다.</li>
<li><strong>패칭과 프리패칭 간 옵션 공유</strong>: 동일한 쿼리에 대한 일반 패칭과 프리패칭 사이에 모든 옵션을 일관되게 유지할 수 있어 코드 중복과 불일치를 방지합니다.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="예시-코드-3">예시 코드<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-3" class="hash-link" aria-label="예시 코드에 대한 직접 링크" title="예시 코드에 대한 직접 링크">​</a></h3>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoQueries </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 키 전용 항목 (키 계층 구조용)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">all</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'todos'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">lists</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'list'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">details</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'detail'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 실제 queryOptions를 사용한 쿼리 팩토리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filters</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">queryOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filters</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function-variable function" style="color:#d73a49">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchTodos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filters</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 추가 옵션들도 여기에 설정 가능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      staleTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      gcTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">detail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">queryOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">details</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function-variable function" style="color:#d73a49">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      staleTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 무효화 시에도 타입 안전성 유지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">invalidateQueries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 패칭과 프리패칭에서 동일한 옵션 공유 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TodoDetailPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 현재 상세 데이터 조회</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> detailQuery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">detail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 연관 데이터 프리패칭 - 동일한 staleTime, 쿼리함수 등이 자동으로 공유됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">prefetchNextTodo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queryClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prefetchQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoQueries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">detail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">detailQuery</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">prefetchNextTodo</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">다음 항목 미리 로드</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이 패턴은 계층 구조 구축 및 쿼리 무효화에 사용할 수 있는 키 전용 항목과 <code>queryOptions</code> 헬퍼로 만든 전체 쿼리 객체를 효과적으로 결합합니다. 특히 패칭과 프리패칭 간에 모든 쿼리 옵션이 자동으로 공유되어 일관성을 유지하고 중복 코드를 줄일 수 있습니다.</p>
<blockquote>
<p><strong><em>queryKey와 queryFn를 분리하는 것은 실수였습니다.</em></strong><br>
<em>queryKey는 queryFn의 의존성을 정의합니다. 즉, queryFn 내부에서 사용하는 모든 것은 queryKey에 포함되어야 합니다. 그렇다면 왜 queryKey는 한 곳에 정의해두고, 그와 관련된 함수들은 커스텀 훅 안에서 멀리 떨어진 위치에 둬야 할까요?</em>
<em>하지만 이 두 가지 패턴을 결합하면, 타입 안전성(Type-safety), 코드의 근접성(Co-location), 그리고 뛰어난 개발자 경험(DX)이라는 세 가지 모두를 얻을 수 있습니다. 🚀</em></p>
<p><em>Dominik D</em></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="5-결론">5. 결론<a href="https://5kdk.github.io/blog/2025/04/04/query-factory#5-%EA%B2%B0%EB%A1%A0" class="hash-link" aria-label="5. 결론에 대한 직접 링크" title="5. 결론에 대한 직접 링크">​</a></h2>
<p><code>queryOptions</code>의 등장으로 React Query의 쿼리 관리 방식이 크게 발전했습니다. 이제 <strong>QueryKey factory에서 Query factory로의 전환</strong>을 시도해 볼 참입니다. 이 패턴을 적용하면 타입 안전성, 응집도, 유지보수성이 모두 향상되므로, 현재 React Query를 사용하고 있다면 Query factory 패턴으로의 전환을 검토해 보시기 바랍니다.</p>
<br>
<div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>참고자료</div><div class="admonitionContent_ocWh"><ul>
<li><a href="https://youtu.be/bhE3wuB_TuA?si=spuFBTq-WUscp5bE" target="_blank" rel="noopener noreferrer">https://youtu.be/bhE3wuB_TuA?si=spuFBTq-WUscp5bE</a></li>
<li><a href="https://tanstack.com/query/latest/docs/framework/react/guides/query-options" target="_blank" rel="noopener noreferrer">https://tanstack.com/query/latest/docs/framework/react/guides/query-options</a></li>
<li><a href="https://tkdodo.eu/blog/the-query-options-api#queryoptions" target="_blank" rel="noopener noreferrer">https://tkdodo.eu/blog/the-query-options-api#queryoptions</a></li>
<li><a href="https://tkdodo.eu/blog/effective-react-query-keys#use-query-key-factories" target="_blank" rel="noopener noreferrer">https://tkdodo.eu/blog/effective-react-query-keys#use-query-key-factories</a></li>
</ul></div></div>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="TanStack React Query" term="TanStack React Query"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Yarn v4, Next.js 환경 세팅과 마주했던 이슈들]]></title>
        <id>https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues</id>
        <link href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues"/>
        <updated>2024-04-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[yarn berry에 입문하며 마주한 이슈들과 배운점을 정리한다.]]></summary>
        <content type="html"><![CDATA[<p>개인 Next.js 보일러 플레이트를 세팅하면서 Yarn 4 의 PnP(Plug And Play)와 Zero-install로 환경을 구성을 시도해보았다. 이번에 환경을 세팅하며 마주했던 상황들과 이슈들을 정리해본다. 편의상 Yarn PnP를 Yarn berry라 부르겠다.</p>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="yarnrcyml-이-어디에">.yarnrc.yml 이 어디에?<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#yarnrcyml-%EC%9D%B4-%EC%96%B4%EB%94%94%EC%97%90" class="hash-link" aria-label=".yarnrc.yml 이 어디에?에 대한 직접 링크" title=".yarnrc.yml 이 어디에?에 대한 직접 링크">​</a></h2>
<div class="language-yml codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">.yarnrc.yml</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-yml codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">nodeLinker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pnp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">yarnPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .yarn/releases/yarn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">3.2.1.cjs</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Yarn berry v2, v3 세팅 시 위와 같은 설정 파일이 생성됐었다. Yarn berry v4에서는 더 이상 기본으로 생성되지 않는다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="yarnpath를-설정해야-할까">yarnPath를 설정해야 할까?<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#yarnpath%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C" class="hash-link" aria-label="yarnPath를 설정해야 할까?에 대한 직접 링크" title="yarnPath를 설정해야 할까?에 대한 직접 링크">​</a></h3>
<p>글로벌 바이너리 대신 사용할 Yarn 바이너리의 경로인데, 이 바이너리는 rc 파일이 포함된 디렉터리 내에서 실행되는 모든 명령에 대해 다른 바이너리(전역 바이너리 포함) 대신 실행된다. (Node 환경에서 <code>.nvmrc</code>를 설정하듯 프로젝트에 참여한 모든 개발자가 같은 버젼을 사용하기 위한 방법)</p>
<p>Yarn에서는 v2부터 프로젝트별로 바이너리를 가리키는 <code>yarnPath</code> 설정을 사용하도록 권장했지만, 많은 사람들이 아무리 작은 바이너리를 레포지토리에 추가하는 것을 좋아 하지 않았기 때문에 Corepack 프로젝트를 진행했다고 한다.</p>
<p>Corepack은 Node 18과 20 모두와 함께 제공되므로 더 이상 <code>yarnPath</code>에 의존할 필요가 없으며, 이에 따라 패키지 관리자 필드를 업데이트하도록 <code>yarn init -2</code> 및 <code>yarn set version</code> 명령도 업데이트되었다.</p>
<p>즉 Yarn v4 이전에는 프로젝트 내에서 Yarn을 설치하는 데 <code>yarnPath</code> 설정이 선호되었지만, 이제 대부분의 경우 Corepack을 사용하는 것이 좋다고 한다.</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p>Corepack은 작업 중인 프로젝트에 따라 실행할 올바른 패키지 관리자 버전을 자동으로 선택하는 Node.js 16+와 함께 제공되는 도구입니다.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="yarn-berry의-zero-install-설정">Yarn berry의 zero-install 설정<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#yarn-berry%EC%9D%98-zero-install-%EC%84%A4%EC%A0%95" class="hash-link" aria-label="Yarn berry의 zero-install 설정에 대한 직접 링크" title="Yarn berry의 zero-install 설정에 대한 직접 링크">​</a></h3>
<p>Yarn berry에서 zero-install이 더 이상 default 옵션으로 제공하지 않는다. 대신에, global yarn cache를 참조한다.
따라서 아래와 같이 글로벌 캐시를 비활성화해야 <code>.yarn/cache</code>폴더가 생성되고 zero-install을 구성할 수 있다.</p>
<div class="language-yml codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">.yarnrc.yml</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-yml codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 글로벌 캐시 비활성화 (기본옵션 true)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">enableGlobalCache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Read More:</strong><br>
<a href="https://yarnpkg.com/blog/release/4.0" target="_blank" rel="noopener noreferrer"><em>yarn release 4.0</em></a><br>
<a href="https://yarnpkg.com/configuration/yarnrc#yarnPath" target="_blank" rel="noopener noreferrer"><em>yarnPath</em></a></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="idevscode-타입스크립트-문제">IDE(vscode) 타입스크립트 문제<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#idevscode-%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%AC%B8%EC%A0%9C" class="hash-link" aria-label="IDE(vscode) 타입스크립트 문제에 대한 직접 링크" title="IDE(vscode) 타입스크립트 문제에 대한 직접 링크">​</a></h2>
<p>Vscode의 Yarn berry 환경에서는 <code>ts</code>, <code>tsx</code>에 빨간줄이 난무하게 되는데 Vscode에서 타입스크립트와 PnP 설치모드를 사용하려면 추가 작업이 필요하다.</p>
<ul>
<li>Yarn 팀에서 유지 관리하는 <a href="https://marketplace.visualstudio.com/items?itemName=arcanis.vscode-zipfs" target="_blank" rel="noopener noreferrer">ZipFS</a> 확장을 설치</li>
<li><code>yarn dlx @yarnpkg/sdks</code></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Yarn PnP에 SDK가 필요한 이유는?</div><div class="admonitionContent_ocWh"><p>Yarn PnP는 Node.js 런타임 내에 삽입해야 하는 Node.js 로더를 생성하는 방식으로 작동합니다. 많은 IDE 확장 프로그램은 로더를 고려하지 않고 래핑하는 패키지(Prettier, TypeScript, ...)를 실행합니다.</p><p>SDK는 인디렉션 패키지를 생성하여 이를 해결합니다. 필요한 경우 이러한 인디렉션은 필요한 호출을 실제 패키지로 전달하기 전에 자동으로 로더를 설정합니다.</p></div></div>
<blockquote>
<p><strong>Read More:</strong><br>
<a href="https://yarnpkg.com/getting-started/editor-sdks" target="_blank" rel="noopener noreferrer"><em>Editor-sdks</em></a></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="yarn-berry에서-storybook-세팅하며-만난-이슈">Yarn berry에서 Storybook 세팅하며 만난 이슈<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#yarn-berry%EC%97%90%EC%84%9C-storybook-%EC%84%B8%ED%8C%85%ED%95%98%EB%A9%B0-%EB%A7%8C%EB%82%9C-%EC%9D%B4%EC%8A%88" class="hash-link" aria-label="Yarn berry에서 Storybook 세팅하며 만난 이슈에 대한 직접 링크" title="Yarn berry에서 Storybook 세팅하며 만난 이슈에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="패키지-종속성-문제">패키지 종속성 문제<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%A2%85%EC%86%8D%EC%84%B1-%EB%AC%B8%EC%A0%9C" class="hash-link" aria-label="패키지 종속성 문제에 대한 직접 링크" title="패키지 종속성 문제에 대한 직접 링크">​</a></h3>
<div class="language-bash codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-bash codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">Error: @chromatic-com/storybook tried to access @storybook/core-events, but it isn't declared </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> its dependencies</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> this makes the require call ambiguous and unsound.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Required package: @storybook/core-events </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">via </span><span class="token string" style="color:#e3116c">"@storybook</span><span class="token string entity" style="color:#36acaa">\c</span><span class="token string" style="color:#e3116c">ore-events\server-errors"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>호이스팅 전략을 고려하지 않는 패키지들은 종속성 문제를 일으킬 수 있는데, Storybook 관련 패키지들이 그러하였다.
비단 Storybook만의 문제는 아니며, Yarn berry가 까다로운 이유 중 하나인 것 같다.</p>
<p>필요한 패키지를 <code>yarn add</code> 해도 해결되지만, 패키지 중복을 피하고자 아래와 같이 확장구문을 작성해주면 된다.</p>
<div class="language-yml codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">.yarnrc.yml</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-yml codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">packageExtensions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">'@storybook/nextjs@*'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">'webpack'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">'@chromatic-com/storybook@*'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">'@storybook/client-logger'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">'@storybook/core-events'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'*'</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p>종속성의 패키지 정의를 확장하여 타사 문제를 해결하는 데 유용합니다.</p><p>일부 패키지는 종속성과 관련하여 잘못 지정되었을 수 있습니다(예: 하나의 종속성이 누락되어 Yarn이 해당 종속성에 대한 액세스를 거부하는 경우). packageExtensions 필드는 추가 정보로 기존 패키지 정의를 확장하는 방법을 제공합니다. 이 필드를 사용하는 경우 PR을 업스트림으로 전송하고 플러그인 호환 데이터베이스에 확장 기능을 기여하는 것이 좋습니다.</p><p>참고: 이 필드는 종속성을 추가하기 위해 만들어진 필드이므로 기존 종속성을 다시 작성해야 하는 경우 대신 해상도 필드를 사용하는 것이 좋습니다.</p><details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary><b>원문</b></summary><div><div class="collapsibleContent_RtnQ"><div><p>Extend the package definitions of your dependencies; useful to fix third-party issues.</p><p>Some packages may have been specified incorrectly with regard to their dependencies - for example with one dependency being missing, causing Yarn to refuse it the access. The packageExtensions fields offer a way to extend the existing package definitions with additional information. If you use it, consider sending a PR upstream and contributing your extension to the plugin-compat database.</p><p>Note: This field is made to add dependencies; if you need to rewrite existing ones, prefer the resolutions field instead.</p><blockquote>
<p><a href="https://yarnpkg.com/configuration/yarnrc#packageExtensions" target="_blank" rel="noopener noreferrer"><em>Yarn Docs</em></a></p>
</blockquote></div></div></div></details></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="storybook-빌드시-node_modules가-생긴다">storybook 빌드시 node_modules가 생긴다?<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#storybook-%EB%B9%8C%EB%93%9C%EC%8B%9C-node_modules%EA%B0%80-%EC%83%9D%EA%B8%B4%EB%8B%A4" class="hash-link" aria-label="storybook 빌드시 node_modules가 생긴다?에 대한 직접 링크" title="storybook 빌드시 node_modules가 생긴다?에 대한 직접 링크">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p><strong>스토리북을 통한 Yarn 플러그앤플레이(PnP) 지원</strong></p><p>플러그앤플레이(PnP)가 활성화된 새 버전의 Yarn에서 실행 중인 프로젝트에서 스토리북을 활성화한 경우 일부 추가 파일 및 폴더가 포함된 node_modules가 생성되는 것을 볼 수 있습니다. 이는 스토리북이 캐시 파일 및 기타 데이터를 저장하기 위해 일부 디렉터리(예: .cache)에 의존하여 성능을 개선하고 빌드 속도를 높이기 때문에 알려진 제약 조건입니다. 이러한 파일 및 폴더는 .gitignore 파일을 조정하여 사용 중인 버전 관리에서 제외하여 안전하게 무시할 수 있습니다.</p><details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary><b>원문</b></summary><div><div class="collapsibleContent_RtnQ"><div><p><strong>Yarn Plug'n'Play (PnP) support with Storybook</strong></p><p>If you've enabled Storybook in a project running on a new version of Yarn with Plug'n'Play (PnP) enabled, you may notice that it will generate node_modules with some additional files and folders. This is a known constraint as Storybook relies on some directories (e.g., .cache) to store cache files and other data to improve performance and faster builds. You can safely ignore these files and folders, adjusting your .gitignore file to exclude them from the version control you're using.</p><blockquote>
<p><a href="https://storybook.js.org/docs/get-started/install#yarn-plugnplay-pnp-support-with-storybook" target="_blank" rel="noopener noreferrer"><em>Storybook Docs</em></a></p>
</blockquote></div></div></div></details></div></div>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="github-lfs-대역폭-이슈">Github LFS 대역폭 이슈<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#github-lfs-%EB%8C%80%EC%97%AD%ED%8F%AD-%EC%9D%B4%EC%8A%88" class="hash-link" aria-label="Github LFS 대역폭 이슈에 대한 직접 링크" title="Github LFS 대역폭 이슈에 대한 직접 링크">​</a></h2>
<p>zero-install 으로 프로젝트를 구성한 후 가장 큰 문제는 GitHub의 대역폭 제한이었다. GitHub는 서비스 안정성을 위해 큰 용량의 파일을 제한하는 정책을 가지고 있는데, 이 큰 용량의 파일 기준이 50MB이다. PnP가 패키지를 압축한다 해도 50MB를 넘는 패키지가 많기 때문에 이는 상당한 제약이다. 일반적으로 이를 회피하기 위해 yarn/cache 폴더를 Git LFS를 사용하여 추적하고, 파일의 원본은 Git LFS 스토리지에 저장하여 포인터만 리포지토리에 유지한다.</p>
<p>위 과정을 마친 후 몇 가지 테스트를 진행하기위해 데스크탑과 랩탑에서 <code>git clone</code>을 시도하니 금새 대역폭 제한에 걸렸다.</p>
<p><img decoding="async" loading="lazy" alt="github 대역폭 제한" src="data:image/webp;base64,UklGRtYEAABXRUJQVlA4IMoEAAAwLwCdASqDBEYAPoFAnEmlJCMhJZ0okKAQCWdu4XdhGl43WlvQMu7f/0Z89NutXqZ9GdfUvi3SpxCShxxfrZ1NVSc1fyRFmNiBwKhEWVszsp4FQiLK2Z2U8CoRFlbM7KeBUIiytmdlPAqBEgF9FdFSOMZ+SgkQaNnKog+T5+tNBbELdn4MOBa228RA4FQiLK2Z1LLqejF0L7jsRy8beq4+kJWV+OyEMLJaQQzAN9Il6AaIsrZnZTwKhEWVszsp4FQiKi9MVZh4CUk5grL2+ahEFK5kVpoRW0GgCkoFqWYWKSbKM+07XFoXrguM5Rn2na4tC9cFxnKM+zLtzntxGQdLdh5E0z2n8J3GJeQApMdU0+606ngVCIsrZnZTwKhEWVszsp4FKnhgTmI4PJAtPQYSchQfHjZUtBtk5Cg+PGypaDbJyE4rOCjz0E/s6KUyJTwKhEWVszsp4FQiLK2Z2U8CoRFlbM7KeBUIiytmdlPAqERZWzOyngVCIsrZnZTwKhEAAAD+/9CXcL4vfR/00KAAEhAWqCPzL7Pccefz4j1BOjQ4zUCLK8p3f7f21y8GGJnBk9Pj2XKa/is4pz+ae2sub++LxX9G4oFahSF+6rpkxucVRldrZRUFPHPB3l6wNTecTjMVZE+jMYMlNr6U21GK7Dg1FU0RcbLLMS+xQlPobwut83MOgibfb2fGK0fjvT7taG67a+w5sb5fGMewWjbtbDzuk7pWwMzdb9H3OVSholKZIKBjDgLKSlO1wjsqZEd84z5TUBUsPoYuka2cN5p4EwJRpv2BpSD9NtiZ3p9khHgGPDIs4n2VS9EHMFoHTdIJGeTu31b05x2IoTWUtXIJ2RLZMAR3jrbb5RxYJStZd9iVrHJEelj/cUwcw9IwM3eRLbbM4nZYDMMSNYqncMTQWUIZNCl7X0uhI7XV4MKbaVvIGzL3KCYNBeFJjfEUN3px1qwYuobVyfWkiQxEQxH64tsMp5O45RGMQdDvekF4IfP4dpzzI2KsuPL5hmcF4Tk0lhDaREQb2oDVWYd3o85ZruwmWvGT+Cn1XdZtsPN2tpurUjA1z9igLA1vLb4HNPbmnHtSq3b3oUhFqg45lOHQ2V7GGYINnA3UCJdcmqCUNJYjxpz5CRFB+ljX9wTDaX68VvDvZNpL3PjIroG9wWgIUz9EFT4ZWG8E/l6Vnf9vDotNom9YVdzptKxXqDJdOTSLUrn7/E5AqddhwAZB2nvwZlM4SwM8ly6lUbU+jy17qTMfOMUZXJezsHgf8dzMla5E2U7EdyPx1OljBb5kcEDkHMB4xCZP/WWuy4fztruTqp5jupKhzFeQ4934+1RJLiGBQ7VEDwPspLiVG6FKAInj0JYCw3qs0MHHHshoNyHqIts/Fy6JQg0QgLEUn7ubXWnbqct94crStSq4a9TllH3sNjN+/LYB+GKoHo/qN09Vu0KA3Zs21cgjeRkCFh2xywnx9t1p2U687BRx8SbOXEDaAg0czjTwDYTU/ly0drTH/iMGQaAI7k73FRTixZTlj0gCjENXK3YIyxSm5bW4WXdyqmy8C5RaHGwAF/8NbIA50OkMelHrA+59h+yJEVdbRteIKTBgDcuZYph/x4P/M//FDBsq1kAAAAAAAA==" width="1155" height="70" class="img_praT"></p>
<p>GitHub는 1GB 스토리지의 용량과 매달(25일) 1GB 대역폭을 무료로 제공하는데, 프로젝트의 패키지 LFS는 큰 용량를 차지하고 있어 무료로 제공되는 1GB 대역폭을 모두 금방 써버리게 된다. (bitbucket도 free plan은 매달 1GB를 제공한다)</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><ul>
<li>Git LFS에 500MB 파일을 푸시하는 경우 할당된 스토리지의 500MB를 사용하고 대역폭은 사용하지 않습니다. 1바이트 변경을 수행하고 파일을 다시 푸시하는 경우 또 다른 500MB의 스토리지를 사용하고 대역폭은 사용하지 않으므로 이 두 푸시에 대한 총 사용량은 스토리지 1GB와 대역폭 0이 됩니다.</li>
<li>LFS로 추적된 500MB 파일을 다운로드하는 경우 리포지토리 소유자의 할당된 대역폭 500MB를 사용합니다. 협력자가 파일 변경을 푸시하고 새 버전을 로컬 리포지토리로 끌어오면 500MB의 대역폭을 추가로 사용하여 이 두 다운로드의 총 사용량은 1GB의 대역폭이 됩니다.</li>
<li>GitHub Actions이(가) LFS로 추적되는 500MB 파일을 다운로드하는 경우 리포지토리 소유자의 할당된 대역폭 500MB를 사용합니다.</li>
</ul><blockquote>
<p><a href="https://docs.github.com/ko/repositories/working-with-files/managing-large-files/about-storage-and-bandwidth-usage#tracking-storage-and-bandwidth-use" target="_blank" rel="noopener noreferrer"><em>GitHub Docs</em></a></p>
</blockquote></div></div>
<p>zero-install 아주 매력적인 전략이지만 우선 의존성 변경이 일어나면 내 레포지토리에 lfs로 tracking한 패키지들을 push를 하지 못하는 상황이고, 다른 디바이스에서 프로젝트를 온전히 사용할 수 없기에 PnP 모드를 사용하되 zero-install을 포기하기로 했다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="간단-yarn-pnp-nextjs-세팅-방법">간단 Yarn PnP, Next.js 세팅 방법<a href="https://5kdk.github.io/blog/2024/04/23/yarn-v4-nextjs-issues#%EA%B0%84%EB%8B%A8-yarn-pnp-nextjs-%EC%84%B8%ED%8C%85-%EB%B0%A9%EB%B2%95" class="hash-link" aria-label="간단 Yarn PnP, Next.js 세팅 방법에 대한 직접 링크" title="간단 Yarn PnP, Next.js 세팅 방법에 대한 직접 링크">​</a></h2>
<ul>
<li><code>npx create-next-app@latest</code></li>
<li><code>node_modules</code>, <code>package-lock.json</code> 삭제</li>
<li><code>corepack enable</code> 코어팩 활성화</li>
<li><code>yarn set version stable</code> Yarn v4 세팅</li>
<li><code>yarn install</code></li>
<li><code>.gitignore</code> 추가<!-- -->
<div class="language-. codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">.gitignore</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-. codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">.pnp.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.yarn/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!.yarn/patches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!.yarn/plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!.yarn/releases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!.yarn/sdks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!.yarn/versions</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Done!</li>
</ul>
<p>zero-install을 사용하고 싶다면 global cache enable 설정 및 gitignore 변경, GitLFS 설치와 .yarn/cache 폴더를 tracking 및 git lfs push 과정 추가</p>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="Yarn" term="Yarn"/>
        <category label="Next.js" term="Next.js"/>
        <category label="Storybook" term="Storybook"/>
        <category label="Github" term="Github"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[타입스크립트의 인덱스 시그니처와 Object.keys 그리고 덕 타이핑]]></title>
        <id>https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing</id>
        <link href="https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing"/>
        <updated>2024-04-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[타입스크립트 인덱스 시그니처와 Object.keys의 반환 타입과 자바스크립트 덕 타이핑 관계를 알아본다.]]></summary>
        <content type="html"><![CDATA[<p><em>Element implicitly has an 'any' type because expression of type 'string'</em><br>
<em>can't be used to index type 'data'</em><br>
<em>No index signature with a parameter of type 'string' was found on type 'Data'</em></p>
<p>객체의 키 배열을 뽑아냈지만, <code>string[]</code> 타입으로 강제되어 위와 같은 에러를 만난 적이 있을 것이다.</p>
<p>이를 이해하기 위해 타입스크립트 인덱스 시그니처와 자바스크립트 덕 타이핑 관계를 알아보자.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="인덱스-시그니처">인덱스 시그니처<a href="https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing#%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%8B%9C%EA%B7%B8%EB%8B%88%EC%B2%98" class="hash-link" aria-label="인덱스 시그니처에 대한 직접 링크" title="인덱스 시그니처에 대한 직접 링크">​</a></h2>
<p>우선 인덱스 시그니처란 객체의 키를 정의하는 방식을 의미한다.</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Hello</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hello</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Hello </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hello</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hello'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hi</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hi'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>[key: string]</code>을 시용한 부분이 바로 인덱스 시그니처다. 이는 동적인 객체를 정의할 때 유용하지만, 위의 예시와 같이 작성한다면 키의 범위가 너무 커지기 때문에 존재하지 않은 키로 접근하면 <code>undefined</code>를 반환할 수 도 있다.</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'bye'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// undefined</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>따라서 객체의 키는 동적으로 선언되는 경우를 최대한 지양해야 하고, 객체의 타입도 필요에 따라 좁혀야 한다.</p>
<p>객체의 키를 좁히는 방법은 다음 두가지다.</p>
<ol>
<li>
<p>유틸리티 타입을 활용한 예시</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Hello</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">'hello'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hi'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>타입을 사용한 인덱스 시그니처</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Hello</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hello'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hi'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><code>Record&lt;key, value&gt;</code>를 사용하면 객체의 타입에 각각 원하는 키와 값을 넣을 수 있다. 그리고 인덱스 시그니처에 타입을 사용함으로써 객체를 원하는 형태로 최대한 좁힐 수 있다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="인덱스-시그니처를-사용할-때-마주하는-이슈">인덱스 시그니처를 사용할 때 마주하는 이슈<a href="https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing#%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%8B%9C%EA%B7%B8%EB%8B%88%EC%B2%98%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EB%A7%88%EC%A3%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%8A%88" class="hash-link" aria-label="인덱스 시그니처를 사용할 때 마주하는 이슈에 대한 직접 링크" title="인덱스 시그니처를 사용할 때 마주하는 이슈에 대한 직접 링크">​</a></h2>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Element implicitly has an 'any' type because expression of type 'string'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// can't be used to index type 'hello'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// No index signature with a parameter of type 'string' was found on type 'Hello'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>hello</code> 객체의 key를 <code>Object.keys</code>로 잘 뽑아냈고, 그 키로 객체에 접근할 때 에러가 발생하는데 이러한 문제는 왜 발생할까?</p>
<p>우선 <code>Object.keys(hello)</code>가 반환하는 타입을 잘 살펴봐야한다.</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// string[]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Object.keys</code>는 <code>string[]</code>를 반환하고 있기 때문에 <code>Hello</code> 타입의 객체를 인덱스 키로 접근할 수 없기 때문이다.</p>
<p>이 문제를 해결하기 위한 방법은 다양하다.</p>
<ol>
<li>
<p><code>Obejct.keys(hello)</code>를 <code>as</code>로 타입 단언</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">keyof</span><span class="token plain"> Hello</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>타입스크립트의 <code>Object.keys</code>에 대한 반환 타입을 <code>string[]</code> 대신 개발자가 단언한 타입으로 강제하는 방법</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Object.keys를 대신할 keyOf util 함수 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">keysOf</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name keyword" style="color:#00009f">extends</span><span class="token generic-function generic class-name"> Object</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">keyof</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token builtin">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">keyof</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">keyOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>keyOf</code> 함수는 객체의 키를 가지고 오면서 동시에 가져온 배열에 대해서도 마찬가지로 타입 단언으로 처리하는 과정을 거친다.</p>
</li>
<li>
<p>가져온 key를 단언 하는 방법</p>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">keyof</span><span class="token plain"> Hello</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="objectkeys가-string으로-강제된-이유">Object.keys가 string[]으로 강제된 이유<a href="https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing#objectkeys%EA%B0%80-string%EC%9C%BC%EB%A1%9C-%EA%B0%95%EC%A0%9C%EB%90%9C-%EC%9D%B4%EC%9C%A0" class="hash-link" aria-label="Object.keys가 string[]으로 강제된 이유에 대한 직접 링크" title="Object.keys가 string[]으로 강제된 이유에 대한 직접 링크">​</a></h2>
<p>결론부터 이야기하면 이는 자바스크립트의 특징과, 이를 구현하기 위한 타입스크립트의 구조적 타이핑(덕 타이핑)의 특징 때문이다.</p>
<p>자바스크립트는 다른 언어에 비해 객체가 열려 있는 구조로 만들어져 있으므로 덕 타이핑으로 객체를 비교해야 하는 특징이 있다.</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p><strong>덕 타이핑</strong></p><p>객체의 타입이 클래스 상속, 인터페이스 구현 등으로 결정되는 것이 아닌 어떤 객체가 필요한 변수와 메서드만 지니고 있다면 그냥 해당 타입에 속하도록 인정해 주는 것을 의미한다.</p><p><a href="https://ko.wikipedia.org/wiki/%EB%8D%95_%ED%83%80%EC%9D%B4%ED%95%91" target="_blank" rel="noopener noreferrer">위키피디아 - 덕타이핑</a></p></div></div>
<p>이러한 특징 때문에 타입스크립트 인터페이스 소개란에는 다음과 같은 문장이 등장한다.</p>
<blockquote>
<p>One of TypeScript's core principles is that type checking focuses on the shape that values have. This is sometimes called “duck typing” or “structural typing”.<br>
<!-- -->타입스크립트의 핵심 원칙 중 하나는 타입 검사가 값의 모양에 초점을 맞춘다는 것입니다. 이를 "덕 타이핑" 또는 "구조적 타이핑"이라고 부르기도 합니다.</p>
<p><a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" target="_blank" rel="noopener noreferrer">https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html</a></p>
</blockquote>
<p>타입스크립트의 핵심 원칙은 타입 체크를 할 때 그 값이 가진 형태에 집중한다는 것이다. 이러한 것은 덕 타이핑 또는 구조적 타이핑이라고 한다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="덕-타이핑과-objectkeys의-상관관계">덕 타이핑과 Object.keys의 상관관계<a href="https://5kdk.github.io/blog/2024/04/04/index-signatures-and-duck-typing#%EB%8D%95-%ED%83%80%EC%9D%B4%ED%95%91%EA%B3%BC-objectkeys%EC%9D%98-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84" class="hash-link" aria-label="덕 타이핑과 Object.keys의 상관관계에 대한 직접 링크" title="덕 타이핑과 Object.keys의 상관관계에 대한 직접 링크">​</a></h2>
<div class="language-ts codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-ts codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Car</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Truck</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Car </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> power</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">horn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">car</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Car</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">car</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">이 경적을 울립니다.</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> truck</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Truck </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'트럭'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  power</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">horn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">truck</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Car에 필요한 속성은 모두 가지고 있기 때문에 Car처럼 name을 가지고 있으므로 정상 동작한다.</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이처럼 자바스크립트는 객체의 타입에 구애받지 않으며 타입에 열려 있으므로 타입스크립트도 이러한 자바스크립트의 특징을 맞춰주어야 한다.</p>
<p>즉, 타입스크립트는 이렇게 모든 키가 들어올 가능성이 열려 있는 객체의 키에 포괄적으로 대응하기 위해 <code>string[]</code>으로 타입을 제공하는 것이다.</p>
<br>
<blockquote>
<p><strong>참고 자료:</strong></p>
<ul>
<li><a href="https://ko.wikipedia.org/wiki/%EB%8D%95_%ED%83%80%EC%9D%B4%ED%95%91" target="_blank" rel="noopener noreferrer">위키피디아</a></li>
<li><a href="https://www.yes24.com/Product/Goods/123161563" target="_blank" rel="noopener noreferrer">모던 리액트 딥다이브</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" target="_blank" rel="noopener noreferrer">타입스크립트 공식문서</a></li>
</ul>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="TypeScript" term="TypeScript"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[알아두면 유용한 11가지 유틸리티 타입]]></title>
        <id>https://5kdk.github.io/blog/2024/03/02/utility-type</id>
        <link href="https://5kdk.github.io/blog/2024/03/02/utility-type"/>
        <updated>2024-03-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[알아두면 유용한 11가지 유틸리티 타입을 이해하고 활용해보자.]]></summary>
        <content type="html"><![CDATA[<p>프론트엔드라면 주로 사용하는 프로그래밍 언어 중 하나인 타입스크립트의 특히 '유틸리티 타입'이라는 매우 유용한 기능을 알아보려고 한다.</p>
<p>타입스크립트는 자바스크립트의 슈퍼셋으로, 자바스크립트에 정적 타입 기능을 추가한 언어다. 이를 통해 코드의 안정성을 높이고 버그를 줄일 수 있게 되는데, 이러한 타입스크립트의 장점 중 하나가 바로 '유틸리티 타입'이다.</p>
<p>그렇다면 '유틸리티 타입'이란 무엇일까? 유틸리티 타입은 기존 타입을 변환하여 새로운 타입을 생성하는 타입스크립트의 기능이다.</p>
<p>기존 타입을 더욱 강력하고 유연하게 사용할 수 있도록 도와준다. 예를 들어 자바스크립트에서는 배열을 다루는데 있어서 <code>for</code>, <code>while</code>문이면 충분할 것 같지만, 실제로 개발을 진행하다 보면 <code>forEach</code>, <code>map</code>, <code>find</code>, <code>filter</code>와 같은 루프 메서드가 필요하게 된다.</p>
<p>이처럼 유틸리티 타입은 복잡한 타입을 쉽게 만들거나, 타입의 일부를 변경하거나, 제한하는 등 다양한 용도로 사용할 수 있다.</p>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="11가지-유틸리티-타입">11가지 유틸리티 타입<a href="https://5kdk.github.io/blog/2024/03/02/utility-type#11%EA%B0%80%EC%A7%80-%EC%9C%A0%ED%8B%B8%EB%A6%AC%ED%8B%B0-%ED%83%80%EC%9E%85" class="hash-link" aria-label="11가지 유틸리티 타입에 대한 직접 링크" title="11가지 유틸리티 타입에 대한 직접 링크">​</a></h2>
<p>그럼 몇가지 유틸리티 타입을 살펴보자</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="1-partialt">1. <code>Partial&lt;T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#1-partialt" class="hash-link" aria-label="1-partialt에 대한 직접 링크" title="1-partialt에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 모든 속성을 선택적으로 만든다. 객체의 일부만 업데이트하고 싶을 때 유용하게 사용할 수 있다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Todo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fieldsToUpdate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">fieldsToUpdate </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todo1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'organize desk'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'clear clutter'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todo2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todo1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'throw out trash'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// { title: 'organize desk', description: 'throw out trash' }</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="2-readonlyt">2. <code>Readonly&lt;T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#2-readonlyt" class="hash-link" aria-label="2-readonlyt에 대한 직접 링크" title="2-readonlyt에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 모든 속성을 읽기 전용으로 만든다. 객체의 속성을 변경하지 못하도록 하고 싶을 때 사용한다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Readonly</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Delete inactive users'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">todo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Hello'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Error: cannot reassign a readonly property</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="3-pickt-k">3. <code>Pick&lt;T, K&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#3-pickt-k" class="hash-link" aria-label="3-pickt-k에 대한 직접 링크" title="3-pickt-k에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 특정 타입에서 몇 개의 속성만 선택할 수 있게 한다. 즉, 타입 <code>T</code>의 하위 집합을 만드는 데 사용된다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  completed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">TodoPreview</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Pick</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'title'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'completed'</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">TodoPreview</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Clean room'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  completed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="4-omitt-k">4. <code>Omit&lt;T, K&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#4-omitt-k" class="hash-link" aria-label="4-omitt-k에 대한 직접 링크" title="4-omitt-k에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 특정 타입에서 원하는 속성을 제외할 수 있게 한다. 즉, 타입 <code>T</code>에서 일부 속성을 제외한 타입을 만드는 데 사용된다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  completed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">TodoInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Omit</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'completed'</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoInfo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">TodoInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Pick up kids'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Kindergarten at 4pm'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="5-recordk-t">5. <code>Record&lt;K, T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#5-recordk-t" class="hash-link" aria-label="5-recordk-t에 대한 직접 링크" title="5-recordk-t에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 <code>K</code>를 속성 이름, <code>T</code>를 속성 값의 타입으로 하는 객체를 만들어 준다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">PageInfo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Page</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'home'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'about'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'contact'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nav</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Page</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">PageInfo</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  home</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Home'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  about</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'About'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Contact'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="6-requiredt">6. <code>Required&lt;T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#6-requiredt" class="hash-link" aria-label="6-requiredt에 대한 직접 링크" title="6-requiredt에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 모든 속성을 필수로 만든다. 선택적 속성이 없어져야 할 때 사용한다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Props</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  b</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> obj</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> obj2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Required</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Props</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Error: property 'b' missing</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="7-excludet-u">7. <code>Exclude&lt;T, U&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#7-excludet-u" class="hash-link" aria-label="7-excludet-u에 대한 직접 링크" title="7-excludet-u에 대한 직접 링크">​</a></h3>
<p>이 유틸리티는 타입은 <code>T</code>에서 <code>U</code>에 할당 할 수 있는 것들을 제외한다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'b'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'c'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'a'</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// "b" | "c"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'b'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'c'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'b'</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// "c"</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="8-extractt-u">8. <code>Extract&lt;T, U&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#8-extractt-u" class="hash-link" aria-label="8-extractt-u에 대한 직접 링크" title="8-extractt-u에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 <code>T</code>에서 <code>U</code>에 할당 할 수 있는 것들을 추출한다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Extract</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'b'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'c'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'f'</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// "a"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Extract</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// () =&gt; void</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="9-nonnullablet">9. <code>NonNullable&lt;T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#9-nonnullablet" class="hash-link" aria-label="9-nonnullablet에 대한 직접 링크" title="9-nonnullablet에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 <code>T</code>에서 <code>null</code>과 <code>undefined</code>를 제외한다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">NonNullable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">undefined</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string | number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">NonNullable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">undefined</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string[]</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="10-returntypet">10. <code>ReturnType&lt;T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#10-returntypet" class="hash-link" aria-label="10-returntypet에 대한 직접 링크" title="10-returntypet에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 함수 <code>T</code>의 반환 타입을 가져온다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// void</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="11-awaitedt">11. <code>Awaited&lt;T&gt;</code><a href="https://5kdk.github.io/blog/2024/03/02/utility-type#11-awaitedt" class="hash-link" aria-label="11-awaitedt에 대한 직접 링크" title="11-awaitedt에 대한 직접 링크">​</a></h3>
<p>이 유틸리티 타입은 비교적 최근에 추가된 유틸리티 타입으로 (v 4.5에서 추가) <code>Promise</code>에서 반환된 타입을 가져온다.</p>
<div class="language-tsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-tsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Awaited</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">T1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Awaited</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// () =&gt; void</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<blockquote>
<p><strong>참고 자료 :</strong></p>
<ul>
<li><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank" rel="noopener noreferrer">타입스크립트 공식문서</a></li>
</ul>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="TypeScript" term="TypeScript"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[12가지 최신 CSS 한 줄 업그레이드]]></title>
        <id>https://5kdk.github.io/blog/2024/02/11/12-modern-css.md</id>
        <link href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md"/>
        <updated>2024-02-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[스타일도 레거시가 있다. 이제 12가지 최신 CSS 기술들을 살펴보자.]]></summary>
        <content type="html"><![CDATA[<p>프로젝트 대부분을 sass를 사용하면서, 프로젝트 멤버가 바뀌거나 다른 개발자의 스타일을 수정하며 사뭇 두려워질 때면 style도 js,ts 코드와 마찬가지로 개선해 나가는 게 중요하다고 느끼게 된다.</p>
<p>style도 레거시가 될 수 있는데 이에 도움될뿐 아니라 심지어 스크립트를 제거하여 손쉽게 사용자 경험의 성과를 보여줄 수 있는 최신 css의 12가지 속성에 대해 알아보자.</p>
<p>참고한 아티클의 저자는 속성들을 3가지로 나누었다.</p>
<blockquote>
<ul>
<li><strong>안정적인 업그레이드</strong>: 오래된 기술을 대체하여 해킹(꼼수)이나 문제를 해결한다.</li>
<li><strong>안정적인 개선</strong>: 잘 지원되는 최신 속성으로 향상된 경험을 제공한다.</li>
<li><strong>점진적인 개선</strong>: 지원되지 않는 브라우저에서 피해를 주지 않고 해당 속성이 지원되는 경우 업그레이드된 환경을 제공한다.</li>
</ul>
<p><em>Stephanie Eckles</em></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="안정적인-업그레이드-stable-upgrade">안정적인 업그레이드 (Stable Upgrade)<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C-stable-upgrade" class="hash-link" aria-label="안정적인 업그레이드 (Stable Upgrade)에 대한 직접 링크" title="안정적인 업그레이드 (Stable Upgrade)에 대한 직접 링크">​</a></h2>
<p>다음과 같이 잘 지원되는 속성은 오래된 기술을 대체하여 해킹이나 오랜 문제를 해결하는 데 도움이 될 수 있다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="aspect-ratio">aspect-ratio<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#aspect-ratio" class="hash-link" aria-label="aspect-ratio에 대한 직접 링크" title="aspect-ratio에 대한 직접 링크">​</a></h3>
<p><code>aspect-ratio</code> 속성은 브라우저에서 안정적이며 화면 비율을 정의하는 데 필요한 유일한 속성이다.</p>
<blockquote>
<p>동영상 임베드에 16:9와 같은 화면 비율을 강제로 적용하기 위해 'padding hack'을 사용한 적이 있나요?</p>
</blockquote>
<p>동영상의 경우 대부분, <code>aspect-ratio: 16/9</code>만 사용하면 되며, 정사각형의 경우, 암시적인 두 번째 값도 1이므로 <code>aspect-ratio: 1</code>만 필요하다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector class" style="color:#00009f">.aspect-ratio-hd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">aspect-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">/</span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector class" style="color:#00009f">.aspect-ratio-square</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">aspect-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img1" src="data:image/webp;base64,UklGRlYZAABXRUJQVlA4IEoZAABQ0wCdASqABagBPoFAnEslI6KhoDkocKAQCWlu/HyZ5evnj67+BsaBql+H/Qeqb+3/4bpo/2X91vdl/Rv+L6gP1h9UD/iftd7hf+N6gH/q6gn/8+oB///Pd9jj++/6z9mfgP/z3+p////17f/pl+hv8X9DPdD9u/JL88u7U82+5HrBfHnlG6Y/UT+S+w38R+0n6/+Sfxf/qey3+q/qXif73f5D1AvyH+T/1z+h/sXxi+c/4L/neoF99fXv934AP5/+Z39j/////+gPsN7AH8R/jn6N/9z3n74T7j6gX8W/nfqgfuf/6/yn8e9Pv0X/3PcI/vf84/Xf/r+9l6uPR2/dsE45cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5WIUZ85jiY61FdI/l03pSPxEj7ON0dYbg6JNusCzemqEXiGLs6heKrGg92XLly5cuXLly5cuXLly5cuXLly5cuXLly5crDNS1pXj3ecz3iedfFxFH2ErMXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5crKPH7Ey/FVjJsOduHfrpBfiqxoPdly5cuXLly5cuXLly5cuXLly5cuXLly5crKyDmToEw/mIuAWob8BL6CI8JALeJL1KdhpYfdly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuE6iYv+LRaetm5Mqc8VhgGcl9B7R5QapdjYdVIhCCniM5YzfEaArF05UnL0ilFgKSx7sLxGAxQjhM6vLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuE5G2PphUlMNmkExUZ1pKrhjtx97J6qK6hKack6rAeC391Clza3jveQaSD3ZcuXLly5cuXLly5cuXLly5cuXLly5cuXLly5crHsbSKqmAzlwlW8uY1PFY0Huy5cuXLly5cuXLly5cuXLly5cuXLly5cuXLlwlJnJQFwx0bOsJQZfck+uGOkF+KrGg92XLly5cuXLly5cuXLly5cuXLly5cuXCSoBa82s+A05rZAlozaz4DTmtkCWjNrPABJnxVY0Huy5cuXLly5cuXLly5cuXLly5cuXLly5cuXLlzMWFPywO9cXTnFY0Huy5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly4Ry7j3nn2WQavgvKUWuF5K2zHb0ryJ9iq20U3qcYmQnWwJvIn2Ki47thThjpBfiqxoPdly5cuXLly5cuXLly5cuXLly5cuXLlysWZbRqNRqNRl7allr9cMdIL8VWNB7suXLly5cuXLly5cuXLly5cuXLly5cuEQB/wX4qsZOnKjsFqQX4qsaD3ZcuXLly5cuXLly5cuXLly5cuXLly5cuXCScxorGg9zJrs2kYsuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly4SiNVcY6QX4nFUolHWpIPdly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLlysWqfBHuy5crIwP3twoFWNB7suXLly5cuXLly5cuXLly5cuXLly5cuXLly5cIgVhxl5J/kXzAuP9wxeSSIGyGpwz0jig5ijHNVXaOP4qQRW1V4hRp47XSjgqAaD3ZcuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuViThQnLxugyxEslLC7QJX4aET3xLE7QHffXwJR1SIIEqboxZ62OAupfL+QMowZsD9cVv2yFHWQS6zAL14ymsphUDO44nqeKxoPdly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLhOZQR933XP54Ks5djDE2VmVDcMdIL8VWNB7suXLly5cuXLly5cuXLly5cuXLly5cuEojVXGOkF+JxVKJR1qSD3ZcuXLly5cuXLly5cuXLly5cuXLly5cuXLly5crFqnwR7suXKyMD97cKBVjQe7Lly5cuXLly5cuXLly5cuXLly5cuXLly5cuXCIFX8kg92XCKOCoBoPdly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5WJOUSkF+KqrTlR2C1IL8VWNB7suXLly5cuXLly5cuXLly5cuXLly5cuXLhOZOpBpaZ3jR2v2i1qf1XVwkoNhYfhMwcdwC86/UOkF+KrGg92XLly5cuXLly5cuXLly5cuXLly5cuXLlzM3yZp0m8OBvSIAuGOkF+KrGg92XLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLly5cuXLhAAAP7/6NAAAAE9nGP58CDWn1nRIW7v2sBJSUH/ummcQbgPnH4vzYoz8rHKPukOcNDi08mGo+cL2k3DUf5DZI16ogDMdd0HxgGqXFF6j/Hvb2bQYkScd51kwH5OiIGTXwgNdUNnFYCQmeMAHpu3L7TlsPhYE+3+roSDwOtUDRa/fd8abRxKjzWYVOb+iwBVG00fTSFfkztDDo+nY0yw0BzqprPBibLjlxAqmNRYdftMQvtLCsEZUrVjYASdjlH3SHOGhxaeTDUfOF7ScBrchu8kG1FyAtBufOioAEnY5R90hzhocWnkwsGr933bVEIWaAcIX1RHwimcnkwBJ2OUfdIcsVib3cnJbpyXJpp1bh8zgxNlxy4gVTGosOp4APKu2AdNJ9aZeT15+Cj7pDnDQ4tPJhqPnC9pOLXdB69OLvdii+ZMQL64rGwAk7HKPukOcNDi08mGo+cL2k3DUf5DO2x0OSAtBufOioAEnY5R90hzhocWnkxKdVkSJkCwtVSQoSQzHaETGe1I6aA5CqCENrIXto4/F+bGhmUfsOlSYgAbz9rS00Ans8dRX3kPrpGQK9P5zeWxeNXgs3rYKaYgQPhX4AIEO7dUAAAAADCbXOgEjhy/h0masKaj1ucBYr8ZLw7rmad+98s8EL+KoViwsXP4qP1mw0YdOgATK0j4IwA/tIwKLh9GAhVySw41UQ+RYV8fL8VnDI5SKONXfjPbshZbytGg9c9LzaWywSg/gfHVXjvWMbOSUiEzk2XmZ42XzxalCuQg029iUAASwbogg7tjDYg93dqxB0D014Kv3ZHVZRXtFwwV9+qN09AQN+gMuj/UWnc4ksWjcQ30KtNu37/IeOdL/ZLOdFQ/ufoAWjgax0c7IePDp/yC33k3ko59Zog4Yxv5I8AzsoluDlkpZFYUuBNJROSD9WMSHOkjIZxQ0h/3dvwnzSEb65DOHvxWxORBg820Q+mhPi8jauZMNQnnmjEjUll1Cj/Ti655O+gaq1U7X49KVPEGek84e6GXUyUc6cGAEFQeu4lGhEcDyP+KTHGfvT5KhShuWibqbc+vo0x1fwAAYHZE3iT79nZIRzXM3J+yVlvhR7mxYsBztPwkixtjGOMP2StUWmG+dGxyPIe2pptQOzC22hwVGU7Lrf5DL0Zia1zZAj2q5buXP9Pd1qXJB/u5WX1FpXJ+sN6NuG2ceCnDEdyhsmZvcuELnyYsCn03cna9PrPoSa7OUOj5bShJOJW/q9eJCQgc52nDlIXBqL4qZ0KSMSlyZL+GpzQPgRgKDahCTdvF+LJoBeVuHc4/9bquAv9YoJ1/Oh/9b+V2r/b0e6ayW/GwdZSalpruIIkVkpBxtpSoeuNcYAHDDMohjXgmIZk8DT/t9gHUgw1f5kKXrC2otMcgHpLtz5VVaxdOfBol3C5IdzNmf2Qt4/TA8ABB+A5nQ0WchPe5mUe+T1kj/OMkrLnmxspvQlQTKaVZtxQ1m84DUm6SYhpOvX0WWTVJds62+u4BRUIhitTucyhm53HMAhsFt0v5/VDTtaRv1EupKI0Q59nBIVIY3904Gsjz5Du2kxxc0+HUKWYECHXVsUEpo8+laSgs9/j7LHlK78RKfQ8+i9gLQ8RE/wYMVCvbPaXbN68Vr8txFnt/cgAv731TUWyvWgEOQAcxAtTjNfxs5LAaArq8C3d92djNTT6Rgfe5PjQrpDa655AdiHkgAMIRSIPQqWlcFrkF9sGJb1Mhj+OaKPASb7lW2FeHBXSoWyv3zfevOf1gqAgRvu0j1ebBmJZLsCVMIXL7uTVCKRhtiFkFDP5jaTdXV+JS4c8j3na+u7AlGOqgo0vJ6TibGWVeBBE37pPejWMSBB84migEzRbkZf1iYx143X7OCApRRRBpGSKB/zDz1lY0c3ylztEawKOVApd5fJZC7QsF6hG6GDjnOeaXCHmZ2MhbBc9CEEVw3RPWkN8FW4StsztDs9rbJ+v5sjvt1bm/wcOOb48bjEYOfPp50C6czpeGrJL8/zDQ/VCie1lCfLbwM6IaCbY2AyN8gYaF35BLGmGQ4aSeKkVA6RkTiZcdmSGa8UXGXfIPafr2UarWSaKUjtuIJ27zu2GWpW/GxtxS1rhz7cXn1Y30R8HC30cDFWUAAKqNHf5AUNKo6Sqen9sIVy/cca4QgR7vQoIUqOxoYoh05PXpNJ9HOKGT5P/MJmYM0KSUFjr46qmDqLZRuB92kv3aUbs5HW1fS0IAf2EjBuxYXVKusrudOA0tdLyE6SZgU+FY8uM+UlP0xwOig7cHwqd0GDPsKAbzIFIYcu4GEIMM1EsBB6cN3YABsAya4i6pwTnEHf5cmVo6mZ6xuIrx4+E2bA2U3iHJMYXEwVfEq6BCv9jkfE+k8ytTLlpGDBy/E5zL4BqA5GC1I46mivIJqtV3uq7TNA348V9nBmp4Dx6wxnmMhA3Tq+vZJmM8rG0hRsk3RJ6ejsJp/8LisLBJSC0iMiFTL1nVPLXUDgQGPKxtIUaXw5Wmj8IHDQ4ECGFYAA+7VXe6rtM0DfjxYs/bz1Rc+KS6zVxK/cEKj8/hkeLo1RSy/CPrcElLAjzIzWRAed96PTc0e1rt22o5BMjBakcdTRXkE1Wq73Vdpmgb8eK+zgzU8B49YYfceI19X2O9ZGxKSVHRlGztE1QGCehXORGLr+F8s3PM1o+5/ubauKVMk6fZvXU3z2rJTINv7/hA4aHAgQwrAAH3aq73Vdpmgb8eLFn7eeqLnxSXWauJX7ghUfn8MjxdGqKWX4R9bgkpYEeZGayIDzvvR6bmj2tdu21HIJgAB/Rua65zPrx1Ti+y3rrhFDyXKu2BPcVEJaPvgAFiwty/95atHXFut+5g+WanfU89QOGIpvm+G5Ya7izxQxJUSK0CdrfQAAAAAAACtXbyTxHkhcfiU+hK7xlStaII7xkMK+rPTwf2BsMsP1V6WpTrXEAwpVquDhgg2uFvZCbPf27EmOXQk6ZbvCdLNvZW/JyVXCc0D38LFCYR/0wl6cSDF7UlOIonXNY7uHhNZFsb2ryPpBk7A2DF/1xQMeRfdfcL5rsN3QRxInHajiQYvak1ZtSRWh/WIWQJyEITf6VUyGskRNQkQJtwOas6lyNvpxVaTVm1JFaH9YhZAnHoE6+VaQGrA5jhlZsnNWdS5G304qtJqzakitDpP76UgHF58oSARl6nRAHHO0DHkX3ZCi/v4DKpLiHc22g448IRlHlcDfSDJ2BsGL/rigY8i+6+40VmYhlzmfoSz/XtjrRjIqNgfJwh9KsH56mUyNyYUqFdRQ/FVfhLhwoHFQ/+sQZtSRWh/WIWQJx6GpfLZ14n7qGlx8EG1wt7ITZ7+3Ykxy6EnTLfFhrjnUToKfRdUuiIlQLju9pGTjv25abl7scyFsBxgQKLrdcuBlhTI1ERKnyg0Kmw4ZUE8+EIfzV6ayc7iXNs+qvapOhFCXEAEfVqeIUA/FyihyaKBmEm/eSs6JfigEW8f165srcXMCAYGZSQnSm4r75MDYmNGRfvAKAjT6QVh3xnYzU0+kX6PowQrFCaGwACx4/4fHJEs6O+2wErIFBxBhJv3krZzUMlwihC7RPJrTdzKSE6U3FffJgbExoyL94BQEafSCsO+M7GamoxUdYj0Az/AAE406mwQQq0sqRy81kQEtW+IfFlcMLShmHSJJrTdzKSE6U3FffJgbExoyL94BQcl9qmHzvI0ABRnnz9atrPzrZwa9phAj2X8XrPDWd7ggvcILlNxXYOmOrxfO8YGcy3L/3lNxX3yi+A9Fv+yPpIAKVXsnkDcJGuT+bRN8f3HdNTdh0zwBSS3hCWfBBdEoNAQDNhQgLegCWaFlgFecJoiKv6JhL7N7Kod1ABMyPmrPxdkTI5PfUkQwcCG/Jq5Ut3yAdEp+zufvuy5BSorYz8tOn5JmsMv/Eupdd/XEFv8bsDek6Ubyp14ffu8cl19pSfE84NikcAKav9lkZBBag1rCbcJ7qP6V5UbRncthbnD6XDSc24e+3O11jxUigUMBY8tnTMRxemsFAO0bTWh3dxtpoDoKxnOpu1OGZoZryDiha6brpMLPOliG298J1jEolH0rZ6ERowRwB7sx/goK++ej4ddMO2HNh/mvzCYhcdv1ewfOCeJNmovj/P5iwM2ApDRAMU4qzM1wwummi4imh6+Fx//d3HhePi4wdYJyoy50e2Jlw+hiD592s9yS46knuxAE7uXFJyfLLa1BK0Sw4GXSRlgqqTjxDbETwYf0GxGad3sGMSBhB1y9zXfw597LngX+J7MDxE8hdJufaU1C6Or954Zksr4NzC1xeaRBpQklh9N5W6rweadHPU2+/tMneAU5qX9za+iwawEDoDD+O6uU6tmtAiA2YNMpdxA6LKMYSlmyYBBmx6Sr7ClGAARi+mWQbzM3MpITpTcV98mBsTGjIv3gFARp9IKw74zsZqafSL9H0YIVihNDYABY8f8PjkiWdHfbYCVkChChbi2y2u6XvZfW2Np6TmXihm+Lkp4DvJPCJ76F/p1Hk8kuWFD3ZvJLrvHV8yBew7gLtNuHsO7PQC6hfBbJwU6R//GlsnSKQjrTYjjUtm9Xte5Zs/hcTCh1bXYrSp6s0a+zinxdIAQvnl/DRgBGSARkax72/Wb4RiwpsZ/XFw0LVjWKtU12o9CGPCFEeC+xxHiBubeDSknV+inN39URf8RbdS2EPp8G95/XHGqGSwqtGLChV8fGEyxxRpnmTBkPQhqUbBtMGiGX8EBeqAiQdQA7t31hKlO9tS5p86kUoWBBll8Mywa7x7p+Tw6xuJnkPHiAAFpmYIE0ZYqETYsC3ZlMcWU8VySt77Z8i4BirIRMzBz2+pCGpt9vpAmKz8/3XINx/ul0nvVw5Sb6rRouWoMOC9+zuOECAv26UogLIwven57BB/LJBZkbz+EkK82g0mpfw6LYnSn0FIGJ1ArRTpwfB4wkKfFep15NhLLA9Dvc9psrHsQJTQDZB6y8dgIXxR3yqolhLflnt4txvOvSO8prlpeHoDiYUZlMkXfKoJlqZh+ja1AXyw2h/7JgU1738xPjDutAjGyFkTRGpNTlpxII2gosOQSJfylzXEXoyswXRby4YszsFntWJYIpba4G9ShXlnvRaxxz7qoMyVt0e9AzHcxgCZT/F9o4U3Bgsi/U1dHXg4OVucYMj0hi4Bs902ON5nur8yhur6zUJGp71BMscFAiH9SFhvH+qG/66XldiW1B49+nTkB2BmGrAVmRXK4D4Ng7ePZ001oLlufE0s8SfQ5yexkgdwnPh8i3IoyFTs0uleH4JnbCy5J6X/HWyp4+ivoSwBcLhNabuZSQnSm4r75MDYmNGRfvAKAjT6QVh3xnYzU1GKjrEegGf4AAnGnU2CCFWllSOXmsiAl/A5RnoLi9VNma7XEngiEEBBzo1hUiQU7ENraeZ2S+aARZRxBmiTbEqdjgynZ0h7o/DCUx1wAAyN0hyku+AG8d006dfeXDxPIm6IibTGF4FWcv6LMcew+zsRq1D6reTPz4Wgn8SF68Ch41k5kIoAI755/nZa368+frVtZ+dbODp7XcSmouN4QlnwQXRKDQEAzYUIC3oAlmhZYBXnCaIir+iYS+zeyqHdQATMj5qz8XZEyOT31JEMHAhvyauVLd0w9SphhTE72tu4NuuLbP1ktTSGYcukSLmpKGVxDQqbDkgUo+WyebrlXiQACM47pp06+8t45kTI5PfUkQwcCG/LGCd2UylCEkWofVbyZ+fC0E/iQvLQqe+dhbFlAQxuUgJLF3FHxRU4dMWAZHbZgAB3aqHi4aYNmgMgBN6ospE+3nqi58Ul1mrtMFaoQvEl66S3h02LDaA8f/di0zzgBEbQYkd4qZJ0+w5Eilb0oZgqjBXc2uaS2W644IyrfxtHL5dMiSiHzrJgPydN0I2StdQOA/qtNDlVN1E3RJ6emdYia3m0iYdhIHnsg7YDirYWdPsBzXXOaMjb06HhA4aHAgRbAAD8XXsy6jyyJMvWdVSq+P++27KQUMcVTY0CTIo/R1BVRnkzafQ2K35n0tF5hAQO4q/9dBmu+AbPAAH+FWnnqA279fiT09VY5HxPpRTV5eDiyZuFVJsDzvvSLtJlN80ZGHnZT4SINLB+1ub4zzoXdL2sDUN3MHyzRNrmktluv2At/TSfve9S3QAAPxdezLqPLIky9Z1VKr4/77bspBQxxiyc/LGq0IkprRJ5io1zc+MWG3tg11mCLlpx3eYz5ilGKgAD/CrTz1Abd+vxJ6eqscj4n0opq8vBxZM3CqjQ7RJNabuZSQnSm4r75PVA8770i7SZTfNWkLHRtGbFFR/2yQMRuhQvmgWWAw5szAoAAAAAAAAAAAAAAAA=" width="1408" height="424" class="img_praT"></p>
<p>참고로 해당 속성을 적용하면 콘텐츠가 우선순위를 가질 수 있다. 즉, 콘텐츠로 인해 요소가 적어도 한 차원 에서 비율을 초과하는 경우에도 콘텐츠에 맞게 요소가 커지거나 모양이 변경된다. 이 동작을 방지하거나 제어하려면 <code>max-width</code>와 같은 추가 속성을 추가하여 flex 또는 grid 컨테이너 밖으로 확장되지 않도록 할 수 있다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* Applied to the flexbox children which have a size constraint from their parent */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector class" style="color:#00009f">.aspect-ratio-square</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">aspect-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img2" src="https://5kdk.github.io/assets/images/2-8bca769610cf96136ae5995599109a6e.webp" width="1406" height="694" class="img_praT"></p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="object-fit">object-fit<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#object-fit" class="hash-link" aria-label="object-fit에 대한 직접 링크" title="object-fit에 대한 직접 링크">​</a></h3>
<p><code>object-fit</code>을 사용하면 img 또는 기타 replaced element가 해당 콘텐츠의 컨테이너 역할을 하고 해당 콘텐츠가 <code>background-size</code>와 유사한 크기 조정 동작을 적용하게 된다.</p>
<p><code>object-fit</code>에 가장 많이 사용하는 값은 다음과 같다.</p>
<ul>
<li><strong>cover</strong> : 이미지가 요소를 덮도록 크기가 조정되고 콘텐츠가 왜곡되지 않도록 <code>aspect-ratio</code>가 유지된다.</li>
<li><strong>scale-down</strong> : 이미지가 잘리지 않고 완전히 보이도록 요소 내에서 필요한 경우 이미지 크기를 조정하고 <code>aspect-ratio</code>를 유지하므로 요소의 렌더링 <code>aspect-ratio</code>가 다른 경우 이미지 주변에 여분의 공간이 생길 수 있다.</li>
</ul>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector class" style="color:#00009f">.image</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">object-fit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">aspect-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* Optional: constrain image size */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">max-block-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">250</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img3" src="https://5kdk.github.io/assets/images/3-87f91e85744a159f00a075ae74a37f68.webp" width="1406" height="558" class="img_praT"></p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="margin-inline">margin-inline<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#margin-inline" class="hash-link" aria-label="margin-inline에 대한 직접 링크" title="margin-inline에 대한 직접 링크">​</a></h3>
<p><code>margin-inline</code>은 인라인(가로 쓰기 모드에서 왼쪽 및 오른쪽) 여백을 설정하는 약어 역할을 한다.</p>
<p>변경은 간단하다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* before */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">margin-left</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> auto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">margin-right</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> auto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* after */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">margin-inline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> auto</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>논리적 속성은 몇 년 전부터 사용 가능했으며 현재 98% 이상의 지원율을 보이고 있고, 때로 접두사와 함께 쓰이기도 한다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="안정적인-개선">안정적인 개선<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8-%EA%B0%9C%EC%84%A0" class="hash-link" aria-label="안정적인 개선에 대한 직접 링크" title="안정적인 개선에 대한 직접 링크">​</a></h2>
<p>잘 지원되는 최신 CSS 속성은 향상된 경험을 제공할 수 있으며, 이전 방법이나 자바스크립트 지원 솔루션을 대체할 수도 있다. 특정 애플리케이션의 고려 사항에 따라 다르지만 대체 솔루션이 필요하지 않을 수 있으며, 항상 테스트를 권장한다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="text-underline-offset">text-underline-offset<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#text-underline-offset" class="hash-link" aria-label="text-underline-offset에 대한 직접 링크" title="text-underline-offset에 대한 직접 링크">​</a></h3>
<p><code>text-underline-offset</code>을 사용하면 텍스트 기준선과 밑줄 사이의 거리를 제어할 수 있다. 이 속성은 다음과 같이 적용되는 nomalize의 일부가 되었다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector" style="color:#00009f">a</span><span class="token selector pseudo-class" style="color:#00009f">:not</span><span class="token selector punctuation" style="color:#393A34">(</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">text-underline-offset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.25</span><span class="token unit">em</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이 속성은 border, 가상 요소 또는 그라데이션 배경과 같은 오래된 hack을 대체할 수 있다.</p>
<ul>
<li><code>text-decoration-color</code> : 밑줄 색상을 변경</li>
<li><code>text-decoration-thickness</code> : 밑줄 획 굵기를 변경</li>
</ul>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="outline-offset">outline-offset<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#outline-offset" class="hash-link" aria-label="outline-offset에 대한 직접 링크" title="outline-offset에 대한 직접 링크">​</a></h3>
<p>focus된 요소와 outline 사이의 거리가 필요할 때 <code>box-shadow</code>나 의사 요소를 사용하여 사용자 지정 outline을 사용하는 트릭을 사용한적이 있을 수 있다.</p>
<p>오래 전부터 사용 가능했던 outline-offset 속성을 놓쳤을 수도 있는데, 이 속성을 사용하면 양수 값을 가진 요소에서 아웃라인을 밀어내거나 음수 값을 가진 요소로 끌어당길 수 있다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector class" style="color:#00009f">.outline-offset</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">outline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token unit">px</span><span class="token plain"> dashed </span><span class="token color">blue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">outline-offset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">--outline-offset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token unit">em</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>회색 실선은 요소 border고 파란색 점선은 <code>outline-offset</code>을 통해 배치되는 outline이다.</p>
<p><img decoding="async" loading="lazy" alt="img4" src="https://5kdk.github.io/assets/images/4-d85a34d0315035e6d3423033dda6effa.webp" width="1404" height="306" class="img_praT"></p>
<blockquote>
<p><strong>Note:</strong><br>
<!-- -->outline은 요소 box size의 일부로 계산되지 않으므로 거리를 늘려도 요소가 차지하는 공간은 늘어나지 않는다. 요소 크기에 영향을 주지 않고 box-shadow가 렌더링되는 방식과 유사하다.</p>
</blockquote>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="scroll-margin-topbottom">scroll-margin-top/bottom<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#scroll-margin-topbottom" class="hash-link" aria-label="scroll-margin-top/bottom에 대한 직접 링크" title="scroll-margin-top/bottom에 대한 직접 링크">​</a></h3>
<p><code>scroll-margin</code> 속성들(및 해당 scroll-padding)을 사용하면 스크롤 위치의 컨텍스트에서 요소에 오프셋을 추가할 수 있다. 즉, <code>scroll-padding-top</code>을 추가하면 요소 위의 스크롤 오프셋이 증가하지만 문서 내 레이아웃 위치에는 영향을 주지 않는다.</p>
<p>이것이 왜 유용할까? a 태그가 활성화되었을 때 콘텐츠를 가리는 고정 탐색 요소로 인해 발생하는 문제를 완화할 수 있다. <code>scroll-margin-top</code>을 사용하면 내비게이션을 통해 스크롤할 때 요소 위의 공간을 늘려서 고정 내비게이션이 차지하는 공간을 고려할 수 있습니다.</p>
<p><code>[id]</code> 속성이 있는 모든 요소는 a태그가 될 가능성이 있으므로 base style에 포함 시키는것이 좋다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">id</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">scroll-margin-top</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token unit">rem</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="color-scheme">color-scheme<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#color-scheme" class="hash-link" aria-label="color-scheme에 대한 직접 링크" title="color-scheme에 대한 직접 링크">​</a></h3>
<p>테마를 사용자 지정하는 <code>prefers-color-scheme</code> 미디어 쿼리에 익숙할 것이다. CSS <code>color-scheme</code> 속성은 양식 컨트롤, 스크롤바, CSS 시스템 색상을 포함한 브라우저 UI 요소를 조정하기 위한 Opt-in이다. 이 조정은 브라우저에 해당 항목을 light 또는 dark로 렌더링하도록 요청하며, 이 속성을 통해 기본 설정 순서를 정의할 수 있다.</p>
<p>전체 애플리케이션에 적용하는 경우, dark 테마를 기본 설정하거나 순서를 뒤집어 light 테마를 기본 설정하도록 <!-- -->:root<!-- -->에 다음을 설정한다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector pseudo-class" style="color:#00009f">:root</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">color-scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dark light</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>대비를 향상시키기 위해 어두운 배경의 요소 내에서 양식 컨트롤을 조정하는 등 개별 요소의 color scheme을 정의할 수도 있다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector class" style="color:#00009f">.dark-background</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">color-scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dark</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="accent-color">accent-color<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#accent-color" class="hash-link" aria-label="accent-color에 대한 직접 링크" title="accent-color에 대한 직접 링크">​</a></h3>
<p>체크박스나 라디오 버튼의 색상을 변경하려면 이 속성을 사용하면 라디오 버튼과 체크박스의 <code>:checked</code> 와 진행률 요소 및 범위 input 모두에 대해 채워진 상태를 수정할 수 있다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector pseudo-class" style="color:#00009f">:root</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">accent-color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color">mediumvioletred</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="width">width<!-- -->:fit-content<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#width" class="hash-link" aria-label="width에 대한 직접 링크" title="width에 대한 직접 링크">​</a></h3>
<p><code>display: inline-block</code>과 같은 인라인 표시 값을 사용하여 요소의 너비를 콘텐츠 크기에 맞게 줄였다면, <code>width: fit-content</code>로 업그레이드하면 동일한 효과를 얻을 수 있다. <code>width: fit-content</code>의 장점은 display 값을 그대로 유지하므로 레이아웃에서 요소의 위치도 조정하지 않는 한 변경되지 않는다는 것. 계산된 box 크기는 <code>fit-content</code>로 생성된 치수에 맞게 조정된다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector class" style="color:#00009f">.fit-content</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fit-content</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img5" src="data:image/webp;base64,UklGRnQbAABXRUJQVlA4IGgbAADwtgCdASqEBQABPoFAm0slI6IhoJQJAKAQCWlu/GwZ5esLfgj2rL/X+X9Vn593i/8g/3PqA/Tn0nvUp6AH+g9GD1KP1V9gD9APVd/3/sU/3D/j/uR8A37K////1+4B//+Cy8Yfzr8afdd3H/b/6T/af7t6A/i3zH9n/Kf94PeR/i/IF0V5nfxr6+/f/7T+4PrZ/nf55+qPmz8KP3r8VfgC/Hv5z/avyy/xHC8WV/6PqBdwf9L+vn68+i3/of371H/NP837AH8s/rP/Q9Sv6T4UH3//Y/sP8AP8j/vv/V/zfuvfy3/Y/yX+g/cP23fTf/y9w/9X/+l66Psl/eT2KP2m//4XfICqi7ZkIrCtfkBVRdsyEVhWvyAqou2ZCKwrX5AVUXbMhFYVr8gKnyzW4dTQP6sdEv29klcjZA6RVLl4Nd/vp63oJJ8ZKBIV1UFYTS+xs2MO0jCtfkBVRdsyEVhWvyAqou2ZCKwrX5AVUXbMhFYVr8SxlVpP55QBVXMyGUMCS46HrdWQowqou2ZCKwrX5AVUXbMhFYVr8gKqLtmQisK1+QFVFZ/pyG6jzqoUvQ3vIuRDwWM1f9Z6fvKsMilb0c+lPpCKwrX5AVUXbMhFYVr8gKqLtmQisK1+QFVF2zIRWBWVIHei/krWYNJIUNK4bvsjZ/kDyCxeYfwwrjrz3tqCFi/q5fM/NxoqbunJthupv7mzR1DiBjr0faTyyalCPXxMg4Jf5F/LIVavmqWuG6PRqXFg5WuOGpW5svWQb7J1ldGyUmlA46cCxYnVd6UGXx/x2Cqi7ZkIrCtfkBVRdsyEVhWvyAqou2ZCKwrX5AVUVn+oRhakCise98i+wZCEACgyDRn3ns+k1jFvJ0NQI+6bjQaaW2B/qkuFAmemEG65PRoIGadT/SUgKqLtmQisK1+QFVF2zIRWFa/ICqi7ZkIrCtfOiu4hs6HQYgvqEwCDTSOBAi+jU308bXCZehAKETWzWbdNwqBdX33oQChFQe8ni9zSUgKqLtmQisK1+QFVF2zIRWFa/ICqi7ZkIrCtfj4wMnQFG43G43G43G43G43G43G43G43Qf0lICqi7ZkIrCtfkBVRdsyEVhWvyAqou2ZCKwrX4+MC/ICqi7ZkIrCtfkBVRdsyEVhWvyAqou2ZCKwrX5AVUXbMhFYVr8gKn8yZ+BjSffdWzucaT77q2dzjSffdWzucaT77q2dzjSffdWzucaT77q2dzjSffdWzucaT76we2jeT11l5Dm0pGNs4ARpgpelA559NQbGgemFIBVAYNdaGnXVqGb3cNAqag6HNYVr8gKqLtmQisK1+QFVF2zIRWFa/ICqqYwFPogRTZWBW0YSlvMmosivfGYNYpGz6UkG6BlBmDk5iteKhG9v1ZAJulQcvvl+ER/CU00WqUlYYqpv7cP7Y983UvNRYyp3Jz4AFw6IM0+KJVmTXq1FNYrzoPc+FM0W60p6DM/qCgv15ANi9kwl5QUsmWnkLTVrypnf7dKc+7z/QNQ/1HTwkSMieHSJFOQQj+OLtrVMipJ63CynysYoCj9hIZVTifFa4OXiUgKqLtmQisK1+QFVF2zIRWFa/ICqi7ZkI4HGoUTa22v4ZMxOoCA44UyEh1Jvh9UILBfo2OSO1f5i2siGZMgrYHlVlimYxEoCKo47fqYx/FuTbU19BmQ0rBjdduTXLNhTrOWtz1SAommLpkSkSGwzuIsVn5RdhpE/k3Y5LSfA9k8UBq20LnMjmsK1+QFVF2zIRWFa/ICqi7ZkIrCtfkBegKxnAhTbyArhSzucZ6BhkyD+8OawrX5AVUXbMhFYVr8gKqLtmQisK1+QF6ArHGvJPvurZ3ONJ991bO5xpPvurZ3ONJ991bO5xpPvurZ3ONJ991bO5xpPvurZ3ONJ99ysRs7ZkIrCtfkBVRdsyEVhWvyAqou2ZCKwrX5AVUXbMhFYVr8gKqLtmQeycAAD+/+jQAAARz4FEnk/oJpFbxaDawzohzR55++khAqEmwwPGQjEyAenO43zzZqer1tZkrnqm6JoXxh65OFqSI1MkSdkj8ec8V2B8JpAH8hlsMNBHi0J+wuGqABYXBNk4FQewoliIizhdsnptC8pQYkwzqNGbRaudJdGUeg9I1a8nhB60b51Nh0pykm3im8Mp0EVGPRY5oRGkC6zKFqNwMvjHG0pJItYP8ZrrPDpkTwZf9PqndUEbGODXemGse8nI488aMqW/Vl0noPd3uLouDYh+VqPUamSJOyCUlM8B9YbT0asQFhyLp0Z+MxGHXcbI38oDLy7AsFIMbSCRDa6S5n86IUTd5CUQJhPPCej6wxR7QjGN+amgIKGlao+uPm4NRrM6YJK+7F2LokJHIfAXkAP3niLmsurAiMEu3PbrsKfpeQ11LmnncA8XPoaNVUzK8cTp+m33t7Dt2O/0FFoy9ufo9MCA9mCCGoj/2/o23eqxfADWw8pjVayhChPFgCFbcjgUk0kL0wIqUSDdNqDitjiq86IUTdkMTG7PnnhPR9YYo9oRjG/NTQEFDStUkn89LO/VLVLca+li7F0SEjkPgLyAH7zxFzWXVgRGCXngA6QJExu6AxwyUncA8XPoaNVUzK8cTp+m33t7Dt2O/0FFoy9ufo9MCA9mCCGoj/2/o23enAvr2oq52DUdrKnHILfGImvRgoiJTH2OSXrwAJrP2CoAAmXR2CneCdFutgX5Ga/APhKB7xz0TGLfAZPB2NWSTwv8E+KobPKcYAAAACx1hvdhFkOAt7uXv6CC6tfHYthXk9Yozn0eOakr+r5rwNiPAqeb+qTigAEj3UpOzXO9AiynoGG62BfkZr8BMqMaLaF2EBEOoPtFc7uqC79vrdVLcKCnQQTjdsbf7Nk86rb2skCUhJESrOgx8zYITRcdCK9tf5E+ZCokDY3GS8jF1Sl7/huS/6j3+sguip9ojqbJ8rn8HNo+ZVrcrn6vvyruY2UxXQEcO/KFkwrZ0rnAbfL+7XSTtofHRG3nyI027+aun3bzmTBQOOt7ORErgP4aNTzF27Grs+T0DH3/NC+I0Nub06D9jV+gar/m27uQF7zGS6Pzboz+V+DXID6BioTh1bUNZWNG6tfFSdK0/Z2rYA5UIOoB8bN45tGYLkHYXoLCVUMAAAjFoy2J7seI0bY4X07jZ1KErRJ9IrRUuSp80HNWORGZDep4DhLlaLHD/gGzJ2AtrFGqDualoku8xiLDStKvdh5Q0/BXv9pr/natB7pi25iVt7sHzQjBzIgt5NN+R25p0M83VahRl1+c35EXhgXtNbvhLblTgjWneAqK/cjMqLm7LlTQQcrm31DnWIwktj67/ugpz5kv9BmlbJt/SGUhN2Gwy9tB5FZMisvycpeQv3FhzjqLWzvNzhYvhbgoq4McHRfzzxHo22UCpbYT9Cg94Ds2Kl8bJWLSMWu+MrMINTeL90FAVarNbnslZ48v5bA75mNx+q7UgvZOjKvozexPug4+kR7izZCEJ6U8+kiTcGXe1sF12rWAW2MC/y6EEBKznkqGpyBz/slRFhLro0uVDhcu7PBKJDAlSUCwudnmRxkb/e27uM0jD2it/zsydNXpO/emsaH3O8i/SE671XG+4abD0h9WnobXBOc4p//1SanMix1HwldSRSbjP/X1BWVyAtuu0c0aGlB+2WcPA0/Gqj/6SLW9c5ONz6N2PPt99TrxeJ+0ws4LEGRR83+6nzYALZqURZgUrCEUnTlIcOfTK1cz9LO+Yybu3G4yU3lGhnuCUfFkToO9gQLAKth5WDGMFyAcVj17IccMQW2KK5v8nrWbdMjO0t2RTEBGcakv5lkEyCJkPF8+RbTiGTe9XTuoRiRJd/7uLqEpJ2l5TVG6kM0qVwi3oteyjdT/l33D0Y5vh5dxj4gai+RgMTlT4IiMxkC+uxswIo+PuBufixFGBDDmvd379aknMeVjfv2THaoNXV5ELBEE/hqwxNBmRpXZR/fAcMX9pCwWj5ZpDw4Q9XmE6Mvj1aQAYymncxPU1brYf/CON3GabJN2kNPQTQN0u7OSNUo9oWPg4paANqTdBALTbQrORLlRmimfEOEUYVpww1pLFgPLNWNa3bLAyt9g/pC8i9QCpugZi3R0Am5wI7HyX5ap7+Jx6cEbEmiy62gsA6OrAk4sCYZmPs9DMDM+uflC9VFxnQT5eMTk4N+EGbqpmS2blwlz+kWjCl/HRaXSI9xZshCE9Kevu71UWfdr8Qt4kowZ0WPk5QlFAjvj2YPA25W0RuRyFQ2NhNGRV2MxkBjQe/XjvfeyMCqw4ejre2SKw3DwZWXmNm1fnXziil5lHJa357owe5nomCYRTM5bXhN8421ZVCZiLXOgLF6n0J/MM9zl7Dn3l7yZDAuX1Kw0JdrTctgB9k0CmCczAZN683pEsUWfx624w8dVfdkKD+JODhPeWzpHqmjFV45IFwKFGVthanUNymgQo7Qbe8FmVpZfixJqMSvhm+mqV9Hshe5glfE8fnFpFF9XUjFL8JU5RgknsazribfVQ7sqt+fWyhoZJT9uxX+vEZd9yNyNn7Hmri40sclb1PvLBlbZqLKbvlDO9xWkoaiTkW70tSknDpz9JAomSNi+TIRIU9jKWTdIlYFnHWxw9xGugDY6kdcGFsk27OPLeAcawAnIuh13oJvEMqoIYtPa0AAGHEZr8A+EoHvHPRLfFQVDlK4882qbSI5z9Kq6rQGBlKzVQ4GIlZAWCKZKQEcQvlo9FWsfefAcPUrcfSCIBMd+SMgD0DauPRFJkXuSyDJ5XJZxgPilCKa4IeJRHXeskud/nD0SKh4i6FKUD9+DfYYdQN1tkDdwKszFJ+ZiU1igw0AfIAqlNLTBYzKmJa3/6bvJcTzHylVnOio/34bXI7eHUVblT1bjybnha+uyBNE9lUDmmcSUdFzwcrPJ0NoMAjUG1MOOijRByUZArOuZkVSsOSZclBNUeKlelXwv6wa3hqO6CCMVzN32/8fDlXQvLpEAmNxcOoU1rjbqdiiigWST6mPKqPNmtA+n/25l1oiAiRXYBhn054kJ0lhjeIMPmzgevr5fZ7CBmg6L5wh6p/xA0nwpvG2qyKsL1m6PleRJ85ivYmwIG52iBjeludHtsyX0c2tnrGZDgNVLrc8hlvRHkKFSrrrSc1IvCnhRHoD6wXJVuVCbuDEi+C5OE4ktB/sg234CUEdHAcpmZjSIjdP5yhYIIRljok3ZNvJCe01XyPgi19BFQG5tzwKRAAGAAARaSOxyPAHm6QRODb1uAnTQrWHaXy0+IXrTlff0LISfTQWzYtxD7DI2JBejNpD8B8EhtGy54FbwZ7c71WL7YjvP4MmEVntJ4heo7G2AJZmsnChjIhpylT8B8EhTUPrZO8PG0WBO0yo4uvbphuQ+7VBuBmFYQ8YDm/hkSlT2q3LjDWleu6JC8BgU6k2yWLJ442TB9xvc2Vo+oQ6gIhZLFwgHcqvCoccMlal5SXe3Do4E7TKji69umG5D7tUJ/Z+pOynYvOyZTzGZojNa6AZ4Dt1Rr8LHrE+rk1UNX9YQzmoTIdQKN1LyevbFSiZYVC5ERM89AMNXxjbku5n1sn3kmd+FxZ/8yxZfiXfW8Bcd8slTK6zK7vwEf+NBRhUu5iINdv8yre0z/5hs2WQd9gjZhkpYMGs7nHoYGGoiF8lQbgYAPw5xEa+yRsiWshZfJ4qiRjvdgbg6V4QPhJumIuAF2PXdkeBTaxOuCW+lu0gjHzUwN7CWXrlYNCJ+gZY/5GD7o/98lQbgYAPw5xEa+X9zLPvhWSUFUEXaQUE13NRPWDqvtxa9a0xEHohRW7lPDtWu6UdUzvBFqN5A5zuhq7monrB1X24tfIutoTRwNmahAqShWskNMDaDwItRvIHOd0NXc1E9YOrES6M+9Dt4F4zMd2VjBoql/WvWPptg/IGyDXTPiXFvq7uZ2UCrKRP0DLH/IwfdH/vkqDcDAB9//thJ1Kb1csv7fAwSw0EHcrrPZdXw4JjpaAevjwcAjQALsk+m6k6BC34g1OV6YATVNwGMAAAAAAAAAAAAAAH9jVMUAAFjhq0oK2gO0HI9xtcwbME2VCfr+m1xpiZvYucqihgmqSELSsF7jxsnBHZDtyZmgqXn0Q56TvAidyj6VgeHAeELNLz0bz0tc/MtPy4zU1SLHrgqo+Ltb+pJ0zTe8hZGTFIlcoU1POm7B7Kq+376nFBOvxje4b8WZ+D/6vl5knOoSkUfr51oHufBb1VLMqUaxxtwN1GXc6I7YdrsG9F+Y80xE4eN9WyUFhuqB2CU+SDmi0NXrqZUuWkTFG5rVGK/P+uqXVx7ITh60P7r4HNhlM3fhJq2gzsTJDy9B8B+WvV0RQE2wAGL18tLE9YCXxOL9ExLvEixkZ0GfjUorWDwiB9nt/tZSFAmDwYbv0Xp0r5NsfV1nKCH9NRyjEdna6//IBsRibh7mA5gEfTMeIY+RGCyhKUVTnhVHLPuYYQY7CaNxIDojhUFIVl57XZyzJuIDlWOrT5ZlJxXvuFr3erg/g9sp9qm8wzAvLZ+wF3PTS++Y1d6NvX9S/DwA9DX6CUv9MFO8pI7+WyQvChenirojeJTEsTdZIJBaiNbcQ2W1BLoJExmkaRDG7TtsX+pZpOTNhjQUMrx3TqgHgIoUs8zyrKEvrJUKhai0qEGEGRe5M4C1IE7+EehCcg70T381E1fqZj4ohLxcBlLewOOwpkUlb0d8++ZEepkrSg7AG0LSym9UY4jBVAUSNBblpkB8wjN5GgWDCzvkAC0O+PS3rmlK4jBPKcFJ8/fhkIU95pzCXury2cdK1kzhf2DCkUVgdfv4LWm4853wQMYx+G2ao4j0674T5oylMu07yznFaTRWdySFf3pnTXYYP17W1kCC+dc9c5HcMRVvfBTmZ57kmhrprkpAOLfUAvVBWLmI54LEa1imhQ66q+x/mhozn3iw0bWBMHYI7WDl5nsJCmBS77WhS9J0OmTNAYQNxR7ygq56Ea9HIGEHEkaP21k0IPLrjjEjexnMAV95IwCwXql4xdb8ujVn71vgrk6eoB9vRHcrh1JBa8PoWxV1iWMHXASCEubjd8vS0SW+8I0ORd+11ALloy8R6CFNotWUqbuUJO6TuFrPEimOz+4iiKvurGF00KEMG/XoqdcmPep8GtD/ctnHcPL+OQi0BqJ6NRvmeKfXxpxQ3eebHM8o9ubopAd8NMe5P6DjjP8K7Azks/fQoh0jInd+VkmuJ27i3HZ6BklX56OnmvliAIvxWhdQ1ZRwsU5MFDUuLUIivnZec6R46GA5Z+lLScNZIt0wTDdleCkZ8Q344FP8TwtyWol8SHcqGMa3X80q0qi/z946o/zw4GwepvoCFXl8zccUbUxcnK6LhJ0TLK1j5p9jfVAGSs23m1dOSvBB1h0kAFbJ+Q9jie7UKifRsflKLNkqhLn7ckZqGZwHmk1doM3EuF2Wt1ncnWfSCJWk+jwv3HWrAHl7khkoXLf3e0y9Djv5JI+wnvGbmDYxtxxpdMC8OXKd3P2kJoBnNoT1tzbEqrYMrIIvXRDKArFfMJZrK6dMYHd24PhyGyvU0+MuiXopEhyQo19Lz6BIEuRWSoV4trfk0/79XYzxRRWiZG6la6mlcN5RbV9OdeVmat0koUxK5o+sCp2E8GINXBnQwXLQ4NfiMLLQX6v7FF8U7UM4Tsk6T6DXObNNcWHaoYVtX+z96+vk5vs9hQLFJmXfKdI9+ZTgykYIrh1/ejIQpKsvSh179+c1ip/FQjGlYkMtT0unwDY3amvDArQda7agRbFxWVQd/JsFlhmgG8cG6CsgwXbu2ELwsfyMitSYvzWaz0LtIdIKx+fot9BMnodWuMnwVSXaMj0CBgu4hrTL89rEda/Tr8zEoQSlR1nyqicTnSy93neK5p0KNSYDwogtqZYqW8T2Z02WsHQvRzNe06gHaJsMiqVpAbXzDplBBON6rL3xg+9BfRTi6Gg41/CGroxpf+0ccW8kMqDEf2oFCSYL9HFQjcaHYm0pbn9S46iT00oni/mgLpUbxcw48YO+ICE9Et3YpHV36zHezRvcpuITrfEloqpzZj7Divo4LaYmcAz52qzQzNVbT+BGIe/35jU1DYsuy0Jy+kfoIBDDQLNgAzALjI35G+VhETgxmISwcwgVDr1xXKW7vRH9VcDdw8f45t7RI3SU0N0NIXnMyyoqQvsnLlZig/TIdIx06VF+KCp9ZO8NCA1FQbXfNhU6dFe9Smk3Awf5LNXpbxF4FYbkQObYq4OkyIeQDyW8ScCWnbURHO7L3DqfutZNJFMMInzE7+AE73qhMqkrQ6Qg8utmm2fcp3Dr3gRmgLirJl+Esztzp8lniQkRAbse5MQOA8c0KEDBHBdI9vjZRMeYmWHro4fIBKUgtCt8cCoeDvzTTjYWzQQZYq2iPaqfVAE3fxmo+r42vrXGx6lb4ZF0QW6k6CXrGxQqa3raG2tMR0oqvbMdaQnaCJYwIsp8nBKIbTgYcTM47SCKVp+aWhKPQyca88VXDUn0LOejBBz9nSzScypdz4ZvnMELLk7tM4JYh2yv45SFB5cLAkDHh0xTs8noeLkCjwtB9NDTmUamQOFLCyeBqdAdjOQv/ZTsOnfWgCl/8oQWDl4LZQAACA8VeHziahOyAeki/zg56GrGCPxnY/VKGWBMd4FkEGukhmNP8eqt0U2bm4efNHSO83iJJemebEwboglzk9TIfgeV4/y+nEGBFFR4po1VHuU2DsovyzzgKoMaTjomHM2/LfaO0lUvPVna13LfihkBPzy7csGSEL0M22Yk678dYA6y5x9kZbEtUwAzVJx3etQcAWI76r9a0UQ+v7D51Jm7yiBGZzE290oGXJFLYQG/SvZG6GorPu9RN8J0DD7GwxlTqZkPjeAXSApGUzWmWe6pXI/Swc+GkyKqXAZ4lXdN6flNpxpqtGYSWN4BW0ZsqutMA5RYYvBUIqnvDmsdsO9hI/oNJhbJzGsIyaL09c+AN6v6xAFTRFWlikn/qtaZwlposQC0NZqgSTsStgDUwjUmq8dyWcVzKaAAfnEBDdMRugPVGkOEr3QXj2YlP+1eVlGqJm8XB3nDTUDUhFpHRwLspk00eQDMDWnkvRxgpzxvX2Yc8EILUTBHQAf73Krzr2Pu/nVj5ZO1Luh/mK0QRm5q2BakB+YS7Pju5yM4tHWmJFwEj1kijupO5BZP1Xz8HNMYcWaub8bo3zN60GAALM0I0qdgVVnzNTl80Vg7GUjizXH9x1j/YkwarJmvRf3Gvl1jK9HCSkaTh7MpgBYDKZ40eKT5S+xbUWEBYzuC8Jft2iPKqPdWSnKhQ0TrBZYSYrtWbhwAAAAAAAAAAAAAAAAAA==" width="1412" height="256" class="img_praT"></p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="점진적인-개선">점진적인 개선<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#%EC%A0%90%EC%A7%84%EC%A0%81%EC%9D%B8-%EA%B0%9C%EC%84%A0" class="hash-link" aria-label="점진적인 개선에 대한 직접 링크" title="점진적인 개선에 대한 직접 링크">​</a></h2>
<p>이 마지막 파트는 지원되는 경우 업그레이드된 경험을 제공하고, 지원되지 않는 브라우저에서는 문제 없이 사용할 수 있다.</p>
<p>즉, 최신 CSS에 최근에 추가되었더라도 대체 방법이 필요하지 않다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="overscroll-behavior">overscroll-behavior<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#overscroll-behavior" class="hash-link" aria-label="overscroll-behavior에 대한 직접 링크" title="overscroll-behavior에 대한 직접 링크">​</a></h3>
<p>포함된 스크롤 영역(오버플로우가 허용되는 제한된 크기의 영역)의 기본 동작은 요소에서 스크롤이 끝나면 스크롤 상호 작용이 백그라운드 페이지로 전달되는 것이다. 이는 작게는 사용자에게 혼란을 주고 최악의 경우 불만을 야기할 수 있다.</p>
<p><code>overscroll-behavior: contain</code>은 스크롤을 포함된 영역으로 격리하여 스크롤 경계에 도달하면 상위 페이지로 이동하여 스크롤을 계속하지 못하도록 한다. 이 기능은 긴 글이나 문서 페이지 등 메인 페이지 콘텐츠와 독립적으로 스크롤할 수 있는 네비게이션 링크의 사이드바와 같은 상황에서 유용하다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector class" style="color:#00009f">.sidebar</span><span class="token selector punctuation" style="color:#393A34">,</span><span class="token selector" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token selector" style="color:#00009f"></span><span class="token selector class" style="color:#00009f">.article</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">overscroll-behavior</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> contain</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="text-wrap">text-wrap<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#text-wrap" class="hash-link" aria-label="text-wrap에 대한 직접 링크" title="text-wrap에 대한 직접 링크">​</a></h3>
<p>2023년 기준 최신 속성 중 하나인 <code>text-wrap</code>은 불균형한 줄의 타입 설정 문제를 해결하는 두 가지 값을 가지고 있다. 여기에는 마지막 텍스트 줄에 혼자 있는 외로운 단어를 설명하는 'orphan(외톨이 단어)'를 방지하는 기능이 포함된다. 외톨이 단어는 텍스트의 마지막 줄에 홀로 있는 단어를 말한다.</p>
<p>첫 번째 사용 가능한 값은 balance로, 텍스트 한 줄당 글자 수를 균등하게 맞추는 것을 목표로 한다.</p>
<p>래핑된 텍스트는 6줄로 제한되므로 헤드라인이나 기타 짧은 텍스트 구절에 이 기술을 사용하는 것이 가장 좋다. 적용 범위를 제한하면 페이지 렌더링 속도에 미치는 영향을 제한하는 데도 도움이 된다.</p>
<div class="language-css codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-css codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token selector pseudo-class" style="color:#00009f">:is</span><span class="token selector punctuation" style="color:#393A34">(</span><span class="token selector" style="color:#00009f">h1</span><span class="token selector punctuation" style="color:#393A34">,</span><span class="token selector" style="color:#00009f"> h2</span><span class="token selector punctuation" style="color:#393A34">,</span><span class="token selector" style="color:#00009f"> h3</span><span class="token selector punctuation" style="color:#393A34">,</span><span class="token selector" style="color:#00009f"> h4</span><span class="token selector punctuation" style="color:#393A34">,</span><span class="token selector" style="color:#00009f"> </span><span class="token selector class" style="color:#00009f">.text-balance</span><span class="token selector punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">text-wrap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> balance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* 데모용 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">max-inline-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token unit">ch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img6" src="https://5kdk.github.io/assets/images/6-a08003578a6ad1d1e99e0dfa08485e89.webp" width="1404" height="320" class="img_praT"></p>
<p>다른 값인 <code>pretty</code>는 외톨이 단어를 구체적으로 다루며 보다 광범위하게 적용할 수 있다. <code>pretty</code> 알고리즘은 텍스트 블록의 마지막 네 줄을 평가하여 마지막 줄에 두 개 이상의 단어가 포함되도록 필요에 따라 조정을 수행한다.</p>
<p><img decoding="async" loading="lazy" alt="img7" src="https://5kdk.github.io/assets/images/7-f34cdd6bade6239760a4ba2bfcfd6ddc.webp" width="1410" height="780" class="img_praT"></p>
<p><code>text-wrap</code>은 점진적으로 크게 개선된 기능이다. 하지만 조정해도 요소의 계산된 너비는 변경되지 않으므로 일부 레이아웃에서는 텍스트 옆에 원치 않는 공백이 늘어나는 부작용이 발생할 수 있다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="scrollbar-gutter">scrollbar-gutter<a href="https://5kdk.github.io/blog/2024/02/11/12-modern-css.md#scrollbar-gutter" class="hash-link" aria-label="scrollbar-gutter에 대한 직접 링크" title="scrollbar-gutter에 대한 직접 링크">​</a></h3>
<p>일부 시나리오에서는 스크롤바가 나타나거나 사라져 원치 않는 레이아웃 이동(CLS)이 발생할 수 있다. 예를 들어, 다이얼로그 오버레이가 표시되고 배경 페이지에 <code>overflow:hidden</code>이 추가되면 스크롤을 방지하기 위해 숨겨져 더 이상 필요하지 않은 스크롤 막대를 제거하지 않아도 된다.</p>
<p>최신 CSS 속성인 <code>scrollbar-gutter</code>을 사용하면 레이아웃에서 스크롤바를 위한 공간을 예약할 수 있어 원치 않는 이동을 방지할 수 있다. 스크롤바가 필요하지 않은 경우에도 브라우저는 스크롤 컨테이너의 패딩에 추가적으로 생성된 여분의 공간으로 여백을 그린다.</p>
<div class="theme-admonition theme-admonition-caution admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>중요</div><div class="admonitionContent_ocWh"><p>이 속성은 사용자의 시스템 설정이 스크롤바를 'overlay'로 설정하지 않은 경우에만 영향을 미치며, Mac OS의 기본값과 같이 스크롤바를 활발하게 스크롤 중인 콘텐츠에만 오버레이로 표시돤다. 오버레이 스크롤바를 사용할 때 의도한 공간을 모두 잃게 되므로 scrollbar-gutter을 없애기 위해 패딩을 삭제해서는 안 된다.</p></div></div>
<p>시각적으로 명백한 여분의 공간이므로 <code>scrollbar-gutter: stable both-edges</code> 두 가지 키워드를 사용하여 이 속성을 할당할 수 있다. <code>stable</code>만 단독으로 사용하면 스크롤 막대가 있을 자리에 여백만 추가되지만, <code>both-edges</code> 환경설정을 추가하면 스크롤 컨테이너의 반대쪽에도 공간이 추가된다. 이렇게 하면 레이아웃에 스크롤바를 표시할 필요가 없을 때 시각적 균형을 유지할 수 있다.</p>
<blockquote>
<p><strong>참고 지료:</strong></p>
<p><a href="https://moderncss.dev/12-modern-css-one-line-upgrades/" target="_blank" rel="noopener noreferrer">Moderncss dev</a></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="css" term="css"/>
        <category label="style" term="style"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[좋은 코드를 위한 ESLint 정적 분석 딥 다이브]]></title>
        <id>https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive</id>
        <link href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive"/>
        <updated>2023-11-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[좋은 리액트 코드 작성을 위한 환경 구축하기, ESLint를 활용한 정적 분석을 알아보자.]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>"개발자에게 버그란 항상 따라다니는 그림자와 같다. 모든 개발자들이 버그가 없는 제품을 만들기 위해 최선을 다하지만 늘 그렇듯 버그는 예기치 못한 곳에서 매번 발생한다."</p>
<p><strong><em>모던 리액트 Deep dive 중</em></strong></p>
</blockquote>
<p>버그와 예기치 못한 작동을 방지하기 위한 여러 가지 방법이 있는데, 그중 가장 빠르게 시도해 볼 수 있는 방법은 정적 코드 분석이다. 자바스크립트 생태계에 가장 많이 사용되는 정적 코드 분석 도구 ESLint가 무엇인지 어떻게 사용하면 좋을지 살펴보자.</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p><strong>정적 코드 분석</strong></p><p>정적 코드 분석이란 코드의 실행과는 별개로 코드 그 자체만을 코드 스멜(잠재적으로 버그를 야기할 수 있는 코드)을 찾아내어 문제의 소지가 있는 코드를 사전에 수정하는 것을 의미한다.</p></div></div>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="eslint의-동작-방식">ESLint의 동작 방식<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint%EC%9D%98-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D" class="hash-link" aria-label="ESLint의 동작 방식에 대한 직접 링크" title="ESLint의 동작 방식에 대한 직접 링크">​</a></h2>
<p>ESLint를 사용하는 것 이상으로 ESLint가 어떻게 동작하는지 아는 사람은 많지 않다. ESLint가 도대체어떤 방식으로 코드를 정적 분석 할 수 있을까?</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="eslint는-어떻게-코드를-분석할까">ESLint는 어떻게 코드를 분석할까?<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EB%B6%84%EC%84%9D%ED%95%A0%EA%B9%8C" class="hash-link" aria-label="ESLint는 어떻게 코드를 분석할까?에 대한 직접 링크" title="ESLint는 어떻게 코드를 분석할까?에 대한 직접 링크">​</a></h3>
<p>ESLint가 코드를 분석하는 과정은 간단히 요약하면 다음과 같다:</p>
<ol>
<li>자바스크립트 코드를 문자열로 읽는다.</li>
<li>자바스크립트 코드를 분석할 수 있는 파서(parse)로 코드를 구조화한다.</li>
<li>2번에서 구조화한 트리를 추상구문트리(AST, Abstract Syntax Tree)라 하며, 이 구조화된 트리를 기준으로 각종 규칙과 대조한다.</li>
<li>규칙과 대조했을 때 이를 위반한 코드를 알리거나(report) 수정한다(fix).</li>
</ol>
<p>주목해야 할 것은 구조화하는 과정인 2번이다. ESLint는 기본값으로 <a href="https://github.com/eslint/espree" target="_blank" rel="noopener noreferrer">espree</a>를 사용한다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이 코드를 espree로 분석하면 다음과 같이 JSON 형태로 구조화된 결과를 얻는다.</p>
<div class="language-json codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-json codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Program"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"FunctionDeclaration"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Identifier"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"hello"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"expression"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"generator"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"async"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"params"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Identifier"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"str"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"BlockStatement"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"sourceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"module"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>단순한 코드임에도 불구하고 다양한 정보가 담겨 있음을 확인할 수 있다. 단순한 변수인지, 함수인지, 함수명은 무엇인지 등만 파악하는 것이 아니라 코드의 정확한 위치와 같은 아주 세세한 정보도 분석해 알려준다. 이러한 정보가 있어야만 코드의 줄바꿈, 들여쓰기 등을 파악할 수 있게 된다.</p>
<p>타입스크립트의 경우도 마찬가지로 <code>@typescript-eslint/typescript-estree</code>라고 하는 espree 기반 파서가 있으며, 이를 통해 타입스크립트 코드를 분석해 구조화한다.</p>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p>espree를 포함한 다양한 파서로 js/ts 코드를 분석해 보고 싶다면 <a href="https://astexplorer.net/" target="_blank" rel="noopener noreferrer">AST explorer</a>를 방문해보자.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><p>espree가 코드를 어떻게 분석하는지, 어떻게 결과를 만드는지, 또 나올 수 있는 값들이 무엇인지 등이 궁금하다면 espree의 문서를 살펴보자.</p></div></div>
<p>ESLint가 espree로 코드를 분석한 결과를 바탕으로, 어떤 코드가 잘못된 코드이며 어떻게 수정해야 할지도 정해야 한다. 이를 ESLint 규칙(Rules)이라 하며, 특정한 규칙의 모음을 plugins라고 한다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="eslint-rules">ESLint Rules<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint-rules" class="hash-link" aria-label="ESLint Rules에 대한 직접 링크" title="ESLint Rules에 대한 직접 링크">​</a></h3>
<p>예를 들어, 코드에서 <code>debugger</code>의 사용을 금지하고 싶다고 가정해 보자. <code>debugger</code>는 코드 개발 과정에서만 사용해야 하는 구문으로, 프로덕션 애플리케이션에서는 절대 존재해서는 안 되는 구문이다. 먼저 이 <code>debugger</code>가 어떤 구조로 변환되는지 알아야한다.</p>
<div class="language-json codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">debugger만 있는 코드를 espree로 분석한 모습</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-json codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Program"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"DebuggerStatement"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"sourceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"module"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>body</code>의 <code>type</code>이 <code>DebuggerStatement</code>를 반환하는 것을 확인 할 수 있다. 그리고 이 <code>debugger</code> 사용을 제한하는 규칙인 <code>no-debugger</code>를 확인해보자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">no-debugger 규칙</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">meta</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'problem'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">docs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Disallow the use of `debugger`'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">recommended</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://eslint.org/docs/rules/no-debugger'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">fixable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">unexpected</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unexpected 'debugger' statement."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function maybe-class-name" style="color:#d73a49">DebuggerStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">report</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          node</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">messageId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'unexpected'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>meta</code> : 해당 규칙과 관련된 메타 정보</li>
<li><code>message</code> : 해당 규칙을 어겼을 때 반환하는 경고 문구</li>
<li><code>docs</code> : 문서화에 필요한 정보</li>
<li><code>fixable</code>: eslint --fix로 수정했을 때 수정 가능한지 여부</li>
<li><code>create</code> : 실제로 코드에서 문제점을 확인하는 곳</li>
</ul>
<p><code>create</code>에 있는 함수는 espree로 만들어진 AST트리를 순회해, 선언한 특정 조건을 만족하는 코드를 찾고, 이러한 작업을 코드 전체에서 반복한다. 즉, 여기서는 <code>DebuggerStatement</code>를 만나면 해당 노드를 리포트해 <code>debugger</code>를 사용했다는 것을 알려준다.</p>
<div class="language-zsh codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-zsh codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">/Users/5kdk/sample/index.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    16:1    error    Unexpected 'debugger' statement    no-debugger</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="eslint-plugin과-eslint-config">eslint-plugin과 eslint-config<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint-plugin%EA%B3%BC-eslint-config" class="hash-link" aria-label="eslint-plugin과 eslint-config에 대한 직접 링크" title="eslint-plugin과 eslint-config에 대한 직접 링크">​</a></h3>
<p>eslint-plugin과 eslint-config는 모두 ESLint와 관련된 패키지지만 각자의 역할이 다르다.</p>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="eslint-plugin">eslint-plugin<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint-plugin" class="hash-link" aria-label="eslint-plugin에 대한 직접 링크" title="eslint-plugin에 대한 직접 링크">​</a></h4>
<p>eslint-plugin이라는 접두사로 시작하는 플러그인은 앞서 본 규칙을 모아놓은 패키지이다.</p>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="eslint-config">eslint-config<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint-config" class="hash-link" aria-label="eslint-config에 대한 직접 링크" title="eslint-config에 대한 직접 링크">​</a></h4>
<p>eslint-plugin이 리액트, import와 같이 특정 프레임워크나 도메인과 관련된 규칙을 묶어서 제공하는 패키지라면 eslint-config는 이러한 esling-plugin을 한데 묶어서 한 세트로 제공하는 패키지라 할 수 있다.</p>
<p>자신이 원하는 규칙을 모아서 설치하고 적용하는 것도 좋지만 ESLint를 설정하는 것 또한 만만치 않기 때문에 대부분의 경우 이미 존재하는 eslint-config를 설치해서 빠르게 적용하는 경우가 일반적이다.</p>
<div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><p>eslint-plugin과 eslint-config의 네이밍 규칙이 한 가지 있는데, eslint-plugin, eslint-config라는 접두사를 준수해야 하며, 반드시 한 단어로 구성해야 한다.</p><ul>
<li>eslint-plugin-naver (o)</li>
<li>eslint-plugin-naver-financials (x)</li>
</ul><p>특정 스코프가 앞에 붙는 것까지는 가능하다.</p><ul>
<li>@titicaca/eslint-config-triple (o)</li>
</ul></div></div>
<p>리액트 개발자가 지금 당장 설치해서 사용할 수 있는 유명한 eslint config:</p>
<ul>
<li>
<p><strong>eslint-config-airbnb</strong></p>
<p>리액트 기반 프로젝트에서 eslint config를 선택한다고 가정했을 때 가장 먼저 손에 꼽는 패키지다. 이름에서 알 수 있듯 에어비앤비에서 만들었으며, 에어비앤비 개발자뿐만 아니라 500여 명의 수많은 개발자가 유지보수하고 있는 단연 가장 유명한 eslint config이며 압도적인 다운로드 수를 자랑한다.</p>
</li>
<li>
<p><strong>@titicaca/eslint-config-triple</strong></p>
<p>한국 커뮤니티에서 운영되는 eslint-config 중 유지보수가 활발한 편에 속하며, 많이 쓰인다. 스타트업 개발사인 트리플에서 개발하고 있으며, 현재도 꾸준히 업데이트되고 있다. 이 패키지는 다른 패키지와 다른 몇 가지 특징이 있다.</p>
<ul>
<li>대부분의 eslint config는 에어비앤비를 기반으로 약간의 룰을 수정해 배포되고 있지만, 해당 패키지는 자체적으로 정의한 규칙을 기반으로 운영</li>
<li>외부로 제공하는 규칙에 대한 테스트 코드가 존재, 이는 개발자가 규칙을 수정하거나 추가할 때, 기대하는 바대로 eslint-config-triple에서 규칙이 추가됐는지 확인 가능</li>
<li>CI/CD 환경, 카나리 배포 등 일반적인 npm 라이브러리 구축 및 관리를 위한 시스템이 잘 구축돼 있음</li>
<li>별도의 fe 규칙도 제공하고 있어 Node.js 환경 또는 리액트 환경에 맞는 규칙을 적용할 수 있는 장점</li>
</ul>
<p>@titicaca/triple-config-kit는 ESlint뿐만 아니라 Prettier와 StyleLint를 각각 별로의 룰인 @titicaca/prettier-config-triple, @titicaca/stylelint-config-triple로 모노레포를 만들어 관리하고 있어 필요에 따라 설치해서 사용할 수 있다.</p>
<p>한국어권 커뮤니티에서 유지보수되고 있는 eslint config를 사용하고 싶거나 혹은 자체적인 eslint config 구축에 관심이 있다면 도움이 될 것이다.</p>
</li>
<li>
<p><strong>eslint-config-next</strong></p>
<p>Next.js를 사용하고 있는 프로젝트에서 사용할 수 있는 eslint config다. 단순히 코드를 정적으로 분석할 뿐만 아니라 페이지나 컴포넌트에서 반환하는 JSX 구문 및 _app, _document에서 작성돼 있는 HTML 코드 또한 정적 분석 대상으로 분류해 제공한다. 이는 단순히 자바스크립트 코드에 대한 향상뿐만 아니라 전체적인 Next.js 기반 웹 서비스의 성능 향상에 도움이 될 수 있다는 점에서 매우 유용하다.</p>
<p>또, 코어 웹 바이탈을 분석해 제공하는 기능도 포함되어 있다. Next.js로 작성된 코드라면 반드시 설치하자.</p>
<br>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="나만의-eslint-규칙-만들기">나만의 ESLint 규칙 만들기<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#%EB%82%98%EB%A7%8C%EC%9D%98-eslint-%EA%B7%9C%EC%B9%99-%EB%A7%8C%EB%93%A4%EA%B8%B0" class="hash-link" aria-label="나만의 ESLint 규칙 만들기에 대한 직접 링크" title="나만의 ESLint 규칙 만들기에 대한 직접 링크">​</a></h2>
<p>코드를 작성하다 보면 eslint-config나 eslint-plugin에서 제공하고 있지 않지만 같은 코드를 수정하는 조직 내부에서 필요로 하는 규칙 또는 코드의 변화로 인해 일관적으로 고쳐야 하는 코드가 있을 수 있다. 이런 코드를 사람이 일일히 수정하는 것은 비효율적이며 휴먼 에러를 일으킬 수 도 있다.</p>
<p>이런 경우에 사용할 수 있는 방법이나만의 ESLint 규칙을 생성하는 것이다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="이미-존재하는-규칙을-커스터마이징해서-적용하기">이미 존재하는 규칙을 커스터마이징해서 적용하기<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#%EC%9D%B4%EB%AF%B8-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%EA%B7%9C%EC%B9%99%EC%9D%84-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95%ED%95%B4%EC%84%9C-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0" class="hash-link" aria-label="이미 존재하는 규칙을 커스터마이징해서 적용하기에 대한 직접 링크" title="이미 존재하는 규칙을 커스터마이징해서 적용하기에 대한 직접 링크">​</a></h3>
<p><strong>import React를 제거하기 위한 ESLint 규칙 만들기</strong></p>
<p>리액트 17 버전부터는 새로운 JSX 런타임 덕분에 <code>import React</code> 구문이 필요 없어졌다. 해당 구문을 삭제하게 되면 아주 약간이나마 번들러의 크기를 줄일 수 있게 된다.</p>
<p>(수 천개의 컴포넌트들이 이 구문을 갖고있다고 생각해보자)</p>
<p><code>import React</code>문이 build 시에 트리쉐이킹으로 제거된다고 하더라도, 웹팩과 같은 번들러들이 트리쉐이킹을 하는 데 걸리는 시간을 줄일 수 있고 자연스럽게 빌드 속도 또한 빨라질 것이다.</p>
<p>해당 사항에 대해 리포트할 수 있는 ESLint 규칙을 만들어보자. no-restricted-imports를 커스터마이징해서 해당 이슈를 감지할 것 이다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">.eslintrc.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">rules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">'no-restricted-imports'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">paths</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 모듈명</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 모듈의 이름</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">importNames</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'default'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 에러 메세지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">"import React from 'react'는 react 17붙 더 이상 필요하지 않습니다. 필요한 것만 react로부터 import해서 사용해 주세요."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>useState</code>등 다른 API를 온전하게 사용하기 위해 <code>default export</code>만 금지시킨다.</p>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p>이러한 원리를 활용하면 트리쉐이킹이 되지 않는 lodash 같은 라이브러리를 <code>import</code> 하는 것도 방지할 수 있다.</p><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">rules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">'no-restricted-imports'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">paths</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'lodash'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">'lodash는 ComonJS로 작성돼 있어 트리쉐이킹이 되지 않아 번들 사이즈를 크게 합니다. lodash/* 형식으로 import 해주세요.'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="완전히-새로운-규칙-만들기">완전히 새로운 규칙 만들기<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#%EC%99%84%EC%A0%84%ED%9E%88-%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B7%9C%EC%B9%99-%EB%A7%8C%EB%93%A4%EA%B8%B0" class="hash-link" aria-label="완전히 새로운 규칙 만들기에 대한 직접 링크" title="완전히 새로운 규칙 만들기에 대한 직접 링크">​</a></h3>
<p><strong>new Date를 금지시키는 규칙</strong></p>
<p>자바스크립트 환경에서는 현재 시간을 알기 위해 <code>new Date()</code>를 사용하곤 한다. 그러나 이 현재 시간은 기기에 종속된 현재 시간으로, 기기의 현재 시간을 바꿔버리면 <code>new Date()</code>가 반환하는 현재 시간 또한 변경된다.</p>
<p>만약 개발하는 서비스가 기기에 의존적이지 않아야해서 서버시간을 반환하는 함수인 <code>ServerDate()</code> 함수를 만들어 이 함수만 사용해야 하는 상황의 ESLint 규칙을 만들어보자.</p>
<p>여기서 한 가지 조건은 <code>new Data(1664608053676)</code>이나 <code>new Date('2022-01-01')</code>은 허용해야 한다는 점이다.</p>
<p>espree가 분석한 <code>new Date()</code>의 AST를 살펴보자.</p>
<div class="language-json codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">new Date()를 espree로 분석해 만든 AST</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-json codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Program"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ExpressionStatement"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 해당 코드의 표현식 전체를 나타냄</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"expression"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ExpressionStatement에 어떤 표현이 들어가 있는지 확인 (ESLint에서 확인하는 하나의 노드 단위)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"NewExpression"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 해당 표현이 어떤 타입인지, 여기서는 생성자를 사용한 NewExpression임을 알 수 있음</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"callee"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// 생성자(new)를 사용한 표현식에서 생성자에게 전달하는 인수, 여기서는 Date임을 알 수 있음</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Identifier"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"end"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"range"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Date"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"arguments"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 생성자를 표현한 표현식에서 생성자에 전달하는 인수, 여긴 없으니 빈 배열</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"sourceType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"module"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>AST로 확인한 결과, 금지해야할 <code>new Date()</code>의 노드는 <code>type</code>이 <code>NewExpression</code>이며, <code>callee.name</code>이 <code>Date</code>이고, <code>ExpressionStatement.expression.arguments</code>가 빈 배열인 경우다.</p>
<p>이를 ESLint의 <code>create</code> 함수를 통해 규칙을 만들어보자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">AST를 기반으로 만든 ESLint 규칙</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@type</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment class-name keyword" style="color:#00009f;font-style:italic">import</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">(</span><span class="token doc-comment comment class-name string" style="color:#e3116c;font-style:italic">'eslint'</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">)</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">.</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">Rule</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">.</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">RuleModule</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">meta</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'suggestion'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">docs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'disalow use of the new Date()'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">recommended</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">fixable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'code'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'new Date()는 클라이언트에서 실행 시 해당 기기의 시간에 의존적이라 정확하지 않습니다. 현재 시간이 필요하다면 ServerDate()를 사용해 주세요.'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// NewExpression`이라고 하는 타입의 선택자를 키로 선언해서 new 생성자를 사용할 때 ESLint가 실행되도록 한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">NewExpression</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 해당 node를 기준으로 찾고자 하는 생성자인지 검증한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">callee</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Date'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">arguments</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// 이를 찾았다면 context.report를 통해 해당 코드 스멜을 리포트하고, message를 가리킨다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">report</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">node</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">messageId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'message'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// meta.message의 객체에 키 값을 선언해두면 해당 기 값을 가진 값을 가져오게 된다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function-variable function" style="color:#d73a49">fix</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">fixer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// 마지막으로 자동 수정하는 코드를 넣어줄 수 있다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> fixer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replaceText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ServerDate()'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><p>meta 필드는 해당 규칙과 관련된 정보를 나타내는 필드다. 여기서 사용 가능한 옵션은 <a href="https://eslint.org/docs/latest/developer-guide/working-with-rules#rule-basics" target="_blank" rel="noopener noreferrer">공식 홈페이지</a> meta 필드를 참고</p></div></div>
<p>규칙을 만들었으니 배포해보자. 규칙은 반드시 eslint-plugin 형태로 묶음 배포하는 것만 가능하다.</p>
<p>먼저 빈 패키지를 만든 다음, yo와 generate-eslint를 활용해 eslint-plugin을 구성할 환경을 빠르게 구성한다.</p>
<div class="language-zsh codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-zsh codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">yo eslint:plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yo eslint:rule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>환경 설정을 다하면 다음과 같은 구조로 디렉터리와 파일이 생성된다.</p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">📂eslint-plugin-5kdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📂docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┗ 📂rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┃ ┗ 📜no-new-date.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📂lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┣ 📂rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┃ ┗ 📜no-new-date.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┗ 📜index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📂tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┗ 📂rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃ ┃ ┗ 📜no-new-date.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📜.eslintrc.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📜.npmrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📜README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣ 📜package-lock.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┗ 📜package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>rules/no-new-date.js 파일에 작성한 규칙을 붙여넣자. 그리고 <code>docs</code>에는 해당 규칙을 위한 설명을, <code>tests</code>에는 테스트 코드를 작성한다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@fileoverview</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> 5kdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@author</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> 5kdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'use strict'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Requirements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> rule </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'../../../lib/rules/no-new-date'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">RuleTester</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'eslint'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">RuleTester</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -----------------------------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -----------------------------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ruleTester </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RuleTester</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ruleTester</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'no-new-date'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rule</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">valid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'new Date(2021, 1, 1)'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'new Date("2022-01-01")'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">invalid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'new Date()'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">errors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> rule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">output</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ServerDate()'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>마지막으로 npm publish로 배포한 다음, 원하는 프로젝트에서 설치해서 사용하면 된다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="주의할-점">주의할 점<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90" class="hash-link" aria-label="주의할 점에 대한 직접 링크" title="주의할 점에 대한 직접 링크">​</a></h3>
<p>ESLint를 잘못 설정해두면 원치 않는 결과가 계속해서 발생한다.</p>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="prettier와-충돌">Prettier와 충돌<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#prettier%EC%99%80-%EC%B6%A9%EB%8F%8C" class="hash-link" aria-label="Prettier와 충돌에 대한 직접 링크" title="Prettier와 충돌에 대한 직접 링크">​</a></h4>
<p>포매팅 도구인 Prettier도 ESLint와 마찬가지로 코드를 정적 분석해서 문제를 해결하지만, 지향하는 목표가 다르다.</p>
<ul>
<li><strong>ESLint</strong> : 코드의 잠재적인 문제 분석</li>
<li><strong>Prettier</strong> : 포매팅과 관련된 작업(줄바꿈, 들여쓰기, 따옴표 등)</li>
</ul>
<p>ESLint에서도 Prettier에서 처리하는 작업을 처리할 수 있기 때문에 충돌이 발생하여 에러가 발생한다. 이 문제를 해결하기 위해서는</p>
<ol>
<li>Prettier에서 제공하는 규칙을 어기지 않도록 ESLint에서 해당 규칙을 끄는 방법</li>
<li>자바스크립트나 타입스크립트는 ESLint에, 그 외의 파일은 모두 Prettier에 맡기는 방법(물리적 분리)<!-- -->
<ul>
<li>대신 자바스크립트에 추가적으로 필요한 Prettier 관련 규칙은 모두 eslint-plugin-prettier을 사용</li>
<li>Prettier에서 제공하는 모든 규칙을 ESLint에서 사용할 수 있는 규칙으로 만들어둔 플러그인</li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="규칙에-대한-예외처리">규칙에 대한 예외처리<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#%EA%B7%9C%EC%B9%99%EC%97%90-%EB%8C%80%ED%95%9C-%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC" class="hash-link" aria-label="규칙에 대한 예외처리에 대한 직접 링크" title="규칙에 대한 예외처리에 대한 직접 링크">​</a></h4>
<p>만약 일부 코드에서 특정 규칙을 임시로 제외시키고 싶을때 사용한다. 특정 줄만 제외하거나, 파일 전체를 제외하거나, 특정 범위에 걸쳐 제외 가능하다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// eslint-disable-line &lt;규칙&gt; - 특정 줄 제외</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// eslint-disable-next-line &lt;규칙&gt; - 다음 줄 제외</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* eslint-disable &lt;규칙&gt; - 특정 여러 줄 제외</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// eslint-disable &lt;규칙&gt; - 파일 전체 제외</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="eslint-버전-충돌">ESLint 버전 충돌<a href="https://5kdk.github.io/blog/2023/11/26/eslint-deep-dive#eslint-%EB%B2%84%EC%A0%84-%EC%B6%A9%EB%8F%8C" class="hash-link" aria-label="ESLint 버전 충돌에 대한 직접 링크" title="ESLint 버전 충돌에 대한 직접 링크">​</a></h4>
<p>이 문제를 미연에 방지하려면 설치하고자 하는 eslint-config, eslint-plugin이 지원하는 ESLint 버전을 확인하고, 또 설치하고자 하는 프로젝트에서 ESLint 버전을 어떻게 지원하고 있는지 살펴야한다.
ESLint의 공식문서에서는 ESLint의 의존성은 peerDependencies로 명시하도록 설정해 두라고 권장하고 있지만 이를 준수하지 못한 패키지를 설치할 때는 주의하자.</p>
<hr>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="ESLint" term="ESLint"/>
        <category label="JavaScript" term="JavaScript"/>
        <category label="TypeScript" term="TypeScript"/>
        <category label="React" term="React"/>
        <category label="Next.js" term="Next.js"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[모던 리액트 Deep dive 솔직 후기]]></title>
        <id>https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review</id>
        <link href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review"/>
        <updated>2023-11-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[모던 리액트 딥다이브를 읽고 남기는 서평입니다.]]></summary>
        <content type="html"><![CDATA[<p>지인에게 <strong>'모던 리액트 Deep dive'</strong> 발간 소식을 듣고, 책 정보를 찾아 보다가 이 책의 저자님이 제가 평소에 감명깊게 보던 블로그의 주인분이라는 것을 알게 되어, 고민 없이 해당 도서의 서포터즈 활동까지 지원하고 책을 구매하였다.</p>
<p>웅모님의 '모던 자바스크립트 Deep dive'로 JavaScript를 깊게 파고들 수 있었던 기억이 있는데, 현업에서 Next.js와 React를 다루고 있어 이 책을 통해 더 깊게 이해하고 실무에 적용하는 것을 기대하게되었다.</p>
<p>위키북스 '모던 리액트 Deep dive'의 서포터즈로 선정되면서 절반정도 읽은 시점의 책의 서평을 간단하게 남겨본다.</p>
<p><img decoding="async" loading="lazy" alt="modern-react-deep-dive" src="https://5kdk.github.io/assets/images/modern-react-deep-dive-80b3bba9817ae132937a81096f6b7175.webp" width="1280" height="720" class="img_praT"></p>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="이-책에서-다루는-내용에-대한-생각">이 책에서 다루는 내용에 대한 생각<a href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review#%EC%9D%B4-%EC%B1%85%EC%97%90%EC%84%9C-%EB%8B%A4%EB%A3%A8%EB%8A%94-%EB%82%B4%EC%9A%A9%EC%97%90-%EB%8C%80%ED%95%9C-%EC%83%9D%EA%B0%81" class="hash-link" aria-label="이 책에서 다루는 내용에 대한 생각에 대한 직접 링크" title="이 책에서 다루는 내용에 대한 생각에 대한 직접 링크">​</a></h2>
<p>먼저 책에서 다루는 내용을 살펴보면...</p>
<ul>
<li>리액트의 역사</li>
<li>리액트를 다루기 위한 자바스크립트 코어 지식</li>
<li>리액트의 핵심 요소와 훅</li>
<li>서버사이드 랜더링</li>
<li>리액트와 상태관리 라이브러리</li>
<li>디버깅, 앱 분석 방법</li>
<li>좋은 리액트 코드 작성을 위한 환경 구축, 배포 환경 구축</li>
<li>리액트 17, 18 변경 사항</li>
<li>Next.js 13과 리액트 18</li>
<li>코어 웹 바이탈</li>
<li>웹 성능 측정</li>
<li>리액트와 웹페이지 보안 이슈</li>
</ul>
<p>(임의로 그룹화 함, 목차와는 조금 다름)</p>
<p>책 이름이 <strong>모던 리액트 Deep dive</strong> 지만 React뿐만 아니라 프론트엔드 개발자라면 알아야 할 정보들도 함께 다루고 있다.</p>
<p>나에겐 Next.js와 웹 성능, 보안 등을 함께 다루고 있어 정말 좋은 구성이었지만 React의 사용 방법을 공부하는 느낌은 아니라 이미 React를 다뤄본 사람에게 좀 더 적합한 구성인 것 같다. React 공식문서에는 이 책에서 다루는 중요한 내용이 대거 빠져있는데 공식문서와 이 책을 병행하면 좋으리라 생각한다.</p>
<p>그리고 Next.js 14가 얼마 전 발표되어 새로 발간한 책이지만 이전 버전의 내용을 담아버린 책이 되어버렸다. (14버전이 너무 빨리 나와버렸다. 라이브러리, 프레임워크를 주제로 한 책은 피할 수 없는 부분...) 이런 아쉬운 점은 저자님 블로그 포스팅에서 찾아볼 수 있다.</p>
<blockquote>
<p><a href="https://yceffort.kr/2023/10/react-deep-dive" target="_blank" rel="noopener noreferrer"><em>모던 리액트 Deep dive가 출간되었습니다.</em></a></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="절반정도-읽은-시점의-느낀점">절반정도 읽은 시점의 느낀점<a href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review#%EC%A0%88%EB%B0%98%EC%A0%95%EB%8F%84-%EC%9D%BD%EC%9D%80-%EC%8B%9C%EC%A0%90%EC%9D%98-%EB%8A%90%EB%82%80%EC%A0%90" class="hash-link" aria-label="절반정도 읽은 시점의 느낀점에 대한 직접 링크" title="절반정도 읽은 시점의 느낀점에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="1-react-생태계의-명확한-용어">1. React 생태계의 명확한 용어<a href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review#1-react-%EC%83%9D%ED%83%9C%EA%B3%84%EC%9D%98-%EB%AA%85%ED%99%95%ED%95%9C-%EC%9A%A9%EC%96%B4" class="hash-link" aria-label="1. React 생태계의 명확한 용어에 대한 직접 링크" title="1. React 생태계의 명확한 용어에 대한 직접 링크">​</a></h3>
<p>이전에 읽었던 <strong>'모던 자바스크립트 Deep dive'</strong> 에서는 명확한 용어는 명확한 소통이 된라는 말이 나온다.</p>
<p>이 책은 React 생태계의 용어들을 명확하게 다루고 있어 이 React에 대한 소통 능력을 쌓기 적합하다.</p>
<p>나는 이를 '기본기'라고 생각하는데 이 기본기들은 실제 업무를 할 때 크게 도움이 된다.</p>
<p>예를 들어 같은 개발자여도 지식의 수준이 다를 수 있는데, 가지고 있는 지식이 다르더라도 용어를 정확히 알고 있다면 그 간극을 손쉽게 좁혀나갈 수 있다.</p>
<p>상대방 혹은 내가 모르는 지식이어도 기본기가 있다면(명확한 용어를 알고 있다면) 내 지식을 알려주기에도, 새로운 지식을 받아들이는 데도 수월하다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="2-동작원리를-기반으로한-이해">2. 동작원리를 기반으로한 이해<a href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review#2-%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC%EB%A5%BC-%EA%B8%B0%EB%B0%98%EC%9C%BC%EB%A1%9C%ED%95%9C-%EC%9D%B4%ED%95%B4" class="hash-link" aria-label="2. 동작원리를 기반으로한 이해에 대한 직접 링크" title="2. 동작원리를 기반으로한 이해에 대한 직접 링크">​</a></h3>
<p>JavaScript의 동작 원리를 모르고 JavaScript 코드를 짜는 것과 알고 짜는 것이 천지 차이인 듯, React도 마찬가지. 하지만 지금껏 이 책에서 다루는 근본적인 React 지식 정보들을 얻기란 쉽지 않았다.</p>
<p>기존의 문제점을 짚어주고, 이에 대한 해결책들을 동작 원리를 기반으로 설명해 주는 점들이 도움이 많이 되었다.</p>
<p>동작 원리를 이해해야 어느 코드가 좋은 코드인지 판별할 수 있고, 본인이 작성한 코드가 어떻게 동작할지, 즉 예측 가능한 React 코드를 작성하는 데에 큰 도움이 될 것 같다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="3-리액트-구성요소의-다양한-관점을-이해">3. 리액트 구성요소의 다양한 관점을 이해<a href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review#3-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%EA%B4%80%EC%A0%90%EC%9D%84-%EC%9D%B4%ED%95%B4" class="hash-link" aria-label="3. 리액트 구성요소의 다양한 관점을 이해에 대한 직접 링크" title="3. 리액트 구성요소의 다양한 관점을 이해에 대한 직접 링크">​</a></h3>
<p>React를 다루며 나타나는 상반되는 관점에 대해 각 진영을 대변하며 이야기를 나누는 점도 흥미롭다.</p>
<p>이전에 블로깅 했던 주제인 메모이제이션에 내 생각은 이 책을 보면서 좀 더 생각해 봐야 할 구실이 생겼고, 고차컴포넌트(HOC)에 대한 활용 고민도 좀 더 깊어졌다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="마치며">마치며<a href="https://5kdk.github.io/blog/2023/11/24/modern-react-deep-dive-review#%EB%A7%88%EC%B9%98%EB%A9%B0" class="hash-link" aria-label="마치며에 대한 직접 링크" title="마치며에 대한 직접 링크">​</a></h2>
<p>이 책에 대한 다양한 생각을 적어보았다. 현재 이 책의 내용을 바탕으로 실무 프로젝트에 점진적으로 적용하고 있는 중이다. 마치 능력자 사수에게 코드 리뷰를 받는 듯, 프로젝트에 바로 적용할 수 있는 사례들이 많이 포함되어 있어, 더욱 향상된 코드를 작성해 나갈 수 있을 것 같다.</p>
<p>또, 웹 보안을 주제로 정보를 수집하고 있는 팀 동료들에게 이 책을 강력히 추천하였는데, 동료들이 이 책을 읽은 후 매우 좋다는 반응을 보여주었고, 이 책의 보안 챕터를 중심으로 내용을 정리하고 있다. 이처럼 책은 실무에 종사하는 사람들에게도 큰 도움이 된다.</p>
<p>남은 절반 부분에서는 코어 웹 바이탈과 웹 최적화에 대한 내용이 포함되어 있어 이전에 혼자 검색하여 공부했던 지식과 비교해보면서 확인할 수 있는 기회가 될 것 같다.</p>
<p>Deep dive 시리즈는 모두 깊은 지식을 다루기 때문에, 이 책을 통해 React를 처음 배우려는 사람에게는 내용이 다소 복잡하게 느껴질 수 있다. 따라서, JavaScript와 React를 먼저 다루어본 후 이 책을 구매하여 깊게 공부하는 것을 추천한다. 만약 이미 React를 다루어봤다면, 말할 것도 없이 이 책을 강력히 추천하고 싶다.</p>
<blockquote>
<p><a href="https://www.yes24.com/Product/Goods/123161563" target="_blank" rel="noopener noreferrer">yes24 - 모던 리액트 Deep dive</a><br>
<a href="https://yceffort.kr/" target="_blank" rel="noopener noreferrer">저자 김용찬님의 블로그</a></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="Review" term="Review"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Next.js를 중심으로 한 코어 웹 바이탈 최적화]]></title>
        <id>https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs</id>
        <link href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs"/>
        <updated>2023-11-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[웹 성능 개선을 위해 코어 웹 바이탈 측정해보자.]]></summary>
        <content type="html"><![CDATA[<p>이전 포스팅에서 코어 웹 바이탈에 대해 살펴보고, 웹을 개선하기 위해 어떻게 코어 웹 바이탈을 측정할 수 있는지에 대해 알아보았다. 두 번째 단계로, 측정한 코어 웹 바이탈을 어떻게 개선할지 알아보자.</p>
<p>현재 담당하고 있는 프로젝트의 개발 환경인 Next.js 를 기준으로 정리해 보았다.</p>
<blockquote>
<p><em>이전 포스팅:</em><br>
<em><a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals">웹 성능 지표, 코어 웹 바이탈(CWV)</a></em><br>
<em><a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals">코어 웹 바이탈 측정을 위한 도구 모음</a></em></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="nextjs의-자동-이미지-최적화">Next.js의 자동 이미지 최적화<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#nextjs%EC%9D%98-%EC%9E%90%EB%8F%99-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B5%9C%EC%A0%81%ED%99%94" class="hash-link" aria-label="Next.js의 자동 이미지 최적화에 대한 직접 링크" title="Next.js의 자동 이미지 최적화에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="최적화되지-않은-이미지">최적화되지 않은 이미지<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%B5%9C%EC%A0%81%ED%99%94%EB%90%98%EC%A7%80-%EC%95%8A%EC%9D%80-%EC%9D%B4%EB%AF%B8%EC%A7%80" class="hash-link" aria-label="최적화되지 않은 이미지에 대한 직접 링크" title="최적화되지 않은 이미지에 대한 직접 링크">​</a></h3>
<div class="language-html codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-html codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">large-image.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Large Image</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>위 요소는 다음과 같은 몇 가지 사항을 수동으로 최적화해야 함을 의미한다:</p>
<ul>
<li>다양한 화면 크기에서 이미지가 반응하는지 확인</li>
<li>타사 도구 또는 라이브러리를 사용하여 이미지 최적화</li>
<li>뷰포트에 이미지가 들어올 때 Lazy-loading</li>
</ul>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="이미지-컴포넌트">이미지 컴포넌트<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8" class="hash-link" aria-label="이미지 컴포넌트에 대한 직접 링크" title="이미지 컴포넌트에 대한 직접 링크">​</a></h3>
<p>Next.js는 이러한 최적화를 즉시 처리할 수 있는 <a href="https://nextjs.org/docs/pages/api-reference/components/image" target="_blank" rel="noopener noreferrer">이미지 컴포넌트</a>를 제공한다.</p>
<p><code>next/image</code>를 사용하면 WebP와 같은 최신 형식(브라우저에서 지원하는 경우)의 이미지 크기 조정, 최적화 및 제공을 자동으로 수행할 수 있다.</p>
<p>이 컴포넌트는 뷰포트가 작은 기기에 큰 이미지를 전송하는 것을 방지하고 Next.js가 향후 이미지 형식을 채택하여 이를 지원하는 브라우저에 해당 이미지를 제공할 수 있도록 한다.</p>
<p>자동 이미지 최적화는 모든 이미지 소스에서 작동하며, 이미지가 CMS와 같은 외부 데이터 소스에서 호스팅되는 경우에도 이미지를 최적화할 수 있다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="자동-이미지-최적화는-어떻게-작동하나">자동 이미지 최적화는 어떻게 작동하나?<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%9E%90%EB%8F%99-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B5%9C%EC%A0%81%ED%99%94%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9E%91%EB%8F%99%ED%95%98%EB%82%98" class="hash-link" aria-label="자동 이미지 최적화는 어떻게 작동하나?에 대한 직접 링크" title="자동 이미지 최적화는 어떻게 작동하나?에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p><strong>온디멘드 최적화(On-demand Optimization)</strong><br>
<!-- -->Next.js는 빌드 시 이미지를 최적화하는 대신 사용자가 요청할 때 온디멘드 방식으로 이미지를 최적화한다. 정적 사이트 생성기 및 정적 전용 솔루션과 달리 10개의 이미지를 제공하든 천만 개의 이미지를 제공하든 빌드 시간이 늘어나지 않는다.</p>
</li>
<li>
<p><strong>지연 로드된 이미지(Lazy Loaded Images)</strong><br>
<!-- -->이미지는 기본적으로 lazy load 됩니다. 뷰포트 외부에 있는 이미지의 경우 페이지 속도에 불이익이 없습니다. 이미지는 뷰포트에 들어올 때만 로드된다.</p>
</li>
<li>
<p><strong>CLS 방지(Avoids CLS)</strong><br>
<!-- -->누적 레이아웃 이동(CLS)를 피하기 위해 이미지는 항상 렌더링됩니다.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><ul>
<li>온디멘드(On-demand)는 '요구에 따라' 또는 '필요할 때마다'라는 뜻으로, IT 분야에서는 사용자의 요청이 있을 때마다 서비스를 제공하는 방식을 의미한다.</li>
<li>온디멘드 방식에서는 서비스가 항상 실행 상태를 유지하지 않고, 사용자의 요청이 있을 때만 특정 작업을 수행하므로 리소스를 효율적으로 사용할 수 있다.</li>
</ul></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="이미지-컴포넌트-사용">이미지 컴포넌트 사용<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%82%AC%EC%9A%A9" class="hash-link" aria-label="이미지 컴포넌트 사용에 대한 직접 링크" title="이미지 컴포넌트 사용에 대한 직접 링크">​</a></h3>
<p><code>next/image</code>를 사용하여 Hero 이미지를 표시하도록 앱을 업데이트 해보겠다. 높이와 너비 속성은 원하는 렌더링 크기여야 하며, 가로 세로 비율은 소스 이미지와 동일해야 한다.</p>
<p><code>pages/index.js</code> 파일을 열고 파일 시작 부분에 다음/이미지에서 이미지 <code>import</code> 문을 추가한다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Image</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'next/image'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>그런 다음 Hero 이미지를 이미지 구성 요소로 바꾼다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">large-image.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Large Image</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Image</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">/large-image.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Large Image</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">width</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript number" style="color:#36acaa">3048</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">height</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript number" style="color:#36acaa">2024</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><em>Read more:</em><br>
<em><a href="https://nextjs.org/docs/basic-features/image-optimization" target="_blank" rel="noopener noreferrer">Automatic Image Optimization Documentation</a></em><br>
<em><a href="https://nextjs.org/docs/api-reference/next/image" target="_blank" rel="noopener noreferrer">API Reference for next/image</a></em></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="수동-이미지-최적화">수동 이미지 최적화<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%88%98%EB%8F%99-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B5%9C%EC%A0%81%ED%99%94" class="hash-link" aria-label="수동 이미지 최적화에 대한 직접 링크" title="수동 이미지 최적화에 대한 직접 링크">​</a></h2>
<p><code>next/image</code>는 이미지 최적화를 위한 다양한 기능을 제공한다. LQIP(Low Quality Image Placeholder), 파일 포맷 변경(예: JPG를 AVIF나 WebP로 변환), 이미지 크기 조정, 지연 로딩, 반응형 이미지 등이 포함된다.</p>
<p><code>next/image</code>가 이런 작업을 수행하는 것은 모두 서버에서 이루어진다. 메인 화면에 수많은 이미지가 있다고 가정하면, 사용자가 접속할 때마다 서버에서 이미지를 최적화한 후 브라우저로 전송하게 되는 것이다.</p>
<p>사용자가 많지 않은 서비스에서는 이러한 부분이 큰 문제가 되지 않지만, 많은 사용자가 찾는 서비스에서는 <code>next/image</code> 사용이 서버 메모리를 과도하게 소모할 수 있다. 따라서, 이러한 서비스에서는 <code>next/image</code>의 사용에 주의가 필요하다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="차세대-형식-사용하기">차세대 형식 사용하기<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%B0%A8%EC%84%B8%EB%8C%80-%ED%98%95%EC%8B%9D-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0" class="hash-link" aria-label="차세대 형식 사용하기에 대한 직접 링크" title="차세대 형식 사용하기에 대한 직접 링크">​</a></h3>
<p>모든 웹 브라우저가 WebP를 지원하지는 않는다. 그러나&nbsp;<code>&lt;source&gt;</code> 태그 와 함께&nbsp;<code>&lt;picture&gt;</code>&nbsp;태그를 사용하면, 이전 버전과 호환이 되어 모든 브라우저에서 올바르게 최적화된 이미지 형식을 표시할 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// X</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">image.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">image.png</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// O</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">image.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">image.avif</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="반응형-이미지">반응형 이미지<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EB%B0%98%EC%9D%91%ED%98%95-%EC%9D%B4%EB%AF%B8%EC%A7%80" class="hash-link" aria-label="반응형 이미지에 대한 직접 링크" title="반응형 이미지에 대한 직접 링크">​</a></h3>
<p>아이콘과 로고를 제외하고도 대부분의 이미지는 다양한 화면 크기에 맞게 크기를 조정해야 한다. 고정된 크기의 이미지를 생성하는 대신에, srcset을 활용하여 반응형 이미지를 생성할 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// X</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">large.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// O</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">small.webp 500w,</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">             medium.webp 1000w,</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">             large.webp 2000w</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">large.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// with picture tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">media</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">(max-width: 760px)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcSet</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">small.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">media</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">(min-width: 761px)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcSet</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">large.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="가로세로-비율-보존하기">가로세로 비율 보존하기<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EA%B0%80%EB%A1%9C%EC%84%B8%EB%A1%9C-%EB%B9%84%EC%9C%A8-%EB%B3%B4%EC%A1%B4%ED%95%98%EA%B8%B0" class="hash-link" aria-label="가로세로 비율 보존하기에 대한 직접 링크" title="가로세로 비율 보존하기에 대한 직접 링크">​</a></h3>
<p>화면 크기에 따라 이미지 크기를 변경하는 경우, 이미지의 가로세로 비율을 유지하는 것이 중요하다. 이미지의 가로세로 비율을 제대로 유지하지 않으면 예상치 못한 컨텐츠 레이아웃 이동(CLS) 현상이 발생할 수 있다.</p>
<p>HTML에서 이미지의 너비와 높이를 지정하고, 이를 적절한 CSS와 함께 사용하면 이 문제를 해결할 수 있다. 특히, CSS 높이를 "auto"로 설정하면 레이아웃 이동을 최소화하는 데 도움이 된다.</p>
<p>또한, 최신 CSS 속성 중 하나인 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio" target="_blank" rel="noopener noreferrer"><code>aspect-ratio</code></a>를 이용하면 이미지의 가로세로 비율을 자동으로 유지할 수 있다. 이 기능을 사용하면 이미지의 정확한 너비와 높이를 알 필요 없이 가로세로 비율만을 고려하면 되며, 이미지 최적화 작업이 더욱 간편해진다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">avatar</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> auto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> 200px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">avatar</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">height</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">200px</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">width</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">200px</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f"></span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// aspect-ratio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">my</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">image </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aspect</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ratio</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token operator" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">my-image</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">...</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="중요한-이미지-fetchpriority">중요한 이미지 fetchpriority<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%A4%91%EC%9A%94%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-fetchpriority" class="hash-link" aria-label="중요한 이미지 fetchpriority에 대한 직접 링크" title="중요한 이미지 fetchpriority에 대한 직접 링크">​</a></h3>
<p>콘텐츠가 포함된 가장 큰 페인트(LCP)의 일부로 첫 로드 시에 가져와야 할 특정 이미지가 있다고 가정할 때, <a href="https://web.dev/articles/fetch-priority?hl=ko" target="_blank" rel="noopener noreferrer"><code>fetchpriority="high"</code></a>&nbsp;를 사용하면 이 이미지를 우선적으로 처리해야 한다고 브라우저에 알려줄 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// X</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img-lcp.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// O</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img-lcp.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fetchpriority</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">high</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="지연-로딩lazy-loading과-async-decoding">지연 로딩(lazy loading)과 async decoding<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%A7%80%EC%97%B0-%EB%A1%9C%EB%94%A9lazy-loading%EA%B3%BC-async-decoding" class="hash-link" aria-label="지연 로딩(lazy loading)과 async decoding에 대한 직접 링크" title="지연 로딩(lazy loading)과 async decoding에 대한 직접 링크">​</a></h3>
<p><code>loading="lazy"</code>&nbsp;를 사용하는 것은 브라우저가 뷰 포트에 없는 이미지를 로드하는 데 귀중한 자원을 낭비하지 않도록 도와준다. 사용자들이 스크롤 하기 전까지 웹 페이지에 직접적으로 보이지 않는 모든 것은 우선순위에서 밀려나며, 이는 자원을 절약하고 현명하게 사용하여 웹사이트의 성능을 향상할 수 있다.</p>
<p>이 기능은 이미지가 페이지 하단에 위치하고, LCP 이미지가 아닌 경우에만 적합하다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// X</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img-lcp.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// O</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img-lcp.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">img.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">loading</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">lazy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">decoding</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">async</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// with picture tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">media</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">(max-width: 760px)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcSet</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">mobileUrl</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">media</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">(min-width: 761px)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcSet</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">desktopUrl</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  	</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">title</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">loading</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">lazy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="size-속성의-이해">size 속성의 이해<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#size-%EC%86%8D%EC%84%B1%EC%9D%98-%EC%9D%B4%ED%95%B4" class="hash-link" aria-label="size 속성의 이해에 대한 직접 링크" title="size 속성의 이해에 대한 직접 링크">​</a></h3>
<p>위에서 언급한 속성 에 대한 한 가지 중요한 주의 사항&nbsp;<code>srcset</code>은 브라우저가 가져올 가장 적합한 크기의 이미지를 선택하기 위해 이미지가 렌더링될 크기를 알아야 한다는 것이다.</p>
<p>즉, 이미지가 렌더링되면 브라우저는 실제 표시 크기를 알고 이를 픽셀 밀도로 곱한 다음 srcset에서 크기가 가장 가까운 가능한 이미지를 가져온다.</p>
<p>그러나&nbsp;초기&nbsp;페이지 로드의 경우 Chrome과 같은 브라우저에는 HTML에서 <code>img</code> 태그를 찾아 즉시 프리페치를 시작하는 프리로드 스캐너가 있다.</p>
<p>문제는 페이지가 렌더링되기 전에도 이런 일이 발생한다는 것인데,&nbsp;예를 들어 CSS는 아직 가져오지 않았으므로 이미지가 표시되는 방식과 크기에 대한 정보가 없기때문에&nbsp;결과적으로 브라우저는 몇 가지 가정을 해야한다.</p>
<p>기본적으로 브라우저는 모든 이미지가&nbsp;<code>100vw</code>전체 페이지 너비라고 가정하기 때문에 이는 최적과는 거리가 멀다.</p>
<p>size 속성이 유용한 것은 다음과 같다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">...</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">sizes</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">(max-width: 400px) 200px, (max-width: 800px) 100vw, 50vw</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">...</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f"></span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><em>참고자료:</em><br>
<em><a href="https://www.builder.io/blog/fast-images?_host=www.builder.io" target="_blank" rel="noopener noreferrer">Optimal Images in HTML</a></em></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="다이나믹-임포트">다이나믹 임포트<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EB%8B%A4%EC%9D%B4%EB%82%98%EB%AF%B9-%EC%9E%84%ED%8F%AC%ED%8A%B8" class="hash-link" aria-label="다이나믹 임포트에 대한 직접 링크" title="다이나믹 임포트에 대한 직접 링크">​</a></h2>
<p>지금부터는 초기 페이지 로드 시 타사 라이브러리에서 로드되는 자바스크립트의 양을 줄이는 방법을 알아보자.</p>
<p>Next.js는 자바스크립트에 대한 ES2020 <a href="https://nextjs.org/docs/pages/building-your-application/optimizing/lazy-loading" target="_blank" rel="noopener noreferrer">동적 <code>import()</code></a>를 지원한다. 이를 통해 자바스크립트 모듈을 동적으로 가져와서 작업할 수 있다. 또한 서버 측 렌더링(SSR)과 함께 작동한다.</p>
<p>다이나믹 임포트를 코드를 관리 가능한 청크로 분할하는 또 다른 방법이라고 생각하면 된다. 예시를 통해 알아보자.</p>
<p>일단 파일 시작부분의 모듈 <code>import</code> 문을 제거한다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// import Fuse from 'fuse.js';</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// import _ from 'lodash';</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fuse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Fuse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">countries</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">keys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'name'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">threshold</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이제 이 <code>import</code> 문을 제거했으므로 동적으로 가져온 라이브러리를 사용할 검색 <code>input</code>을 설정해보자.</p>
<p><code>input</code>을 다음과 같이 구성할 수 있다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Country search...</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">input</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript keyword" style="color:#00009f">async</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript parameter" style="color:#00009f">e</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript keyword" style="color:#00009f">const</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"> value </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=</span><span class="token tag script language-javascript" style="color:#00009f"> e</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">currentTarget</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript comment" style="color:#999988;font-style:italic">// Dynamically load libraries</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript keyword" style="color:#00009f">const</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript maybe-class-name" style="color:#00009f">Fuse</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript keyword control-flow" style="color:#00009f">await</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript keyword module" style="color:#00009f">import</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript string" style="color:#e3116c">'fuse.js'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript keyword module" style="color:#00009f">default</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript keyword" style="color:#00009f">const</span><span class="token tag script language-javascript" style="color:#00009f"> _ </span><span class="token tag script language-javascript operator" style="color:#393A34">=</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript keyword control-flow" style="color:#00009f">await</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript keyword module" style="color:#00009f">import</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript string" style="color:#e3116c">'lodash'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript keyword module" style="color:#00009f">default</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="display:inline-block;color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript keyword" style="color:#00009f">const</span><span class="token tag script language-javascript" style="color:#00009f"> fuse </span><span class="token tag script language-javascript operator" style="color:#393A34">=</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript keyword" style="color:#00009f">new</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript class-name" style="color:#00009f">Fuse</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">countries</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">keys</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">[</span><span class="token tag script language-javascript string" style="color:#e3116c">'name'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">]</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">threshold</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">0.3</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="display:inline-block;color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript keyword" style="color:#00009f">const</span><span class="token tag script language-javascript" style="color:#00009f"> searchResult </span><span class="token tag script language-javascript operator" style="color:#393A34">=</span><span class="token tag script language-javascript" style="color:#00009f"> fuse</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript method function property-access" style="color:#d73a49">search</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">value</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript method function property-access" style="color:#d73a49">map</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript parameter" style="color:#00009f">result</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> result</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">item</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="display:inline-block;color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript keyword" style="color:#00009f">const</span><span class="token tag script language-javascript" style="color:#00009f"> updatedResults </span><span class="token tag script language-javascript operator" style="color:#393A34">=</span><span class="token tag script language-javascript" style="color:#00009f"> searchResult</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">length</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">?</span><span class="token tag script language-javascript" style="color:#00009f"> searchResult </span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> countries</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript function" style="color:#d73a49">setResults</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">updatedResults</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="display:inline-block;color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript comment" style="color:#999988;font-style:italic">// Fake analytics hit</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript console class-name" style="color:#00009f">console</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript method function property-access" style="color:#d73a49">info</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">searchedAt</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> _</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript method function property-access" style="color:#d73a49">now</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">;</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">  </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f"></span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>다이나믹 임포트를 사용하면 페이지 로드 시 ‘사용하지 않는 자바스크립트 제거’ 문제가 해결됩니다. 또한 인터랙티브 타임 투 인터랙티브(TTI)가 개선되어 첫 입력 지연(FID)을 개선하는 데 도움이 된다.</p>
<blockquote>
<p><em>Read more:</em><br>
<em><a href="https://nextjs.org/docs/advanced-features/dynamic-import" target="_blank" rel="noopener noreferrer">Dynamic Imports Documentation</a></em></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="컴포넌트-다이나믹-임포트">컴포넌트 다이나믹 임포트<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%8B%A4%EC%9D%B4%EB%82%98%EB%AF%B9-%EC%9E%84%ED%8F%AC%ED%8A%B8" class="hash-link" aria-label="컴포넌트 다이나믹 임포트에 대한 직접 링크" title="컴포넌트 다이나믹 임포트에 대한 직접 링크">​</a></h2>
<p>초기 페이지 로딩에 필요하지 않은 React 컴포넌트로 시선을 돌려보자.</p>
<p>React 컴포넌트는 다이나믹 임포트를 사용해 가져올 수도 있지만, 하지만 이 경우에는 <code>next/dynamic</code>과 함께 사용하여 다른 React 컴포넌트처럼 작동하도록 한다.</p>
<p>이 방법을 사용해 <code>Hello World</code> 코드 샘플로 모달의 로딩을 지연시키는 예제를 살펴보자. 이렇게 하면 초기 페이지 로드에서 서드파티 라이브러리 두 개를 추가로 제거할 수 있다.</p>
<p>파일을 열고 파일 시작 부분에 <code>next/dynamic</code>에서 <code>dynamic</code>를 추가한다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">dynamic</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'next/dynamic'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>파일 시작 부분에서 컴포넌트 <code>import</code> 문을 제거한다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// import CodeSampleModal from '../components/CodeSampleModal';</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이제 파일 시작 부분에 다음을 추가하여 동적 컴포넌트로 임포트할 수 있다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">CodeSampleModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dynamic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'../components/CodeSampleModal'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">ssr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>CodeSampleModal</code>이 반환하는 기본 컴포넌트는<code>../components/CodeSampleModal</code>다. 일반 React 컴포넌트처럼 작동하며, 평소와 같이 프로퍼티를 전달할 수 있다.</p>
<p>서버에서는 이 컴포넌트가 필요하지 않으므로 <code>ssr: false</code>를 사용해 비활성화했다.</p>
<p>다음으로, 사용자가 필요로 할 때까지 이 컴포넌트의 로딩을 지연시켜보자. 이를 위해 모달이 열려 있어야 하는지 확인하는 조건부로 컴포넌트를 감싸고, 열려 있으면 로드할 수 있다.</p>
<p><code>CodeSampleModal</code> 컴포넌트를 다음과 같이 래핑한다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  isModalOpen </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">CodeSampleModal</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">isOpen</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">isModalOpen</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">closeModal</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setIsModalOpen</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript boolean" style="color:#36acaa">false</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이제 <code>isModalOpen</code>이 처음으로 <code>true</code>가 되면 필요한 JavaScript가 요청된다.</p>
<blockquote>
<p><em>Read more :</em><br>
<a href="https://nextjs.org/docs/advanced-features/dynamic-import" target="_blank" rel="noopener noreferrer">Dynamic Imports Documentation</a></p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="폰트-최적화">폰트 최적화<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%ED%8F%B0%ED%8A%B8-%EC%B5%9C%EC%A0%81%ED%99%94" class="hash-link" aria-label="폰트 최적화에 대한 직접 링크" title="폰트 최적화에 대한 직접 링크">​</a></h2>
<p><a href="https://almanac.httparchive.org/en/2020/fonts" target="_blank" rel="noopener noreferrer">데스크톱용 웹 페이지의 82%</a>가 웹 글꼴을 사용한다. 사용자 정의 글꼴은 사이트의 브랜딩, 디자인, 브라우저/기기 간 일관성을 위해 중요하다. 하지만 웹 글꼴을 사용한다고 해서 성능이 저하되어서는 안 된다.</p>
<p>Next.js에는 <a href="https://nextjs.org/docs/pages/building-your-application/optimizing/fonts" target="_blank" rel="noopener noreferrer">자동 웹폰트 최적화 기능</a>이 내장되어 있다. 기본적으로 Next.js는 빌드 시 글꼴 CSS를 자동으로 인라인 처리하여 글꼴 선언을 가져오기 위한 추가 왕복 작업을 제거한다. 그 결과 콘텐츠가 포함된 첫 페인트(FCP)와 콘텐츠가 포함된 최대 페인트(LCP)가 개선된다.</p>
<p>예를 들어 다음은 글꼴을 최적화한 Next.js의 전후 모습이다.</p>
<p>최적화하기 전에 추가 네트워크 요청이 필요하다:</p>
<div class="language-html codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-html codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://fonts.googleapis.com/css2?family=Inter</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>최적화 후 Next.js가 글꼴 CSS를 인라인 처리한다:</p>
<div class="language-html codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-html codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">style</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data-href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://fonts.googleapis.com/css2?family=Inter</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">  </span><span class="token style language-css atrule rule" style="color:#00a4db">@font-face</span><span class="token style language-css punctuation" style="color:#393A34">{</span><span class="token style language-css property" style="color:#36acaa">font-family</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css string" style="color:#e3116c">'Inter'</span><span class="token style language-css punctuation" style="color:#393A34">;</span><span class="token style language-css property" style="color:#36acaa">font-style</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css">normal.....</span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="서드파티-스크립트-최적화">서드파티 스크립트 최적화<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%84%9C%EB%93%9C%ED%8C%8C%ED%8B%B0-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%B5%9C%EC%A0%81%ED%99%94" class="hash-link" aria-label="서드파티 스크립트 최적화에 대한 직접 링크" title="서드파티 스크립트 최적화에 대한 직접 링크">​</a></h2>
<p>많은 애플리케이션은 분석, 광고, 고객 지원 위젯 등 다양한 유형의 기능을 포함하기 위해 타사 JavaScript를 사용한다. 그러나 타사에서 작성한 코드를 삽입하면 페이지 콘텐츠가 너무 일찍 로드되면 렌더링이 지연되고 사용자 성능에 영향을 미칠 수 있다.</p>
<p>Next.js는 모든 타사 스크립트의 로딩을 최적화하는 기본 제공 스크립트 컴포넌트를 제공하며, 개발자가 스크립트를 가져와 실행할 시기를 결정할 수 있는 옵션을 제공한다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="스크립트-컴포넌트-사용">스크립트 컴포넌트 사용<a href="https://5kdk.github.io/blog/2023/11/09/improving-cwv-nextjs#%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%82%AC%EC%9A%A9" class="hash-link" aria-label="스크립트 컴포넌트 사용에 대한 직접 링크" title="스크립트 컴포넌트 사용에 대한 직접 링크">​</a></h3>
<p>일반 HTML을 사용하면 외부 스크립트를 <code>next/head</code>에 수동으로 추가해야 한다:</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Head</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'next/head'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">IndexPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://www.googletagmanager.com/gtag/js?id=123</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next.js 스크립트 컴포넌트를 사용하면 <code>next/head</code>를 사용하지 않고도 컴포넌트의 어느 곳에나 추가할 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Script</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'next/script'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">IndexPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Script</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">strategy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">afterInteractive</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://www.googletagmanager.com/gtag/js?id=123</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>스크립트 컴포넌트에는 최적의 로딩을 위해 스크립트를 가져와 실행할 시기를 결정할 수 있는 전략 속성이 도입되었다. LCP에 부정적인 영향을 주지 않으려면 대부분의 타사 스크립트는 페이지의 모든 콘텐츠 로딩이 완료된 후 페이지가 인터랙티브해진 직후(<code>strategy="afterInteractive"</code>) 또는 브라우저 유휴 시간 동안 느리게(<code>strategy="lazyOnload"</code>) 로드되도록 지연시켜야 한다.</p>
<blockquote>
<p><em>Read more:</em><br>
<em><a href="https://nextjs.org/docs/pages/building-your-application/optimizing/scripts" target="_blank" rel="noopener noreferrer">Script Component</a></em><br>
<em><a href="https://nextjs.org/docs/pages/api-reference/components/script" target="_blank" rel="noopener noreferrer">API Reference for next/script</a></em></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="Web" term="Web"/>
        <category label="Core Web Vitals" term="Core Web Vitals"/>
        <category label="Next.js" term="Next.js"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[코어 웹 바이탈 측정을 위한 도구 모음]]></title>
        <id>https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals</id>
        <link href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals"/>
        <updated>2023-11-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[웹 성능 개선을 위해 코어 웹 바이탈 측정해보자.]]></summary>
        <content type="html"><![CDATA[<p>이전 포스팅에서 살펴본 <strong>"Core Web Vitals"</strong>, 각자의 프로젝트에서 코어 웹 바이탈을 개선하기 위한 첫 단계로 어떻게 코어 웹 바이탈을 측정할 수 있는 지에 대해 알아보자.</p>
<p>이것저것 찾아보고 정리하다 보니 크게 개발 시 유용한 측정 도구들과 지속적인 모니터링을 위한 도구들로 나누어졌다.</p>
<blockquote>
<p><em>이전 포스팅:</em><br>
<em><a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals">웹 성능 지표, 코어 웹 바이탈(CWV)</a></em></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="1-개발-시-유용한-측정-도구들">1. 개발 시 유용한 측정 도구들<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#1-%EA%B0%9C%EB%B0%9C-%EC%8B%9C-%EC%9C%A0%EC%9A%A9%ED%95%9C-%EC%B8%A1%EC%A0%95-%EB%8F%84%EA%B5%AC%EB%93%A4" class="hash-link" aria-label="1. 개발 시 유용한 측정 도구들에 대한 직접 링크" title="1. 개발 시 유용한 측정 도구들에 대한 직접 링크">​</a></h2>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="lighthouse">Lighthouse<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#lighthouse" class="hash-link" aria-label="Lighthouse에 대한 직접 링크" title="Lighthouse에 대한 직접 링크">​</a></h3>
<p>Lighthouse는 크롬 웹 스토어에서 다운 받을 수 있는 확장 프로그램이며, 개발자 도구에서도 손쉽게 만나볼 수 있다. Lighthouse는 제공된 URL에 대해 일련의 감사를 실행하는 방식으로 작동하고, 이러한 감사를 기반으로 페이지가 얼마나 잘 수행되었는지에 대한 보고서를 생성한다.</p>
<p><strong>Performance</strong>,&nbsp;<strong>Accessibility</strong>,&nbsp;<strong>Best Practices</strong>, <strong>SEO</strong>, <strong>PWA</strong> 의 다섯가지 기준에 따라 분석 점수를 확인할 수 있다.</p>
<div class="theme-admonition theme-admonition-warning admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>경고</div><div class="admonitionContent_ocWh"><p>타사 플러그인이 보고서에 영향을 미칠 수 있으므로 시크릿 모드에서 Lighthouse 보고서를 실행하는 것이 중요하다.<br>
<!-- -->(물론 build도 잊지 말아야 !)</p></div></div>
<p>이 중 Performance 점수가 현재 페이지의 성능을 측정한 점수이며, 이는 Metrics 지표의 세부 항목을 기준으로 측정된다.</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Lighthouse (v10) 바이탈 가중치</div><div class="admonitionContent_ocWh"><ul>
<li>콘텐츠가 포함된 최대 페인트(LCP): 25%</li>
<li>총 차단 시간*(TBT): 30%</li>
<li>최초 콘텐츠가 포함된 페인트(FCB): 10%</li>
<li>속도 지수(Speed Index): 10%</li>
<li>누적 레이아웃 이동(CLS): 25%</li>
</ul><p>* 첫 입력 지연(FCP)과 유사</p></div></div>
<br>
<p><img decoding="async" loading="lazy" alt="lighthouse example 1" src="https://5kdk.github.io/assets/images/lighthouse-1-b6e9adc89d45feca2ffba3c11149d65c.webp" width="1006" height="1021" class="img_praT"></p>
<p>개선이 필요한 영역이 있는 경우 보고서에서 개선 방법에 대한 인사이트도 찾아 볼 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="lighthouse example 2" src="https://5kdk.github.io/assets/images/lighthouse-2-582e0b2214ee7cf3fcc226c09a0a5eed.webp" width="1008" height="734" class="img_praT"></p>
<p><img decoding="async" loading="lazy" alt="lighthouse example 3" src="https://5kdk.github.io/assets/images/lighthouse-3-8895636269a1bc9f0eab76f421661dee.webp" width="996" height="562" class="img_praT"></p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="unlighthouse">Unlighthouse<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#unlighthouse" class="hash-link" aria-label="Unlighthouse에 대한 직접 링크" title="Unlighthouse에 대한 직접 링크">​</a></h3>
<p>웹 사이트의 모든 단일 페이지에 대해 Lighthouse 보고서를 실행하는 오픈소스 도구이며 모든 작업을 병렬로 수행하므로 몇 분 안에 수십, 수백 개의 페이지를 분석하여 실행하기 적합하다.</p>
<p><img decoding="async" loading="lazy" alt="unlighthouse homepage image" src="https://5kdk.github.io/assets/images/unlighthouse-1-1458495633964f381215eb4fbb38ee19.webp" width="1789" height="1115" class="img_praT"></p>
<p>새 디렉토리를 만든 다음 아래 코드로 unlighthouse를 실행하면 웹 사이트의 성능을 보여주는 UI가 나타난다.</p>
<div class="language-shell codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-shell codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">npx unlighthouse </span><span class="token parameter variable" style="color:#36acaa">--site</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your-site</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OR pnpm dlx unlighthouse --site &lt;your-site&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="unlighthouse example" src="https://5kdk.github.io/assets/images/unlighthouse-2-cc3126042f708037f2a9a30e27683f6d.webp" width="3360" height="2049" class="img_praT"></p>
<blockquote>
<p><em>Read more:</em><br>
<em><a href="https://unlighthouse.dev/" target="_blank" rel="noopener noreferrer">Unlighthouse 공식 사이트</a></em></p>
</blockquote>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="web-vital-확장-프로그램">Web vital 확장 프로그램<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#web-vital-%ED%99%95%EC%9E%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8" class="hash-link" aria-label="Web vital 확장 프로그램에 대한 직접 링크" title="Web vital 확장 프로그램에 대한 직접 링크">​</a></h3>
<p>Web Vitals 확장 프로그램은 크롬 웹 스토어에서 무료로 다운로드 받을 수 있으며, 확장프로그램 아이콘을 클릭하면 현재 웹페이지의 코어 웹 바이탈 점수를 확인할 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="web vital extension image" src="https://5kdk.github.io/assets/images/web-vitals-1-a35ff3c98a74f7eb1e7c0bf9681074be.webp" width="1166" height="762" class="img_praT"></p>
<p>Web Vitals 확장 프로그램은 단순히 점수를 보여주는 것 이상의 기능을 제공하는데, 위 이미지처럼 <strong>Console logging 옵션을 활성화</strong>를 하면, 개발자 도구의 콘솔 창에서 실시간으로 코어 웹 바이탈 점수를 확인할 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="web vital extension example 1" src="https://5kdk.github.io/assets/images/web-vitals-2-87c85b275de051c64805b6bc81616173.webp" width="758" height="344" class="img_praT"></p>
<p>페이지 로드 시간과 같은 실시간 정보뿐만 아니라, LCP(Largest Contentful Paint, 콘텐츠가 포함된 최대 페인트) 요소에 대한 정보도 함께 제공되므로, 웹사이트 성능의 병목 현상을 더욱 쉽게 찾아낼 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="web vital extension example 2" src="https://5kdk.github.io/assets/images/web-vitals-3-31d818ae172288dbe8792bd26c4da4de.webp" width="865" height="408" class="img_praT"></p>
<p><img decoding="async" loading="lazy" alt="web vital extension example 3" src="https://5kdk.github.io/assets/images/web-vitals-4-e96b7e69df957994899f52e8529c640a.webp" width="1244" height="576" class="img_praT"></p>
<p>또한 2024년 3월부터 FID(First Input Delay, 최초 입력 반응 시간)를 대체하여 사용자 상호작용에 대한 웹 페이지의 <strong>전반적인 응답성을 평가하는 측정 지표인 INP(Interactive Notification Performance)에 대한 정보도 실시간으로 제공</strong>한다.</p>
<p><img decoding="async" loading="lazy" alt="web vital extension example 4" src="https://5kdk.github.io/assets/images/web-vitals-5-b04912e6e52a3c36ce42df5500830c15.webp" width="1250" height="505" class="img_praT"></p>
<blockquote>
<p><em>Read more:</em><br>
<em><a href="https://web.dev/articles/inp?hl=ko" target="_blank" rel="noopener noreferrer">Interaction to Next Paint(다음 페인트와의 상호작용)(INP) &nbsp;|&nbsp; Articles &nbsp;|&nbsp; web.dev</a></em></p>
</blockquote>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="2-지속적인-모니터링을-위한-도구들">2. 지속적인 모니터링을 위한 도구들<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#2-%EC%A7%80%EC%86%8D%EC%A0%81%EC%9D%B8-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%8F%84%EA%B5%AC%EB%93%A4" class="hash-link" aria-label="2. 지속적인 모니터링을 위한 도구들에 대한 직접 링크" title="2. 지속적인 모니터링을 위한 도구들에 대한 직접 링크">​</a></h2>
<p>사이트를 최적화한 후에는 계속 반복할 수 있도록 운영 중에 모니터링하는 것이 중요하다. 코어 웹 바이탈을 모니터링할 때는 일회성 lab 테스트에 의존하기보다는 장기간에 걸쳐 추적하는 것이 중요하다.</p>
<blockquote>
<p><em>Read more:</em><br>
<em><a href="https://web.dev/articles/lab-and-field-data-differences?hl=ko" target="_blank" rel="noopener noreferrer">실험실 및 현장 데이터가 다를 수 있는 이유와 해야 할 일 &nbsp;|&nbsp; Articles &nbsp;|&nbsp; web.dev</a></em></p>
</blockquote>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="google-search-console">Google Search Console<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#google-search-console" class="hash-link" aria-label="Google Search Console에 대한 직접 링크" title="Google Search Console에 대한 직접 링크">​</a></h3>
<p>구글 서치 콘솔의 페이지 경험 보고서에서는 사이트 방문자의 사용자 환경에 관한 요약을 확인할 수 있다. 구글에서는 사이트의 개별 URL에 관한 페이지 경험 측정항목을 평가하고 이를 구글 검색결과의 URL 순위 결정 신호로 사용한다.</p>
<p><img decoding="async" loading="lazy" alt="google search console example 1" src="https://5kdk.github.io/assets/images/search-console-1-006c8b5923dadb11d08b083d1a3488a0.webp" width="1252" height="1117" class="img_praT"></p>
<p>구글 서치 콘솔을 통해 웹사이트의 코어 웹 바이탈를 분석하는 것도 가능하다. 크롤링된 모든 페이지를 '느림', '개선이 필요함', '좋음' 세 가지 카테고리로 분류하여 제공한다. 이를 통해 웹사이트의 각 URL이 코어 웹 바이탈 지표를 충족하는지 쉽게 확인할 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="google search console example 2" src="https://5kdk.github.io/assets/images/search-console-2-4101afb14b1d1041dfc9c9c0a3d159a9.webp" width="1261" height="926" class="img_praT"></p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="pagespeed-insights">PageSpeed Insights<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#pagespeed-insights" class="hash-link" aria-label="PageSpeed Insights에 대한 직접 링크" title="PageSpeed Insights에 대한 직접 링크">​</a></h3>
<p>PSI(PageSpeed Insights)의 실제 사용자 환경 데이터는&nbsp;<a href="https://developers.google.com/web/tools/chrome-user-experience-report?hl=ko" target="_blank" rel="noopener noreferrer">Chrome 사용자 환경 보고서</a>&nbsp;(CrUX) 데이터 세트를 기반으로 한다. PSI에서는 지난 28일의 수집 기간 동안 실제 사용자의&nbsp;<a href="https://web.dev/fcp/?hl=ko" target="_blank" rel="noopener noreferrer">첫 번째 콘텐츠 페인트</a>&nbsp;(FCP),&nbsp;<a href="https://web.dev/fid/?hl=ko" target="_blank" rel="noopener noreferrer">최초 입력 반응 시간</a>&nbsp;(FID),&nbsp;<a href="https://web.dev/lcp/?hl=ko" target="_blank" rel="noopener noreferrer">콘텐츠가 포함된 최대 페인트</a>&nbsp;(LCP),&nbsp;<a href="https://web.dev/cls/?hl=ko" target="_blank" rel="noopener noreferrer">레이아웃 변경 횟수</a>&nbsp;(CLS),&nbsp;<a href="https://web.dev/inp/?hl=ko" target="_blank" rel="noopener noreferrer">다음 페인트와의 상호작용</a>&nbsp;(INP) 경험을 보고한다. PSI에서는 실험 측정항목인&nbsp;<a href="https://web.dev/ttfb/?hl=ko" target="_blank" rel="noopener noreferrer">TTFB (Time to First Byte)</a>의 경험도 보고한다.</p>
<details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary><b>Chrome 사용자 환경 보고서&nbsp;(CrUX)</b></summary><div><div class="collapsibleContent_RtnQ"><div><div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><p>성능을 측정하는 또 다른 훌륭한 무료 오픈소스 방법은 <a href="https://developers.google.com/web/tools/chrome-user-experience-report" target="_blank" rel="noopener noreferrer">Chrome 사용자 경험 보고서</a> 데이터세트를 사용하는 것이다.</p><p>Chrome 사용자 경험 보고서는 실제 Chrome 사용자가 웹에서 인기 있는 목적지를 경험하는 방식에 대한 사용자 경험 지표를 제공한다.</p><p>이 데이터 세트는 <a href="https://console.cloud.google.com/bigquery?project=chrome-ux-report&amp;pli=1" target="_blank" rel="noopener noreferrer">BigQuery</a>에서 공개적으로 사용할 수 있으며, <a href="https://lookerstudio.google.com/overview?" target="_blank" rel="noopener noreferrer">Google 데이터 스튜디오</a>에서 완전히 무료로 사용할 수도 있다.</p><p>다행히도 웹사이트의 성능을 추적하기 위한 템플릿으로 사용할 수 있는 <a href="https://lookerstudio.google.com/u/0/datasources/create?connectorId=AKfycbxk7u2UtsqzgaA7I0bvkaJbBPannEx0_zmeCsGh9bBZy7wFMLrQ8x24WxpBzk_ln2i7" target="_blank" rel="noopener noreferrer">오픈소스 대시보드</a>가 있다.</p><p>이 데이터 세트의 유일한 단점은 웹 사이트가 CrUX 보고서에 포함되려면 의미 있는 방문 횟수가 있어야 하며, 그렇지 않으면 데이터 부족으로 인해 보고서에 포함되지 않는다는 것이다. 따라서 작업 중이거나 최근에 만든 웹사이트에는 적합하지 않을 수 있다.</p><p>또한 데이터는 월 단위로 업데이트되며, 보통 한 달이 끝나고 약 15일 후에 데이터를 확인할 수 있으므로 코어 웹 바이탈 점수를 개선하려는 경우 가장 실용적이지 않을 수 있다.</p><p><img decoding="async" loading="lazy" alt="data-studio.png" src="https://5kdk.github.io/assets/images/data-studio-ca7d873da4669f1c2541513e2b56db66.webp" width="1600" height="1196" class="img_praT"></p><blockquote>
<p><em>Read more:</em><br>
<em>Google: <a href="https://web.dev/chrome-ux-report-data-studio-dashboard/" target="_blank" rel="noopener noreferrer">Example Dashboard (copy for free)</a></em></p>
</blockquote></div></div></div></div></div></details>
<blockquote>
<p><em>Read more:</em><br>
<a href="https://web.dev/articles/chrome-ux-report?hl=ko" target="_blank" rel="noopener noreferrer">Chrome UX 보고서를 통해 현장 성능 살펴보기</a></p>
</blockquote>
<p>특정 페이지의 사용자 환경 데이터를 표시하려면 CrUX 데이터 세트에 포함될 만큼 충분한 데이터가 있어야 한다. 페이지가 최근에 게시되었거나 실제 사용자의 샘플이 너무 적은 경우 데이터가 충분하지 않을 수 있다. 이 경우 PSI는 출처 수준 세부사항으로 되돌아가며, 웹사이트의 모든 페이지에 있는 모든 사용자 환경을 포함한다. 출처에 데이터가 충분하지 않을 때도 있는데, 이 경우 PSI에서 실제 사용자 환경 데이터를 표시할 수 없다.</p>
<p><img decoding="async" loading="lazy" alt="amazon.com에 대한 보고서" src="https://5kdk.github.io/assets/images/pagespeed-insights-feeab5961cf224bb08696d3b539b8305.webp" width="1086" height="1074" class="img_praT"></p>
<p>이하는 Lighthouse와 같다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="nextjs-speed-insights">Next.js Speed Insights<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#nextjs-speed-insights" class="hash-link" aria-label="Next.js Speed Insights에 대한 직접 링크" title="Next.js Speed Insights에 대한 직접 링크">​</a></h3>
<p><a href="https://nextjs.org/analytics" target="_blank" rel="noopener noreferrer">Next.js Speed Insights</a> 를 사용하면 코어 웹 바이탈을 사용하여 페이지의 성능을 분석하고 측정할 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="vercel-analytics" src="https://5kdk.github.io/assets/images/vercel-analytics-987a01c7b034a663ee12c26415521573.webp" width="2464" height="1726" class="img_praT"></p>
<p>Vercel 배포에서 아무것도 구성하지 않은 상태에서 실제 경험 점수를 수집할 수 있다.</p>
<blockquote>
<p><em>Read more:</em><br>
<a href="https://vercel.com/docs/concepts/speed-insights?utm_campaign=no-campaign#metrics?utm_source=next-site&amp;utm_medium=learnpages&amp;utm_campaign=no-campaign" target="_blank" rel="noopener noreferrer">Speed Insights Overview</a></p>
</blockquote>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="커스텀-레포팅">커스텀 레포팅<a href="https://5kdk.github.io/blog/2023/11/01/measure-core-web-vitals#%EC%BB%A4%EC%8A%A4%ED%85%80-%EB%A0%88%ED%8F%AC%ED%8C%85" class="hash-link" aria-label="커스텀 레포팅에 대한 직접 링크" title="커스텀 레포팅에 대한 직접 링크">​</a></h3>
<p>Next.js Speed Insights에서 사용하는 built-in relayer 를 사용하여 데이터를 자체 서비스로 전송하거나 Google 애널리틱스로 푸시할 수도 있다.</p>
<p>이를 위해 Next.js에서 제공하는 <code>reportWebVitals</code> 함수를 활용할 수 있다.</p>
<div class="language-shell codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-shell codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">npx create-next-app@latest nextjs-lighthouse --use-npm </span><span class="token parameter variable" style="color:#36acaa">--example</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://github.com/vercel/next-learn/tree/main/seo"</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>pages/_app.js</code>를 열고 다음 함수를 내보낸다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reportWebVitals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">metric</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">metric</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 콘솔 로그를 사용하여 실시간으로 메트릭을 살펴보는 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>그런 다음 애플리케이션을 빌드하고 시작해보면,</p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">npm run build &amp;&amp; npm run start</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Chrome을 열면 개발자 도구 콘솔에 메트릭이 표시된다. 또한 페이지와 상호 작용할 때만 <strong>FID</strong>가 트리거된다는 것을 알 수 있다.</p>
<blockquote>
<p><em>Read more:</em><br>
<em>Next.js: <a href="https://nextjs.org/docs/pages/building-your-application/optimizing/analytics" target="_blank" rel="noopener noreferrer">Measuring Performance</a></em></p>
</blockquote>
<hr>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="Web" term="Web"/>
        <category label="Core Web Vitals" term="Core Web Vitals"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[웹 성능 지표, 코어 웹 바이탈(CWV)]]></title>
        <id>https://5kdk.github.io/blog/2023/10/24/core-web-vitals</id>
        <link href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals"/>
        <updated>2023-10-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[프론트엔드 개발자가 꼭 알아야할, 웹 성능의 지표 코어 웹 바이탈.]]></summary>
        <content type="html"><![CDATA[<br>
<blockquote>
<p>성능은 회사의 수익에 직접적인 영향을 미쳤습니다.<br>
<!-- -->Performance has directly impacted the company’s bottom line.</p>
<p><strong><em>Pinterest</em></strong></p>
</blockquote>
<p>웹 바이탈(Web Vitals)은 웹에서 최종 사용자 페이지 경험을 측정하기 위한 통합 지침과 지표를 제공하기 위해 Google에서 만든 이니셔티브다.</p>
<details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary><b>유지율</b></summary><div><div class="collapsibleContent_RtnQ"><div><div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><ul>
<li>Pinterest는 체감 대기 시간을 <strong>40%</strong> 줄였고, 그 결과 검색 엔진 트래픽과 가입이 <strong>15%</strong> 증가했다.</li>
<li>COOK은 평균 페이지 로드 시간을 <strong>850ms</strong> 단축하여 전환율을 <strong>7%</strong> 높이고 이탈률을 <strong>7%</strong> 낮추었으며 세션당 페이지 수를 <strong>10%</strong> 증가시켰다.</li>
<li>성능 저하가 비즈니스 목표에 미칠 수 있는 부정적인 영향에 대한 연구 결과도 있다. 예를 들어, BBC는 사이트 로딩이 1초 더 걸릴 때마다 **10%**의 사용자를 추가로 잃는다는 사실을 발견했다.</li>
</ul></div></div></div></div></div></details>
<details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary><b>전환율</b></summary><div><div class="collapsibleContent_RtnQ"><div><div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><ul>
<li>Mobify의 경우 홈페이지 로딩 속도가 <strong>100ms</strong> 감소할 때마다 세션 기반 전환율이 <strong>1.11%</strong> 증가하여 연평균 약 <strong>38만 달러</strong>의 매출 증가를 달성했다. 또한 결제 페이지 로딩 속도가 <strong>100ms</strong> 감소할 때마다 세션 기반 전환율이 <strong>1.55%</strong> 증가하여 연평균 약 <strong>53만 달러</strong>의 매출 증가를 달성했다.</li>
<li>AutoAnything이 페이지 로드 시간을 절반으로 줄인 후 매출이 <strong>12~13%</strong> 증가했다.</li>
<li>소매업체인 Furniture Village는 사이트 속도를 감사하고 발견된 문제를 해결하기 위한 계획을 수립하여 페이지 로딩 시간을 <strong>20%</strong> 단축하고 전환율을 <strong>10%</strong> 증가시켰다.</li>
</ul></div></div></div></div></div></details>
<p>사용자 경험에 있어 속도는 중요하다. 한 소비자 연구에 따르면 모바일 속도 지연에 대한 스트레스 반응은 공포 영화를 보거나 수학 문제를 풀 때와 비슷하며, 소매점에서 계산대에서 줄을 서서 기다릴 때보다 더 큰 것으로 나타났다.</p>
<p>코어 웹 바이탈은 웹 바이탈의 하위 집합으로 현재 로딩, 상호 작용 및 시각적 안정성을 측정하는 세 가지 지표로 구성되어 있다.</p>
<ul>
<li><strong>LCP</strong> (콘텐츠가 포함된 최대 페인트)</li>
<li><strong>FID</strong> (첫 번째 입력 반응 시간)</li>
<li><strong>CLS</strong> (누적 레이아웃 이동)</li>
</ul>
<p>이 세 가지 지표에서 높은 점수를 받으면 사용자에게 더 원활한 웹사이트 경험을 제공할 수 있다.</p>
<p>각 코어 웹 바이탈 지표에서 낮은 점수를 받은 웹사이트는 Google이 코어 웹 바이탈을 검색 알고리즘의 순위 요소로 사용하기 시작하면서 검색 엔진 순위에 영향을 미칠 수 있는데, 낮은 바이탈은 웹 트래픽과 비즈니스에 영향을 받는다.</p>
<blockquote>
<p>이러한 권장 사항의 배경이 된 연구 및 방법론에 대해 자세히 알아보려면,<br>
<a href="https://web.dev/articles/defining-core-web-vitals-thresholds?hl=ko" target="_blank" rel="noopener noreferrer"><strong>“핵심 웹 바이탈 지표 임계값 정의하기”</strong></a>를 참고</p>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="개요">개요<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#%EA%B0%9C%EC%9A%94" class="hash-link" aria-label="개요에 대한 직접 링크" title="개요에 대한 직접 링크">​</a></h2>
<p>지금부터 다양한 지표, 코어 웹 바이탈이 SEO에 미칠 수 있는 영향, 사용자 경험에 미치는 중요성에 대해 살펴보자.</p>
<p>코어 웹 바이탈을 측정할 때는 세 가지 값이 있다: <strong>“양호”</strong>, <strong>“개선 필요”</strong>, <strong>“미흡”</strong>,
이러한 값은 측정 대상 바이탈에 따라 다르다.</p>
<p><img decoding="async" loading="lazy" alt="vitals-light.png" src="https://5kdk.github.io/assets/images/vitals-light-dabd82a4f07d24c398e354d4a39d00ed.webp" width="2062" height="960" class="img_praT"></p>
<p>코어 웹 바이탈은 두 가지 방법으로 접근할 수 있다:</p>
<ol>
<li><strong>각 지표에서 가능한 한 가장 높은 점수를 받으려고 노력하기.</strong><br>
<!-- -->완벽을 추구하는 것은 좋지만 종속성이 많은 대규모 웹사이트에서는 까다로울 수 있다.</li>
<li><strong>동종 업계의 경쟁업체를 벤치마킹하기</strong><br>
<!-- -->Google 검색에서 완벽하게 최적화된 모든 웹사이트와 경쟁하는 것이 아니라 타겟 키워드에 대해 순위를 매기는 다른 웹사이트와 경쟁하는 것이다.</li>
</ol>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="largest-contentful-paint-lcp">Largest Contentful Paint (LCP)<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#largest-contentful-paint-lcp" class="hash-link" aria-label="Largest Contentful Paint (LCP)에 대한 직접 링크" title="Largest Contentful Paint (LCP)에 대한 직접 링크">​</a></h2>
<p><img decoding="async" loading="lazy" alt="lcp.avif" src="https://5kdk.github.io/assets/images/lcp-45c25a280efd163dbdb754cadba276ba.webp" width="750" height="500" class="img_praT"></p>
<p>이전에는 웹 개발자가 웹페이지의 기본 콘텐츠가 얼마나 빨리 로드되고 사용자에게 표시되는지 측정하는 것이 어려웠다.
<a href="https://developer.mozilla.org/docs/Web/Events/load" target="_blank" rel="noopener noreferrer">load</a>&nbsp;또는&nbsp;<a href="https://developer.mozilla.org/docs/Web/Events/DOMContentLoaded" target="_blank" rel="noopener noreferrer">DOMContentLoaded</a> 이벤트와 같은 이전 측정 항목은 사용자에게 화면에 표시되는 것과 반드시 일치하지는 않기 때문에 효과적이지 않았다.</p>
<p>LCP(Largest Contentful Paint, 콘텐츠가 포함된 최대 페인트) 지표은 페이지의 로딩 성능을 살펴본다. 전체 웹 페이지를 로드하는 데 걸리는 시간을 측정하지는 않지만, 웹 페이지가 얼마나 빠르게 로드되고 있는지를 나타내는 좋은 벤치마크를 제공한다.</p>
<p>LCP는 페이지에서 가장 큰 요소를 뷰포트에 표시하는 데 걸리는 시간을 측정한다. 이 요소는 페이지의 주요 공간을 차지하는 큰 텍스트 블록, 비디오 또는 이미지일 수 있다.</p>
<div class="theme-admonition theme-admonition-warning admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>경고</div><div class="admonitionContent_ocWh"><p>페이지 로딩이 시작될 때부터 첫 번째 요소가 화면에 렌더링될 때까지의 시간을 측정하는 <a href="https://web.dev/articles/fcp" target="_blank" rel="noopener noreferrer">FCP</a>(First Contentful Paint, 최초 콘텐츠가 포함된 페인트)가 아님</p></div></div>
<p>DOM이 렌더링되면 페이지에서 가장 큰 요소가 변경될 수 있다. LCP는 가장 큰 이미지나 요소가 화면에 표시될 때까지 계산을 멈추지 않는다.</p>
<p><img decoding="async" loading="lazy" alt="lcp-example.avif" src="data:image/webp;base64,UklGRv4cAABXRUJQVlA4WAoAAAAgAAAANwQA9gEASUNDUEgMAAAAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t//9WUDggkBAAAPDLAJ0BKjgE9wE+kUSdTKWjoyWhMYigsBIJaW7hcQCw7XV9jPCZ7zdNgO7v+YXQH7K+KMnn5ztAH9c9TXmCfpr+pnq5epDzAfs3+3nu++kT0AP6z/m+s29ADy3v3U+DP9yf2x9pXVq/Pn+V7fsivPCjInqd5nABuraUGav49Prrp0vYp6LgU70vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb0vb183vXBe8dY3sguk3vW6/Cl1UvcDSb3rgveOsb2QXSb3qS1UvX8Z6Y31kINk3vXBe8dY25Rg7NhWnN2aSdJveuC946xvZBdJeqXt68GRARIdLfHDrAZLItfiWQWHkOahzYOzYOzZK2Ovs2DwtyXL8hGQFhgcL6mOZVV219YOzYOzYOzYRvs2Fa1VRsC587rbYgtyuLQBYyhMtHP35n35n35t05sHZv2b1p8WmRz1bu4vKFnkuzW7VpcxhcuNg7Ng7NhH632lxJCc27dJveuC946xvZBXT4WNg7S3qVIxdKxvZBdJveuC94hyJOFJKX09n3w3M+/M+/M+/NCGSUlS+oMRPX+D3oBhoPuvQC9pkX5sbGJQ+ds/NkF0m964L3UvArZ5LslvUgQRVK0eDWGsNYaw1hrDWGsNYaw1hrDWGsNU0LqD+FGRx7n60QAU3Tel7el7el3Z7gE2Beocb6b1EnKukLzSl/1kQQITz6d6jjP9SkkRj2R1h6sI8g6ORG7Gwdmwdm965600V4U/VEDaCOwuXFsABL49ooVAAA10B8ZTvBRB1Jo1IvAHJLeJyVR558J0ciN2Ng7Ng7N74zr3GLVHRA2gjsapivIbxZEKfpY/jc4Ht6sjJIA+7gV/io6vUknjRsNrqkQYCHobt1SHqr3bsbB2bB2bGTBSBJaGUDAbQR2NUxXgaQ3mbo7iAVqeR+d3UM9M7i3esd70ht4nJVKbdoqXWpdL0vb0vb1QZbV3ucUoP2mE6NFBb8Jdm4E8A4QrrdD+iTJXxwB5S9OqKi1h77QqXDZUZaf9aKy964L3jrG9j61nEiuz4T2IaUh8azbZDh6q3ig1Mf1z6zey8d+A6B0DoHQIUQo6B0DoHQOgc+KzBbdFrfTeftLeftZ4XSb3rgveOsWeNB0xHPuPYsH1S6ZJRXAZyrgM5VwGcq3euYFPB9QNzbsa//OJ4TP4fkMIi+BiaFkJy5Legb7RjvdOTlxbB/w4IjTF01pj3EHJjFqpfVP56ZH56Xt5KDv2pxH5DCI0xc4ebgYU7VS90Kl20DElxoJ7Xt6RZI0B1MZi6a0z+HyUxLYXw1g7NjQeD6gbm3Y2Ds2Ds2Ds2EeQBlf3ob4RG7GwpPyUmHrONg7N9N5+0t59uaAsaZz8hhEaYumtM/h+QwiNMXNqnzRSeD5LQvIPB8VkRTTochhEaYumtM/h+QwiNMXTVQsvAl7TQqfbI/T7WKram7MjhDCI0xdNaZ/D8hhEaYubpDZX2O1N1V8OpAjPB+twv9NZxfD8hhEaYumtM9OnmBUhGNXBSDo2BTonCHe2iGERpjKxnuE3FAJxnuJXZWM9xK5MuO6uh7sil2ipdGAODQCCI0xdNaY9w+xWtM/iwDP4fLFU3LzqQJAp4PMR2kjPsomfw/IYRGl/xj0Y0Oq+z9UQNoc303n61K5XGciGERpi6a0xsZKWDFqpe32hUumhUumBrHi6S9Uvb0vdCp9r2+0IztiSE5cbEgTlxsHZsaNkEw7lZvrsETBe++uDqhBtH7IU8b3n6uEraGHGxoMrv7xkA96DxgveOsb2QXSb3rgu4awSVFLm4IWq4yxnAY/df9ZJatxTk2q/FYK7XtneqXQtVNbthBe8dY3sguk3vXBe7qLPjDvQMYHeuC946xvZBdJvek3OhO6Xt5Ttf4SwE3sguk3vXBe8dY3Ps+/aWATHbG763vXBe8dY3sgm5HowLVTIRY/IpCTeyC6Te9cF7x1g3cNVI9ytYc5BdJveuC946xZ4VZsHZveuTaQO9Zl7x1jeyC6SXa6d+FLqpe3pe3pe3pe3pdAxsHZsHZec964L3jrG9kF0m9GBaqXt6Xt6Xt6Xt6Xt6Xt6Xt6Xt6Xt6Xt6Xt6Xt6Xt6XqwAP7+6JAAAAAAAAAACHOBTKCycCf+0WAqKDPkpeIZNlMjSrGCwrJTeJ1xemF3oOqWeTOdN0aKVMFmon3jvu9otaR7a2PU9OJ3Y1oatWiJpeVnFlG1Hu6Rmvw/fGRQ7gHK/cdemhX4v86a0D2uX1YEPH9UGtvxCT2xVZX0//92jzaJWMpPyAL/IIWsg6RT9Ihz/dkeBc7B5K3ub6KaeXrUMtj8/NoX77dz1NE+MNNov/6mBryKaO8CHQOrKF739722NCKm5ppdjzrcUqUWcFET5iUoAGWjqvxnFWp3WCpqPJEjzZxrF03zp85SYtUk3HRVHfVD7l+ecT/4V6gM9trhC4lvsHBEbfc1tS40wMUB00JnZVuyImLbUXBjINSWyB7JdW1iswlrd2ppXqbhzWMxzwWw87vMe0IVHi0gDZEQ97O1Wl9OG71EpWd9r0TLubMqs4aaFzPk3rspuZy9EtMRWUsIrvk/DHgZuzxUduTvIqQAADkvnZf+b+arxIio841wSK1nmW3tMCd8mnYJLhDkwJHRFd2dt5adbWGK7SWbJqmIuo9yr8TJLkMoiJwzKGSp7iIN8KZ7383AQenszB7T2o7sLX7whZi6XUDk3g3fFYeDraUkB2wZMV6EYv/yc6AcRqG2Gr3K/RLTWnY1nkyNBL1BTHMc8AhNJDaKvR/NYMo5H22IzWW4uIOHaY3hXV8kj4IoUH0JpKDrgj9AzmeR/XawG4hRH4UhW+ALH9CKEOESJIreNMfAd2cESRqgngtzRNomKiWEK7HypiVkZXEqxQ5xdrb0PHL5DKKXo0u2u/lylQ5st/EC9JOlOZARj36YTPUjA2nQyhUX6iAAuT2dDq1juqnXerQwLVkXbSpW7ubXM18StZqjiNHIa8JcCq6bEieWzTwapWdYJ9vnQNepGnzmV7oaxLYS4OdAAtjfxzODCCeKcnq+iSXBzp7ZYmgOzhNdzHmzitc166QZyuZkDQODXphdRRjcMHj/fGAAAMzJoEsxOtONe7ZDHN+JPQchRIUpVm5RQ+N2iIWhpXMcPHJOEwFHJhSp+asm/6tL7Qs6o+44DU9sNyHePp/8xsVF+hG4x/Cx25ROO3rw8R4dze/9tiR1U/9tiR1U/9tiR1U/9tiR1htrhDp8EM4L5H1RIdg8KQHYcBvE0G1FoW/5HlYYnrtIL0KqkTNDo7bIAALogYLX5S4A7M8X4JSIMAu/DjE8hTvpQXpuiVERWPCoW3TbVUoSlQBds7tT4Y14xw5iRAQzO68PQ6upipe9zJzaHMrE6M7tYDilDBh7Lqh8/01lulqFt03zDBpt8gnQsCCKOymlkx4yhHS3AALqLNpjyAZqsH30TxS5Z6HVjj9lZPwgawQXpUJWBNM9BL7RNS7kXdquz7NQ5bS0XK8AWl1IDynzXqC0uBeDZ5gRXw3HqmqJ/SX+ZYQyvuzs80XNgnbQh1L9njAuAhGSSqkeoV+C7J5bvRouA530gt/i/j7GQoc/3KC1HDc7EUqPnvpmDlJ35/LNa1k/xD3DyblMOnjheoOx6/jhJVOB1TiGvfohddDsXRqoYp8+jtDOa5tjCt9Khi03Otsg9F2eefyuKDyccuKLNfJzVG40zyRYbIiHHNaUz/qpxEOD2jHZkmbG6AaZ2jTs++m6Z1eFOKH89WX3pdXvCBjEx4IG0MjHiqGQNdNFAFp7cliRqn1T0gsvRQj6APwGBCKr5zq2HfYfXEef3kWCECOFWBg+AhcQfjumKRiNpEJV1x3ZNrnECf1ueT3feK9bUO1Y+Uu8ULIEz/5+61T7SnuzW3L45dDACipCX3XqeFsgPEUBRnSgSI1lcVF9GOgeyEjY/DzKbPS9zQZ1hKeI8l4ffyYi/NS/b5hmYf0JDTHKXEzqkihB+E+chNZO0VIOpm4YrfSqwi6iinstXMClH9cxBtJJTtvoqKrNL6rrPOT81VPvGRBsYXxBW7T3CC4HOe4IWlYJlquxXsA2f3OqdsV+tL3nuVPtVafk240Z8fClQBt5BRykw3r0W1txqVXQtUYEItyNCjYVc+SLmOzKjv/uGDIgmTVKaoWbAMaIg/5dg5aY6YGKs8lm0jaFBtHb/xXhOuNTPNmupkK24bKyWeYuGJ0EyovYCvsXDpr/RopHVzseOmX89AmpNrnGr6+cGKdyL5QibZVIt51MBXGn2HfjLUh/lxj3OuWP3JQGxkZP5kA1XvCxwyQRBEyiBx9na7Tl+Ub3lXu8ToW/qebTw1fLtRJA2pORiNNHYz6qvD7Zho9Rze0QErgevNkmx6HbhjUnoCk1EzyQJR8LEP4CfTKjW689//0xNlm1VZiPLHKv0VX2PjV6mS0gCenSw+FlgPQUJ/dRDXBSFyhd7DP/3nF0bYgl45GoFSdCQ1A7MkoPooP33swn/5VvtbvaPlWB5yCj75SX9Guur5r+FYVnzqLGtIQbNbv5buFWu1z37djS6fiAkH8g83Ynt4ySDdHsa+raxHhUgHxmBSfrAB1dUCnK9KMjbYUHILu27azYhGCT8uorELLjvDb56Icl9MLttnV6pN1l7SkjfLWsKy77ktGrrsvrXA3X/lbUE1uowdpNxnQpYjfqQ0fAeOdsipQItcb7Waav1mDUh4TgP5B7q9HodcPKoZ5bbaJT99AHwF/DXKVvEznY3CH19nlh2fk/oXV4YLabJz4kyCJphIAgf+daxsyBa2P6m4uMxfRC2HBbxTMlg+E5y782yWZ9LoO2AIlOC0WTdEys68WAuP3H7l8CYtkS4beb6gulu8Gv76rXFBiTexwgYJl/tCqIxd/nrv6/4XJxahEQgwePNaEsKglJvcFetZgaBikJby/VwAA5VyuqI0eO0fKklqPiXyaDkvXVOI+ColHeOCK7/bRbDIRuHn3hdr5q/5OnBSQdhYNAJtVG/JSMgpB0jfhWYiFyBNFVXCrCnHF9Yxf/PytQV33MJ4KY+qtlYhaiQh33vUuPlu9iio/2HKU+mXgSAtL1XnLp6UoTJjz5lhTgHXkyLwv8lqCEfbECOo7Y4GXTthZXNAgXjWSYRJ8gvQu4I5/UVcZ20SfEjaGkW2l6hAlgtDahlgbd3P1hcObVq2qt7xktEq3Nnv3OgXp4/9lPbD2C1OuQap58Tijm3XsDigLqtSrfZqYoZIC1uvmshUbumGVBjbW6ahVIAzG5JlpJyhxrhkmmmJUtJe4jo3JwPnpE5/Uo8+GC8dDtMwBbaRVudrymPzehKsKFg8HyNlTThQAA3saBoeVAZsWF97ngHMCahQW9QCIKiU9m/kGeZsGMSA8CKQiI6jDKckanSF3AOxiveIsl29amA6qO+41i7jBbfB/ogKXk0nrR8hgwgytXFH0gPlBhfqkvNmZlSXOLDhZpi8RGMGvQijUEdQr8qO2RJMnkTdSswIefsbrOBFqbH6SxriXRwQne3KQA3KGqnzF4AHEGGZAAgJHAQUM1ZNxgAAAAAAA=" width="1080" height="503" class="img_praT"></p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p>현재 LCP API에 지정된 대로 Large Contentful Paint에 포함되는 요소 유형은 다음과 같다:</p><ul>
<li><code>&lt;img&gt;</code>요소 <code>&lt;svg&gt;</code>요소 내의 <code>&lt;image&gt;</code>요소</li>
<li>포스터 이미지가 있는 <code>&lt;video&gt;</code> 요소 (포스터 이미지 로드 시간이 사용됨)</li>
<li><code>url()</code> 함수를 통해 로드된 배경 이미지가 있는 요소(CSS 그라데이션과 반대)</li>
<li>텍스트 노드 또는 기타 인라인 수준 텍스트 요소 하위 요소를 포함하는 블록 수준 요소</li>
<li><code>&lt;video&gt;</code> 요소 자동재생을 위해 채색된 첫 번째 프레임 (2023년 8월 기준)</li>
<li>애니메이션 GIF 등 애니메이션 이미지 형식의 첫 번째 프레임 (2023년 8월 기준)</li>
</ul></div></div>
<p>일부 요소만 고려할 뿐 아니라 사용자에게 '콘텐츠가 없는' 것으로 보일 수 있는 요소를 제외하기 위해 특정 휴리스틱이 적용된다.</p>
<ul>
<li>사용자에게 표시되지 않고 불투명도가 0인 요소</li>
<li>전체 표시 영역을 덮고, 콘텐츠가 아닌 배경으로 간주될 가능성이 높은 요소</li>
<li>페이지의 실제 콘텐츠를 반영하지 못하여 엔트로피가 낮은 자리표시자 이미지 또는 기타 이미지</li>
</ul>
<p>브라우저는 가장 큰 콘텐츠가 포함된 요소가 무엇인지에 대한 사용자의 기대치를 충족하기 위해 이러한 휴리스틱을 지속적으로 개선할 가능성이 있다.</p>
<blockquote>
<p><em>Read more:</em></p>
<ul>
<li><em>Google: <a href="https://web.dev/lcp/" target="_blank" rel="noopener noreferrer">Largest Contentful Paint Documentation</a></em></li>
<li><em>Vercel: <a href="https://vercel.com/blog/core-web-vitals#largest-contentful-paint" target="_blank" rel="noopener noreferrer">Blog: Core Web Vitals - Largest Contentful Paint</a></em></li>
</ul>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="first-input-delay-fid">First Input Delay (FID)<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#first-input-delay-fid" class="hash-link" aria-label="First Input Delay (FID)에 대한 직접 링크" title="First Input Delay (FID)에 대한 직접 링크">​</a></h2>
<p>FID(First Input Delay, 첫 번째 입력 반응 시간) 지표는 웹 페이지와 상호 작용하는 동안 최종 사용자가 느끼는 체감 속도다. 입력 상자를 클릭해도 아무 일도 일어나지 않는다고 상상해 보자. 사이트의 상호 작용 및 응답성에 대한 이러한 불만은 입력 지연이 길기 때문에 발생한다.</p>
<p><img decoding="async" loading="lazy" alt="fid.png" src="https://5kdk.github.io/assets/images/fid-738ca40ff5ba10b5ec3990deaf4f8d6d.webp" width="1440" height="960" class="img_praT"></p>
<p>FID는 실제 사용자 데이터가 필요하며 lab에서는 측정할 수 없다(예: Google Lighthouse). 그러나 총 차단 시간(TBT) 지표는 lab에서 측정할 수 있으며 상호 작용에 영향을 미치는 문제를 파악할 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="fid-example.png" src="https://5kdk.github.io/assets/images/fid-example-48b5d055a7572eddb19968e067dd299c.webp" width="2062" height="960" class="img_praT"></p>
<p>FID 는 사용자가 응답하지 않는 페이지와 상호작용하려고 할 때 느끼는 경험을 정량화하기 때문에 로드 응답성을 측정하는 안정적인 코어 웹 바이탈 측정항목이다. FID가 낮으면 페이지를 사용 가능한 상태로 유지하는 데 도움이 된다.</p>
<div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><p>FID 는 2024년 3월에 코어 웹 바이탈로서 <strong><em>INP(Interaction to Next Paint)</em></strong> 로 대체될 예정이다.</p></div></div>
<blockquote>
<p><em>Read more:</em></p>
<ul>
<li><em>Google: <a href="https://web.dev/fid/" target="_blank" rel="noopener noreferrer">First Input Delay Documentation</a></em></li>
<li><em>Vercel: <a href="https://vercel.com/blog/core-web-vitals#first-input-delay" target="_blank" rel="noopener noreferrer">Blog: Core Web Vitals - First Input Delay</a></em></li>
</ul>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="cumulative-layout-shift-cls">Cumulative Layout Shift (CLS)<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#cumulative-layout-shift-cls" class="hash-link" aria-label="Cumulative Layout Shift (CLS)에 대한 직접 링크" title="Cumulative Layout Shift (CLS)에 대한 직접 링크">​</a></h2>
<p>온라인 기사를 읽다가 페이지에 갑자기 변화가 생긴 적이 있을 것이다. 경고 없이 텍스트가 이동하여 제자리를 잃거나 심지어 링크나 버튼을 탭 하려고 하다가 손가락이 닿기 직전에 링크가 이동하고 다른 것을 클릭하게 되는 경우도 있다.</p>
<p>이런 종류의 경험은 대부분 짜증 날 뿐이지만, 경우에 따라 실질적인 피해를 유발할 수 있다.</p>
<p><img decoding="async" loading="lazy" alt="cls.png" src="https://5kdk.github.io/assets/images/cls-2e38d91536710f7277d21712c4ffc3c7.webp" width="1440" height="960" class="img_praT"></p>
<p>CLS(Cumulative Layout Shift, 누적 레이아웃 이동) 지표는 사이트의 전반적인 레이아웃 안정성을 측정하는 지표다. 페이지가 로드될 때 예기치 않게 레이아웃이 바뀌는 사이트는 사용자 실수나 주의 산만으로 이어질 수 있다.</p>
<p>CLS는 처음에 DOM에 의해 렌더링된 후 요소가 이동된 경우에 발생한다. 아래 사진에서는 텍스트 블록 다음에 버튼이 화면에 렌더링되어 블록이 아래쪽으로 이동했다. CLS를 계산할 때는 이러한 영향과 거리의 조합이 고려된다.</p>
<p><img decoding="async" loading="lazy" alt="cls-example.png" src="data:image/webp;base64,UklGRmYmAABXRUJQVlA4WAoAAAAQAAAADQgAvwMAQUxQSNEAAAABF9D/iAgoaCNJeQaB798TNqL/ExB2wMJ//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//Md//238t3bACQBWUDggbiUAAJCQAp0BKg4IwAM+kUSdTKWjIqWgkEjosBIJaW7hcx6nwn+fHHtkf//5nBqunin9ta9R5b+vcn9ywwn81Pl7xu/o17iv0l/t/cA/WvpAeYD9w/Wb/tP9N9nnoAf3f/I9Yv+0fsAftz6a3sy/t7+5PtQ6u55X9JXjz9r4YD5MPrv+l8aESPrv8zf3j3s/2/+A+wD0V7AHyEfjP8+/y/6jcEsAD/C8/aaVkAfq74uvgtfc/UA/m37k/bd9NH9d+wX+B9W37x/svVt6pvoV/sAFaB9iaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0oYCmv39/ynMoCf75tkFsZIh6YAdofeB5axjxGkjHiNJGLOgNMjXTmUBP982yC2MkQ9MAO2Uv+wPLWMeI0kV9LvRpjrh9+E58aAUlX0KJ3ENOAfQboB7wy0g+RoWh1JF3iNJGPEaSMeKqDdQenAPoN0A8evoUTtDAR8UJIBwAmSjN+LbDAKYGFKvY1M9/m6SMeI9qcgQ450Cy7KwOETjEhxg7GcE1QbC+pI+F3TC5d6ZF1t5GkjHiNJGRJFldOPqg4LuySGqmoanfVAGW6kbxOdQ1O+K1g6mY+u31tZukjHXwPpNYbCcHUkhxzqGp31QcIupJDjnUNTvqg4RdSR3UrGZocy97SMeI0kY8LH3Rit+0GaWsY8RpIx4jSRjxGkjHiNJGPEZdyzeDfI73wPsGR8NgAwfRgQI6zxLhEb+bgOq7GBgCv6Vvjy3N0kY8RpIx4jSRjybvkrfHlubpJDduFIY7IeDKSETQVtPGOyD6ZlDf6Vvjy3N0kY8RpIx4jSRmwAUQzxGmpmDLX1NpfRgvrm1Hyq9nchL9ujvZOSys1oYTenIl1Qi/rUKJpIx4jSRjxGkjHiNJGQF+7W7WMeI0kYs8fxCAO1TyIXH/isVv16h3F7KrvsmDhKEAdZ0uIkQGXWlDHiNJGPEaSMeI0kY8RpIx/2LxGkjH/4BucJqgg8cmUIh33uRAAUhDIdT8PXNXTzeW5ukjHiNJGPEaSMeI05I68zc3SRjyEJBPTw8Z4gppSQBMnuQWKFFA8rpheyj5I/jfHlubpIx4jSRjxGkjHhWhBHbbpgeWshvu+iA2ZDkrfHlubpIx4jSRjxGkjHiN9BBMvsDy1iv4Wwy3dQWVQMkKJpIx4jSRjxGkjHiNJGPJI9M9pGP//GcwNk9BI51DU76oOEXUkhxzqGp31QcIupJDjnUNKQC3qwMipAPsTSRmwO9U+uBI51DU76oOEXUkhxzqGp31QcIupJDjnUNJMTAi4iMPvA+S205xRvLc3SRjxGkjHiNJGPEaSMeI0khm7p5vLc3SXANDnBZrTWJaO3Btg3qgdu/hOmITUgPAiB5oXkJw7CBGmZCOodiN4E60x5Fth4NI8ESCMUjIlXo8qQOWcHwvgHLOD4XwDmFQuPBWxVcwrCDrEChWZBOA4TA8CaaAT3/1BQm8Q5M6B1Oug6ZA43dgcPATuoQ0URk7dJM+6JgPhxtBOb2A42gnN7Ahav1/sI4acf7WnsARo3lubpIx4jSRjxGkjHiNJGPEaSP+PwQTI8tzdJcA4Aa3DUV/POGsTSczc3SRjzKeRbAfqz7wPLWKpNGBDuETSSIrO/3Tx5bm6SMeI0kY8RpIx4jSRjxGkkRIj8fUB5ayHRPwdK13jM25ukjHiNJGPEaSMeI0kY8RpIx1gjZf6OiVvksL4m+eeWsY8RpIx4jSRjxGkjHiNJGPEchGNMJvLc3SYnAf8d9FmCldJGPEaSMeI0kY8RpIx4jSRjxGjdt2/ckLfHmen1yoeI0kY8RpIx4jSRjxGkjHiNJGPEca2C46PsTSSImUjY7gzKeVvjy3N0kY8RpIx4jSRjxGkjHiH9trFGVPHlyVRlhVvA8tYx4jSRjxGkjHiNJGPEaSMeS5UOwlb48t1+VGtXB3Wvnm8tzdJGPEaSMeI0kY8RpIx4jRu2+cijBubp1ASet/UKJpIx4TDyECp/E9yPfuPBVJW4SaLZYrUzpm8aSMeI0kZr7wK+YHlrGa+8RM3hXRqM55z482l61liVFECBDl2JhSapWpQN8UmKNHwzVekZEMDoFD02K1gNxPbwx2C22bICx6v9ib09GAHkH2YYqGmsQRHz2tELfQqPNDbFZj1MlvFoiQwPSfi7blFAZuj+GAkWX4pLAmmNlDsKTpkpvBa212/dMTlXIdkPFn3Ln+ZznN1ZVpfNqzRaIuwj0CyTYRz0x2mlIry8faJEfvbWjRmZKW1sF6SM194iwZiaSMeI0bjb1b1DDt8eW5ujYbtFXXweI0kY8RpMWElwXRNJGQCprPejosH2JpQyhezJHOoanfVBwi6kkOOdQ1O+pfhFTUbm6dQEnrf1CiaSMeIh4u82PfuPBVJW4SaLWe+PLc3SRkAqai90oGahTuVGvt4HlrGPEaSMeI0kY8RpIx4jSRjwpdeVDxGkxYSoyp48tzdJGPEaSMeI0kY8RpIx4jSSIq7+rm+VBwi2GviMqePLc3SRjxGkjHiNJGPEaSMeI0jprc1XLBekjNfeIsGYmkjHiNJGPEaSMeI0kY8RpIx4iVf/wKiEzFDVoP8+0pwBJ6bwPLWMeI0kY8RpIx4jSRjxGkjHXHfEYNzdOoCT1v6hQP1PpK+FA9ZbNj37jwVSVuEmi2bHv3HgqkrcJNFs2PfuPBT5Ztel1G+3luvym6N1fj7BSXnGthVvA8Ag2V14N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4K5rJbLDSETMKRlgvSRmvvEWDMTRyOJyVuEmi2bHv3HgqkrcJNFs2PfuPBVJW4SaLZsenNJGa+7HxsXp525Td+Pkpu9ff6TjOA/gfYmkjHiNJGPEaSKia3XlpHajXqkh+f9rYVbwPAk6VDw1s2PfuPBVJW4SaLZse/ceCqStwk0WzY9+48FUit1tZzIIfZ3KC3yUOOW4c+9KVcK5r4mQZElopNnTYSXeWzJp9fsTSRjxGkjHiNJGPCQGui9+HxuxSMsF6SM194iwZiaN3/mTsYLZse/ceCqStwk0WzY9+48FUlbhJotmx79x4KpFPKAwRF8D8/7UvsScptRVf1YIcqez8wkRwAk4aSKgV8Y8FUB5axjxGkjHiNJGPCQf+AGfPk79UfIFF4uTyLJv7+BJqFXf1Ci0kWEp/+B9iaSMeI0kY8RpIx4jSRjxGkkRV39Ww4KyxZmubfCAc1wFkVeUFvjaKcM194N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4N4K3hZBLOf8Ags4A0GsBlmCz+SK6OO1GvVJD8/7Wwq3geCpwo5g+BUe/ceCqStwk0WzY9+48FUlbhJotmx79x4KpK3B5SA3T3WNeW51JC330Fdh91VGShuAVHXFhJd5bu1JGPEaSMeI0kY8RpIx9QCQ8o8RlTx5clUZYVbwPB8XebHv3HgqkrcJNFs2PfuPBVJW4SaLZse/ceCqSmJW+Swn4sz3fMRLDsuxA8ccNa+3geWsY8RpIx4jSRjxGkjHiNJGPCl15UPEaTFhKjKnjytbikadW4SaLZse/ceCqStwk0WzY9+48FUlbhJotmx79vwUCZdfx5clSVT+f9JP8KxVCUZU8eW5ukjHVKn/Vkg9rKPfuPBVJW4SaLZjsJVxzpGMkwPLc3SRjrjviMG5unUBJ639QoG1mYz0XjwVSVuEmi2bHv3HgqkrcJNFs2PfuPBVJW4SaKzzvf5+jHiaRv8HR/8Tui14pwBGjeW5ukjHVGUZNv2hiwk0WzY9+48FUi4t/BHufccEPsTSRjrjviMG5unUBJ639QomkjHiNJGPEaSMeI0kY8RpIyAU9Faf+phL71pzGvd3lubpIx4jusIupJDjnPt+W5ukjHhS68qHiNJiwlRlTx5XDcevVSB0qkrcJNFs2PfuPBVJW4SaLZse/ceCqStwk0WzY4VvbzS1ozc3TqADbuDGZQCd4izcnDSRjxGkjHiNJGPEaSMeI0kY8Ro47Ua9UkPz/tbCreB4Pi7zY9+48FUlbhJotmx79x4KpK3CTRbNj37jwVSUxK3yWFseFpDOJ+8S8xDvZUo+B9JWyMq5Hv3HgqkrcJNFs2PfuPBVJW4SaLZse/ceCqQ9oCPsEuvKh4jSYsJUZU8eVrcUjTq3CTRbNj37jwVSVuEmi2bHv3HgqkrcJNFs2Pft+CgTLr+PLkqSpX5iuQyVJpJEO4m/Bb429PEpaJuWVcj37jwVSVuEmi2bHv3HgqkrcJNFs2PfuPBVI74xgwCH0w74jBubp1ASet/UKBtZmM9F48FUlbhJotmx79x4KpK3CTRbNj37jwVSVuEmis873+fox4mkicWkZpvy3OpIsJLvLc3SRjxGkjHiNJGPEaSMeI0kVmoVd/UKLSRYSn/4H2JpIx4jSRjxGkjHiNJGPEaSRFXlBb48tzdOoCT03geBJaZcmhtwk0WzY9+48FUlbhJotmx79x4KpK3CTRbNj3vQs+Sukd9iwku8t1+VGvt4HlRTrhsTSsbBVJW4SaLZse/ceCqR0NOYqpTA4/gfYmkjHiNJGa+8Qt8eW5unUBJ639QoHOG33eWsq5Hv3HgqkrcJNFs2PfuPBVJW4SaLZse/ceCqRwfsbvyujxGVPHlyVRlhVvA8Hxd5se/ceCqStwk0WzY9OaSMeI0kY8RpIzX3iEDNQomkxYSoyp48tmrZGVcj37jwVSVuEmi2bGy+eoYIfYmkjHiNJGKx4jKnjy5Koywq3geWsY8RpIx4jSRjxGkjHiNJGPJcqNIUFE0kZr7xFgzE0bpY8Hut8G41s2PfuPBVJW4SaLZd5TkAVH3N0kY8RpIx4iGrJFZXSSIq8qNN+W5ukjHiNJGPEaSMeI0kY8RpIzX3iEDNQomkxYSoyp48tzdJGPEaSMeI0kY8RpIx4jSO+xYSXeW6/KjX28Dy1jHiNJGPEaSMeI0kY8RpIx4mkiwVulb48uSqMsKt4HlrGPEaSMeI0kY8RpIx4jSRjrjviMG5unUBJ639QomkjHiNJGPEaSMeI0kY8RpIyAVNae0/YmkkRV5Uab8tzdJGPEaSMeI0kY8RpIx4jSRWahV39QotJFhmfv9K3x5bm6SMeI0kY8RpIx4jSRkBhYfBEkh9ica2FeUFvjy3N0kY8RpIx4jSRjxGkjHiMwpN9sCiadQE3ltvJBTBBZbNj3skHYBu33OjP3FyTrknXJOuSdck65J1yTrknXJOuSdck65J1yTrknXJOuSdck65J1yTrknXJOuSdck65J1yTrknXJOuSdclhsZkO0mjAoYCHles74wnLomkjIBQ6by1C2iURWChVlqjYKpK3CTRbNj37jwVSVuEmi2bHv3HgqkrcJNFs2PfuPBVJWl7k0LlKwZxfxhbTLD3FqMtYzXqpn5Or3hjZQeLD5gkNExwqPFiAwTGyg8WHzBIaJjhUeLEBkJo+nieod4z4H2Jp06niNaF0AeNy/B1JIcc6hqd9UHCLqSQ451DUqYdzTlMrpJDjb7IanirQMc4HCLqSQ451DU76oOEXUkhxzqGcnZfZuqdFA/St8e6mh6NE7XpzqGp31QcIupJDjnUNTvqg4RdSODDMSu7s+WshxoBClZUtB2AKE1FIaJjhUeLEBgngRIBrAwivS3k+OCpIJxdeRvrNBNvwmIKwiu6n1FdiQBXdT68Irunw8aDEvSRjxM3kaO6Eno/TnUNTvqg4RdSSHHOoanfVBwidZgjqCv8Z/wPs7f1COKahqd9UHCLqSQ451DU76oOEXUkhxy7FHnWRh11/pW+PLc6kGRJGEOo365t+FXfeUBqz6Deu/sQcFSQTi69WdhRrAwiu6n1FdiVTn8OqCcXXkb6zQTb8JiCuxz939iDgqFu+S8Gw66N9iaSQ3bKkNTxArp4qC/B1JIcc6BYd2KgvwdSSHHOgWXeaUMnLcMR1HlubpJDjP8Tb5n9OdQ1O+qDg/L7ChdSSHHOoandmAnYXULbYjPmxAPsTTkkfyUdQ2moFgNVZGLcVeOOXIrAaqyMW7JIcc6hd8r6D7pIx4iKHZDdvRCkbhVkYtxVYY50CsBqrIxbjEhxg7GpUw9QFZgeWshmQ78ec0DpYfMTevN683rzeuSGiY5aPdYd1h3WHZQfQHyXstKjy3N0kY8TNiYGpSYahqd9UHCLqSQ451DU76oOEXUkhxhpbOU+vUjdJGPJNgIMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RxRSWfvDxj8xeVVcFRyKxMqslLuKq4KjkWXeaSMdhK3x5bS2Q8tXn3YgMLT5ulAzRL/f6/qZ4+oDy1jHiNJGPEaSM035bmxgUGUSK+aIx/niEmqM0R5l4VeYHlrGPEaSMeI0kVyoLYWOXoP8qC2Fjl6D/KgthY5eg/zI3SRjxGkjHiNJGOvhDGwf5UFsLHL0H+VBbCxy9B/lQWwsusY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaSMeI0kY8RpIx4jSRjxGkjHiNJGPEaNgAP7/N0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAub8aLgHc6NFwDudB49oSz/m50JZ/zc6EnpTPA0zs8w07ziAx82Zd5sy7ysQqEQI5tRastc1AAAFnIkho4QcRhkfZHAABGK9F3LgDtSiIRicAf+A09Yi2ya43aMN2W0uzAAEUBgEWUSOtMLwnB5RoJ+WGKoX8VLSd49Ed1x2Vp/T/WcD6EwdWrqUDYqDNZqGiTARyeqiaDKNA5XwsctHlVP3AMfkpur3JLllXvhwnVcqZEzhdzo3F/zjHhTS0e11zQ3H9Ca0lc6Q5kWXvym5bT2MOa647Npu9P6TmORm9qS9O812uGVzxS7nQTuICMn9f2CyFdV+OeepA/fBNw+eb1vQ3z8BzxuJL/2saUk3JYErXRCEvqsJCe2dA9XQeswQ5qjhsQpqlQVjP3HSPAQicsVKvPkmKKFjhkdpHf+WLz8V1OcP00xD5b9D7wlhIwgM9NAbPksKE6hRlDvgm4fPN6qznM4r7PyuyWrP8cNwCoDywQg8K0/9b1TMo2MA1mTs3Uz4QyEN/B/WYBxqv89jBWZCZuDz36IXqeX00OSjNfYxkygQw4VDgolKB4sN0nlswMjlFDYWBmxImK3YIR8aOTvQpZc5P1RgZmfvm+M9xSWjX05lloaHJeJf/9MMyWeu2/LAPsB/mZbT8ZS9+Bvmloo2GO8pS3xPswWJKp/Ts5M+d+1cOxfIrm0lCI4BmUxY+qeB7U2LAT3KIuZaaMXsu8OLSfrL7ObVK7M8eWs/GVaRPLqEcg+Fya91QoDMQJM34Ivj+zkWTF3yyrrAiaAIx2D1+fSXQrE56r+q20E1MPUwsAX9rZoSIucY6t6Gi88DBJtg47VJ2QQIl7VfCkEvQTLKkzGmqw5rA/VwBn5XRLsYhjwn13DRDLJv7O2EIklo4XBhRYGbrv9vvEDXbn0+JOZ7clKwftYkyJY2Eoo4cEoJ9VrfnTp040olORetyt9wtiEDXZprzR/JGkMf0Ze/usIZ2iWEL6hew+nKeNq0ZfLQBGOop6iDl3Os0kAGg+E50RQepZapRx+E50rgcBBWlgECucG7JCRBASsT/vW9MkbRypr+U6KiLtSCA/tF3s3WGyEd+S3XGPVRVBLQCujjVxNgjyb3y9yFo3Lzb195nvKdBm6T02eGa6FCGHvnnyGsr829xKVDktYPA3SKwsQPnlYC+yhUN9kKvSuY9cHHOlzaQNIvmfOgNKUoiy/lLu7n7V4624PcuDSM0jMVxM+jmpGk2fLaONtzlrN1Qt3WzXB7Kvr78TxDOxw8CAdqG0aAuHMpJgAHGQVaJmzv/M5HhmjZXYh+Z4RAj92SVdafF6tAPfS3d2NRinVw+SR14nXuquqhlVuKVSgcswdB7WowLZLund/rDUW3T7JWJvV1JFo3sFeo84Ff2KGSXn1jQio4452wMmfZoP1UBlPqL1bGBOQg45ZmuFZWRMJrEUw5v4okwdfXctELBNydx5T7qULFjCPjBKAqkgJRkxanicADz1G/ITtxABXDsxOQ/yD7XWjDgkoZJy6VSUr7gwxRxJCAq/YNs4PN4XXvMMADeGr2Atfi3MPh6lv9nhE2W+TTbG91mp/h0UZsv6371cMHike3bBWPSR2ibpWKYnYWTtOzineJvPErd7e7zT3V2tASgy81OBdXwSpn75ZZX6B5oDYxIJbdW+MCqw5OMzug+DaQaCwmM5KFQqfCTuF+xZyEW6JVslR51kjp7MIhAzOUDk1ZrmU+cZrGS6dSSe6+3zom9a5Pc1VWEG02OKZnEkJdPXVpqH/3tkGQiqqR1AAQV7bvBFpXCKUKz3vgnzW2L3i75uXJb03qvG9xiJ24/IAF9qw/NHrWl6NG+qvHgPcH5zTZwT0smVwUWCDb2WpnoB3rTwk7s2wDD+jrnlFIcj5bIA9eePxik/o36JMlgLAhykR4E2a1NIvLzo4HQagpl6E+M5VcMoK43rIagVPdYfPW/EFy9GL8Ps7wrX51LAnezxSPbtkNn9yAlN0rFMTsLJ3QXOwJy3niVu9vd5p7q7hahP8/KnAur4JUz98ssxH6dzxsYkEturfGBVYcvjT9QfBtINBYTGclCocMLMvC/Ys5CLdEq2So87JK5NmEQgZnKByas1zKj1AVarzmeWyUv1bWwuov+T/BTKGEItH07fUq7M3SyAlJ0fWk6PY5Dk6zZ3tB4ttgm7OfgN1n20ukBD92UrCfCbvqj+kqkmJKwV3Q/03fetcF0F8n2jh6hVwrsTMZJMBrNFCZdkxe6Xy/eETG4lhFxaHnIB2TB1PJzWI1BebTEvZtfh8d+HdE9CoTEu4jHsqb9kYi+EhQWyWdX+Kfbdy2QgZeeq57QqaKN6Opjrnk8ilW/D7O8atal6tHuXQYQstNMESRFQ5UNj/2d8we8wX/sNdMMzsjnM8eYGXF5rAcJChmA/17utGXqae1KxIZSQKCBnWKLxcdUUOxSfRksgRdedg6wADJCx1DLvj3CJ4kRwa9Ldyt+cgHQqHBzbEIUXFoapc7ZgVm2eR304Ci0eX2n218qk0w2T2pcb1RRAASO1O+ANPZtNq6LxoPy7QPFwGeFjqGXfHuETxIjg16Gzs5AMWFqheAM/YjnAFVKzbPI76cBRaPL7T73/wxlIHi69Dioo4UO9/ArTbrVwtCzQMrdx8VXmT7jKV8OZQSPV6/ONM486S4uhcy+yj/H7CQtmQLJLI1nAUq/D6qeJVm5rlW+yduvBYP7zL0eWsrh5q41bxL0G3r51y3PWgmtnpGnm4r/ylPsGUM0AAa/xXUJc0pXISiKQADMmU+m/qEBo6ian7szixtyBw4LtmhKkwVxplmRosI/MjTHWqNECtYPzZLtJATVmfLTvLGhKbL/f7D1D4NOFL51dAiWy+UumVT76rqe1UohIEOnk8uid+UWuH3LD16RMSxrx7ylJonrxQlhdJ3jy6T1h1vTieLFW6g24YXKPjJpTpK6S1uDney788G4QmZGzJhMiI/Tl1S41Bzvo+c+rxIRDQheBrl1IOd9Hy4K0MDKlCGV6pcrLTeOfeFOjCWK6b5i0v/Kraouu6Vv2hbsfo6TcaT653o1bgv/D6qeCj9b8Zyw9m5rlXAW8+RyeR7zL0eWsriNMt9FZa0G3r51y3PWgm21BUEW4r/ylPsGUM0AAhrY8RRc0pXISiKQADMmVUa3qEBo6ian7szixt0KFRXtmhKkwVxplmRosMUnjTHWqNECtYPzZLt5B52mfLTvLGhKbL/f7D2uFQ3FL51dAiWy+UumVT8mRf0sbprdcKxrxLCH4HRyUw1Lrw8eUQh8eVUoWMNft1Cb5MP7GI+UiFWCY4lFh5g3DTVgvysVYYtoXH4YANKR8VSTC7B9yfvMbCOn/NJf0G4CPPzYgcFE5bud9KRGIlOqIA5b98XB2wEx3Q9LvTIsz4RKCWK6b5i0v/KraqqKnp+r3L3Lo6Tcgv1zvRq3Bb+XjwU7sCDl4AIGisOSpDzX3DNS5S8icIffl5WZOxAaf4tm/7mj5mfKaTqGYqTAsbfXYMGRQAlLgCjTy7i2TXAFFJvMAAowAJiuAAGbADHBmgGuGSwgCrht60QkXtI+85lOHIF0GGSSyAKjpJ5fx4jjkYO1uEq3ko7MSW84clsy195jHf5Lt85SACGOtLyI8bpPwae1Xs0UAHn2f7meAepQQfvOz/wGNNY9qXX/dMaw21xanz9bVFHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHJlHa5GDEHNOoep9BMeShsV2lZiNs3guXpE0v4qhpv/+077/yTUE31F1DsT34xj72E52rAeWscLA71JwnAFAAAkS3TfhD1ohIvaSol+TvV6+7hqi1g+ct0F/r2Q/yMkPZDYByCuZsMR3Aoev91cIXw84ByXiPf55EjNv6z7H7OLjvDyXtNHQCZVneI2m0BL0sgVjKQ3+ScYyL3HByCmr3NQva4us0E9nFcdeaxUrl7P1Zbbd3X6X0TIE9zJezIjdo+mZJsdHl3O1G6F77Kb9QmKqmAGrkPc7rjtjADHnmgP7rQbj2o77oiGTKI6gU6qNtTZc05ui7YUdIz2Ul6Jz1OREI413xVPRx2DhLwXPDr4CwfnGV2gMKWuJ6hU6mk3KRoAjS1ggvNCr9ELpVt4SlfCeDRsy59y+v3z33f+SQL82pfvB3ZlpyPAqUzVggV2h/P7BdX3OCqU+BBQXm5xFSG/7PvuprovF7jGOpuNiVsevpyht7ulKg/iI9uMMf/mM1yh8uRSQgKwAAV2setSgrdyKjBR7ScMtH29i6c/2Hm9LfxRNLAaJN+SkoL4T1zI6flAGu19H65VVcov67uPrGX0h9f8vu6t1q1SHTq4ehPqSYgLv5hg3X/DFXwbQRqsBPbbIWgKSEuEDzsTHsAWMuwC0Rhk++noW8LCg6UTN3kf3lKbuvveohBMe5cGsCr01xo/n4k1PxJqfiTU/Emp+JNT8San4k1PxJqfiTVfNgdsKSzIZcHKu+N955uICvjqQXefyv8270Nqd/Zy2nkqRf/SbhZwPQRDngjkRfNhfW3F5zjfO98J2jGl2L8+HCZ7/NoHO+TejAXp+Sd1dntDbaNoZv8dAzRbx34Z9m2cjQR5Qz5VyGkGICPewXoozriv9UY4YKcgQx7ZneOXppVRyomTcS9ffYnuLvbZZ4hC7/GnCH6mpNc+Q5zpezAu+ZK2ZlIJtdBhkksgCo6SeYPEXxRRyTYyjoguF4RgSYAEmk8AVMV9BGhCXwFLM4IXAjBbfC8atXQALF7fMJzqBmLdYUe6/WnyRwXlzt4S2SvDcYEtoymko9Lm/YkiCSu/jnTzFBPAfc9kAkmOTbI/Ofp6kCBoqa4VKAd8VmQEwnLIL9oYuac3ULbp6/b4au6Gcx3TxY45EpQQaYOURdAuyNO+sf5Cs5F4EpZfjYP5XrfV8Lmnz4qBgt70TmCZs4QA0IxfezAATE212iEi9pH3nMpw5AugwySWQBUdJPMHiReCw6qrpyUAAuYWIDmHUt+1/DiLagln0FuAHCiZFohIvaSol+TvV6+7PJHYFyA9IYp81ejNNvSsrXk/8AXunS+Y3eQXIcUHyRdShxTgVSpc05ugR9gAExNYAcCFCOYD0hinzo7agln0F6Ngeak9mN3kCnKQQXMJzqBmKbATCctP6VrX60+tyKzH+BGzt2p+YkB16pJICYAAZzd4AFGktqCWfQW4AeL7AD6nKqSGA9IYp81ejNNvSsrXk/8AWYjMbvILkA79AcEKOfoASxAYAJKEAMIJ+AI8EAOlOwGLDCwCweDqQBTsgvCVzVBfDTgKdAAAGNK9Uap8jCyksTL+RJDUuDHxPlOAQDsZhHtmufSHLO3r9amqgABJVr6DJNZ5iN83oCAHgwrcPGfUhn3hTj4t0NUTvMFSLqeJNjxiz4Pte639VwYp6z41R9AAAatdgkuYrpOTCowVRQSYRRT/czeaAxd4bW1DHQRdNphRZy8on8PgABBcoyo3VcQkpHPoxWw1JFx9H+c9ZG9njhpH2/uFKCeKjUTccT9GK2GpNQsMj19wY6JmcAACjE2Jh0AABncbB/AAAAHk1rPlTUZkrKkrWRqIeJtOtWgGK0iMS4AOWH/AAAAAqw6gAC72AADlKnaqAAAF8Fk1UAAAxgAAAAAAAA==" width="2062" height="960" class="img_praT"></p>
<p>각 요소의 개별 레이아웃 이동 점수는 예기치 않은 이동이 발생한 경우에만 CLS에 계산되는데, 새 요소가 DOM에 추가되거나 기존 요소의 크기가 변경되더라도 로드된 요소가 그 위치를 유지하면 레이아웃 이동 점수에 포함되지 않는다.</p>
<blockquote>
<p><em>Read more:</em></p>
<ul>
<li><em>Google: <a href="https://web.dev/cls/" target="_blank" rel="noopener noreferrer">Cumulative Layout Shift Documentation</a></em></li>
<li><em>Vercel: <a href="https://vercel.com/blog/core-web-vitals#cumulative-layout-shift" target="_blank" rel="noopener noreferrer">Blog: Core Web Vitals - Cumulative Layout Shift</a></em></li>
</ul>
</blockquote>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="seo-영향">SEO 영향<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#seo-%EC%98%81%ED%96%A5" class="hash-link" aria-label="SEO 영향에 대한 직접 링크" title="SEO 영향에 대한 직접 링크">​</a></h2>
<p>Google 검색 엔진의 주요 목표는 현지화 및 맞춤법 오류를 고려하면서 사용자에게 가능한 최상의 결과를 제공하는 것이다. 모든 경우에 Google은 사용자에게 빠르고 원활한 웹사이트 경험을 제공하는 것을 중요하게 생각한다.</p>
<p>모바일 기기에서의 웹 페이지 속도는 2018년부터 순위 결정 요소에 포함되었다. 하지만 지금까지 Google 검색 알고리즘이 순위를 매길 때 어떤 구체적인 성능 지표를 사용하는지는 명확하지 않았다.</p>
<p>하지만 2021년 6월에 Google이 성능을 분석하고 최적화할 수 있는 구체적인 지표와 범위를 제공하면서 상황이 달라졌다.</p>
<p><img decoding="async" loading="lazy" alt="page-experience.png" src="https://5kdk.github.io/assets/images/page-experience-13043446211a625f02226ecc1c1c93dd.webp" width="2062" height="1312" class="img_praT"></p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="lighthouse-v10-바이탈-가중치">Lighthouse (v10) 바이탈 가중치<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#lighthouse-v10-%EB%B0%94%EC%9D%B4%ED%83%88-%EA%B0%80%EC%A4%91%EC%B9%98" class="hash-link" aria-label="Lighthouse (v10) 바이탈 가중치에 대한 직접 링크" title="Lighthouse (v10) 바이탈 가중치에 대한 직접 링크">​</a></h3>
<p>세 가지 지표의 가치가 반드시 동일하지는 않다. Lighthouse v8 버젼 에서는 각 코어 웹 바이탈에 다른 가중치가 할당된다:</p>
<ul>
<li><strong>콘텐츠가 포함된 최대 페인트(LCP)</strong>: 25%</li>
<li><strong>총 차단 시간*(TBT)</strong>: 30%</li>
<li><strong>최초 콘텐츠가 포함된 페인트(FCB)</strong>: 10%</li>
<li><strong>속도 지수(Speed Index)</strong>: 10%</li>
<li><strong>누적 레이아웃 이동(CLS)</strong>: 25%</li>
</ul>
<p>* FCP(첫 번째 입력 반응 시간)과 유사</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p>Google 순위 영향은 개별 코어 웹 바이탈 점수에 관계없이 모든 코어 웹 바이탈의 양호 범위에 있는 모든 페이지에 동일하게 적용된다.</p><div class="theme-admonition theme-admonition-note admonition_ZulA alert alert--secondary"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>노트</div><div class="admonitionContent_ocWh"><p>Google은 웹 페이지의 랭킹을 결정할 때, 코어 웹 비탈스 지표가 모두 '양호'에 있는 페이지들에 대해 동일한 방식으로 접근하며, 개별 핵심 웹 비탈스 점수는 중요하지 않다는 것을 의미한다. 페이지가 모든 코어 웹 바이탈 지표에서 "양호" 범위 내에 있는 경우, Google은 이러한 페이지들을 동등하게 취급하고 랭킹 영향을 동등하게 부여할 것이라는 것을 나타냄.</p></div></div></div></div>
<blockquote>
<p><em>Read more:</em></p>
<p><em>Google: <a href="https://developer.chrome.com/en/docs/lighthouse/performance/performance-scoring/" target="_blank" rel="noopener noreferrer">Lighthouse performance scoring</a></em></p>
</blockquote>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="user-experience">User Experience<a href="https://5kdk.github.io/blog/2023/10/24/core-web-vitals#user-experience" class="hash-link" aria-label="User Experience에 대한 직접 링크" title="User Experience에 대한 직접 링크">​</a></h3>
<p>코어 웹 바이탈에 대한 대부분의 대화는 주로 SEO에 초점을 맞추고 있다.</p>
<p>코어 웹 바이탈이 페이지 경험과 검색 순위의 개선을 측정하고 추진하기 위해 고안된 이니셔티브인 것은 사실이지만, 궁극적으로 이러한 변화의 혜택을 받는 것은 사용자들이다.</p>
<p>코어 웹 바이탈은 최상의 페이지 경험을 위해 노력하는 데 도움이 된다. 2012년에 Amazon에서 실시한 연구에 따르면 로딩 시간이 1초만 더 길어져도 16억 달러의 비용이 발생할 수 있다고 한다. 이와 같은 연구는 우수한 페이지 경험과 빠른 웹사이트의 중요성을 보여주며, 코어 웹 바이탈은 이 두 가지를 모두 달성하는 데 도움을 준다.</p>
<blockquote>
<p><em>Read more:</em></p>
<p><em>Chromium: <a href="https://nextjs.org/docs/pages/building-your-application/routing" target="_blank" rel="noopener noreferrer">The Science Behind Web Vitals</a></em></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="Web" term="Web"/>
        <category label="Core Web Vitals" term="Core Web Vitals"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Suspense, Error Boundary와 선언적 데이터 패칭]]></title>
        <id>https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching</id>
        <link href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching"/>
        <updated>2023-10-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[비동기처리에서의 Suspense와 ErrorBoundary 활용법.]]></summary>
        <content type="html"><![CDATA[<p>데이터 요청 상태에 따라 다르게 노출되는 UX/UI 설계는 많은 고민을 필요로 한다. 이러한 문제를 해결하기 위해 React는 다양한 방법을 제공하는데, 그 중 <code>Suspense</code>와 <code>ErrorBoundary</code>를 활용한 선언적 데이터 패칭이 있다.</p>
<p>지금부터 <code>Suspense</code>와 <code>ErrorBoundary</code>를 활용한 선언적 데이터 패칭이 어떻게 효과적인지 함께 알아보자.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="전통적인-데이터-패칭-처리">전통적인 데이터 패칭 처리<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#%EC%A0%84%ED%86%B5%EC%A0%81%EC%9D%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%A8%EC%B9%AD-%EC%B2%98%EB%A6%AC" class="hash-link" aria-label="전통적인 데이터 패칭 처리에 대한 직접 링크" title="전통적인 데이터 패칭 처리에 대한 직접 링크">​</a></h2>
<p>데이터 패칭은 전통적으로(?) 컴포넌트 내부에서 <code>data</code>, <code>loading</code>, <code>error</code>의 상태들을 사용하여 반환되는 컴포넌트에 대한 분기 처리로 이루어졌다. 아래의 예시 코드는 비동기 요청으로 데이터를 받아와 사용자에게 전달하는 간단한 컴포넌트다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">SampleContents.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">SampleContents</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sampleDatas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setSampleDatas</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// isLoading 상태변경</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// axios get 요청 예시 함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setSampleDatas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 성공이든 실패이든 isLoading은 false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Loader</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Error</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">error</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">error</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sampleDatas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Content</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">data</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">SampleContents</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>비동기 함수 <code>queryFn</code>가 반환하는 데이터가 들어오기 전까지 <code>isLoading</code>, <code>error</code> 상태에 따라 반환되는 컴포넌트를 분기 처리하여 로딩 중일 땐 <code>&lt;Loader /&gt;</code>를 반환하고 에러가 발생했을땐 <code>&lt;Error /&gt;</code>를 반환하며 사용자에게 정확한 정보를 전달할 수 있다.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="react-query">React Query<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#react-query" class="hash-link" aria-label="React Query에 대한 직접 링크" title="React Query에 대한 직접 링크">​</a></h2>
<p>React-Query는 비동기 요청을 효과적으로 관리할 수 있는 캐싱 라이브러리다. <strong>React-Query API들이 제공하는 프로퍼티를 활용하면 좀 더 깔끔하게 비동기 로직을 처리할 수 있다.</strong></p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">SampleContents.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">SampleContents</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> sampleDatas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryFn </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Loader</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Error</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">error</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">error</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sampleDatas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Content</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">data</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">SampleContents</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>React Query의 API <code>useQuery</code>가 반환하는 <code>isLoading</code>, <code>error</code> 와 같은 프로퍼티를 통해 <code>useEffect</code>를 제거하고 <code>useState</code> 줄이는 등 컴포넌트 내부 로직을 좀 더 간소화해서 첫번째 예시와 마찬가지로 데이터 요청 상태에 따라 반환되는 컴포넌트 랜더링 여부를 작성할 수 있다.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="선언적-데이터-패칭">선언적 데이터 패칭<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#%EC%84%A0%EC%96%B8%EC%A0%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%A8%EC%B9%AD" class="hash-link" aria-label="선언적 데이터 패칭에 대한 직접 링크" title="선언적 데이터 패칭에 대한 직접 링크">​</a></h2>
<p>선언적 데이터 패칭은 React의 주요 개념인 **'선언형 프로그래밍'**에 기반한다. 이는 상태의 변화에 따라 UI를 직접 조작하지 않고, 어떤 상태에 따라 어떤 UI가 보여져야 하는지만 집중할 수 있다.</p>
<p>이러한 접근법은 비동기 작업의 복잡성을 크게 줄여주며 코드의 가독성과 유지보수성을 향상시키는데, <code>Suspense</code>와 <code>ErrorBoundary</code>는 선언형 프로그래밍 방식으로 비동기 작업과 에러 처리를 담당한다.</p>
<p>우선 <code>Suspense</code>와 <code>Error Boundary</code>에 대해 간단하게 살펴보자.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="suspense">Suspense<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#suspense" class="hash-link" aria-label="Suspense에 대한 직접 링크" title="Suspense에 대한 직접 링크">​</a></h3>
<p><a href="https://react.dev/reference/react/Suspense" target="_blank" rel="noopener noreferrer"><code>Suspense</code></a>를 사용하면 자식이 로딩을 완료할 때까지 <code>fallback</code>을 표시할 수 있다. React는 자식에게 필요한 모든 코드와 데이터가 로드될 때까지 로딩 <code>fallback</code>을 표시한다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// React 공식 문서의 예제</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Loading</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="error-boundary">Error Boundary<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#error-boundary" class="hash-link" aria-label="Error Boundary에 대한 직접 링크" title="Error Boundary에 대한 직접 링크">​</a></h3>
<p><a href="https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary" target="_blank" rel="noopener noreferrer"><code>Error Boundary</code></a>는 하위 컴포넌트 트리에서 발생하는 에러를 캡처하여 대체 UI를 보여주거나 에러 리포팅 등의 작업을 수행한다.</p>
<p>필요에 따라 커스터마이징을 할 수 있는데, <code>ErrorBoundary</code>의 커스터마이징에 대한 내용은 또 다른 포스팅으로 진행해보겠다.</p>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>추천 라이브러리</div><div class="admonitionContent_ocWh"><p><a href="https://www.npmjs.com/package/react-error-boundary" target="_blank" rel="noopener noreferrer">react-error-boundary</a></p></div></div>
<hr>
<h1>React-Query 와 Suspense, Error Boundary 사용하기</h1>
<p>useQuery를 <code>Suspense</code>, <code>Error Boundary</code>와 함께 사용하려면 <code>suspense: true</code> 옵션을 넣어주면 된다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">SampleWrapper.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">SampleWrapper</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ErrorBoundary</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Error</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Loader</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">ErrorBoundary</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">SampleWrapper</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">SampleContents.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">SampleContents</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> sampleDatas </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">suspense</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sampleDatas</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Content</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">data</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">SampleContents</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Suspense</code>는 컴포넌트가 준비될 때까지 대기하고 fallback props로 받은 컴포넌트를 보여주는 역할을 한다. 이로 인해 <strong>로딩 상태에 따른 로직이 컴포넌트 외부로 추출되어 각 컴포넌트에서 로딩 상태를 확인하고 처리할 필요가 없어진다.</strong></p>
<p><code>Error Boundary</code>는 하위 컴포넌트 트리에서 발생하는 에러를 캡처하여 대체 UI를 보여주거나 에러 리포팅 등의 작업을 수행한다. 이로 인해 <strong>각각의 컴포넌트에서 에러 처리 로직이 분산되지 않고 한 곳에서 관리될 수 있다.</strong></p>
<p>위의 코드에서 볼 수 있듯이, <code>Suspense</code>와 <code>ErrorBoundary</code>를 사용하면 로딩 상태와 에러 처리 로직을 컴포넌트 외부로 분리하여 관리할 수 있는데, <strong>컴포넌트로부터 분리된 로직으로 코드의 가독성을 높이고 유지보수를 용이하게 한다.</strong></p>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p>모든 쿼리문에서 사용할 것 이라면 <code>QueryClient</code>를 생성할때 기본 옵션으로 지정해 줄 수 있다.</p><div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QueryClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">defaultOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">queries</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">suspense</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p><code>ErrorBoundary</code>는 하위 컴포넌트들의 에러들을 공통으로 처리할 수 있다.</p><div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">ChildWrapper.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">ChildComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Loader</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">ParentWrapper.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">ParentComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 하위 컴포넌트에서 발생하는 error를 모두 캐치</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ErrorBoundary</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Error</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ChildComponent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ChildComponent2</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ChildComponent3</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">ErrorBoundary</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="선언적-데이터-패칭을-할-때-의-주의사항">선언적 데이터 패칭을 할 때 의 주의사항<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#%EC%84%A0%EC%96%B8%EC%A0%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%A8%EC%B9%AD%EC%9D%84-%ED%95%A0-%EB%95%8C-%EC%9D%98-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD" class="hash-link" aria-label="선언적 데이터 패칭을 할 때 의 주의사항에 대한 직접 링크" title="선언적 데이터 패칭을 할 때 의 주의사항에 대한 직접 링크">​</a></h2>
<p>선언적 데이터 패칭은 많은 장점을 가지고 있지만, 몇 가지 주의사항도 존재한다.</p>
<div class="theme-admonition theme-admonition-warning admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>경고</div><div class="admonitionContent_ocWh"><p><em>No Silver Bullet, 은탄환은 없다</em></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="비동기-요청-waterfall">비동기 요청 Waterfall<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%9A%94%EC%B2%AD-waterfall" class="hash-link" aria-label="비동기 요청 Waterfall에 대한 직접 링크" title="비동기 요청 Waterfall에 대한 직접 링크">​</a></h3>
<p><code>Suspense</code>로 감싼 컴포넌트 내에서 여러개의 <code>useQuery</code>를 사용하는 경우 비동기 요청 Waterfall이 발생한다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Loading</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"> // 3개의 query문이 있는 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="example image 1" src="https://5kdk.github.io/assets/images/asset-1-5299c3bc866d2bfd19bbf5005e656456.png" width="1080" height="396" class="img_praT"></p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Loading</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents1</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"> // 1개의 query문 있는 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents2</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"> // 1개의 query문 있는 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SampleContents3</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"> // 1개의 query문 있는 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="example image 1" src="https://5kdk.github.io/assets/images/asset-2-3043e6ef9c14c5123b30b98c6d56765f.png" width="824" height="582" class="img_praT"></p>
<p>React Query v4.5 이후의 최신 버전을 사용한다면 <code>useQuery</code>대신 <code>useQueries</code>의 사용을 고려해 볼 만하다. 비동기 요청을 병렬로 처리해 주며 <code>Suspense</code>를 지원해 준다!</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="loader와-skeleton의-사용자-경험에-대한-고민필요">Loader와 Skeleton의 사용자 경험에 대한 고민필요<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#loader%EC%99%80-skeleton%EC%9D%98-%EC%82%AC%EC%9A%A9%EC%9E%90-%EA%B2%BD%ED%97%98%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%A0%EB%AF%BC%ED%95%84%EC%9A%94" class="hash-link" aria-label="Loader와 Skeleton의 사용자 경험에 대한 고민필요에 대한 직접 링크" title="Loader와 Skeleton의 사용자 경험에 대한 고민필요에 대한 직접 링크">​</a></h3>
<p>데이터 패칭 시간이 짧은 경우 Loader나 Skeleton UI 같은 컴포넌트의 노출은 사용자에게 깜빡이는 오류 현상 처럼 보일 수 있어 오히려 부정확한 정보 전달 및 사용자 경험 저하로 이어질 수 있으므로 신중하게 고려해야 한다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">DeferredLoader.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">DeferredLoader</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isDeferred</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsDeferred</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setIsDeferred</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">clearTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isDeferred</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Loader</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>짧은 시간 내에 비동기 상태가 변경되지 않으면 Loader나 Skeleton UI 대신 <code>null</code>을 반환하여 화면을 그리지 않고 그 이상의 로딩 시 Loader나 Skeleton UI를 노출하는 방식도 고려할 만하다.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="결론">결론<a href="https://5kdk.github.io/blog/2023/10/18/suspense-for-data-fetching#%EA%B2%B0%EB%A1%A0" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<p>지금까지 <code>Suspense</code>와 <code>ErrorBoundary</code>를 활용한 선언적 데이터 패칭에 대해 알아봤다.</p>
<p><code>Suspense</code>와 <code>ErrorBoundary</code>를 활용한 비동기 처리는 컴포넌트의 가독성, 유지보수 측면, 비즈니스 로직 분리 측면에서 상당한 이점이 있지만, 무분별한 <code>Suspense</code>, <code>ErrorBoundary</code>는 성능 저하, 사용자 경험 저하를 일으킬 수 있기 때문에 장단점을 좀 더 고민하고 동작 원리와 적절한 사용성에 대해 탐구해 나아가야 할 것 같다.</p>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="React" term="React"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[라이브러리 없이 로컬 캐싱 구현하기]]></title>
        <id>https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries</id>
        <link href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries"/>
        <updated>2023-07-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[라이브러리 없이 데이터 캐싱 라이브러리들을 구현해보자.]]></summary>
        <content type="html"><![CDATA[<p>SWR, React-query 같은 data fetching 라이브러리들은 기본적으로 fetch한 데이터에 대한 캐싱 기능을 제공한다.</p>
<p>이 포스팅에서는 서버에서 받아온 데이터에 대한 캐싱 과정을 라이브러리 없이 직접 구현해보면서 이해해본다.</p>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="1-사전-준비">1. 사전 준비<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#1-%EC%82%AC%EC%A0%84-%EC%A4%80%EB%B9%84" class="hash-link" aria-label="1. 사전 준비에 대한 직접 링크" title="1. 사전 준비에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="서버-상태-라이브러리-알아보기">서버 상태 라이브러리 알아보기<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EC%84%9C%EB%B2%84-%EC%83%81%ED%83%9C-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0" class="hash-link" aria-label="서버 상태 라이브러리 알아보기에 대한 직접 링크" title="서버 상태 라이브러리 알아보기에 대한 직접 링크">​</a></h3>
<p><strong>SWR</strong></p>
<ul>
<li>"Stale-While-Revalidate" 캐싱 전략에 초점을 맞춘 React 라이브러리다.</li>
<li>구성 가능한 옵션을 통해 데이터 요청 빈도를 조절한다.</li>
<li>사용자가 앱 혹은 브라우저 탭에 focus할 때 데이터 재검증을 수행한다.</li>
</ul>
<p><strong>React-Query</strong></p>
<ul>
<li>서버 데이터를 가져오고 캐싱하는 데 최적화된 React 라이브러리다.</li>
<li>고수준의 추상화로 전역 상태 관리 및 데이터 동기화가 가능하다.</li>
<li>확장성과 더 큰 프로젝트에 적합하며, 에러 처리 및 결과값의 상태를 쉽게 관리할 수 있다.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary>Stale-While-Revalidate</summary><div><div class="collapsibleContent_RtnQ"><div><p>Stale-While-Revalidate은 캐싱 전략 중 하나로, 오래된(Stale) 데이터를 사용하면서 업데이트된 데이터를 재검증(Revalidate)하는 방식이다. 최신 버전의 데이터가 서버와 동기화되지 않은 상태에서도 사용자에게 빠르게 데이터를 제공할 수 있도록 도와준다.</p><br><br><p>기본 원리는 다음과 같다:</p><br><ul>
<li>요청이 들어오면, 캐시된 데이터(있을 경우)를 먼저 반환하여 빠른 응답을 보장한다.</li>
</ul><br><ul>
<li>동시에 백그라운드에서 서버에 데이터의 최신 버전을 요청하여 캐시를 업데이트한다.</li>
</ul><br><ul>
<li>업데이트된 데이터가 준비되면, 다음 요청부터는 최신 데이터로 응답을 보낸다.</li>
</ul><br><ul>
<li>이렇게 하면 사용자 경험이 향상되고, 서버의 부하도 줄일 수 있다.</li>
</ul></div></div></div></details></div></div>
<p>두 라이브러리의 컨셉은 조금 다르지만, 서버 데이터에 대해 캐싱하고 효율적인 서버 데이터 요청을 추구한다는 점은 같다. 캐싱 라이브러리에 대한 포스팅이 아니기에, 본 포스트에서는 자세하게 다루진 않겠다.<del>(가장 큰 차이점은 전역 상태관리로서의 사용 그리고 서버로의 mutation 여부다.)</del></p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="구현할-기능에-대한-정보를-작성해보자">구현할 기능에 대한 정보를 작성해보자<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EA%B5%AC%ED%98%84%ED%95%A0-%EA%B8%B0%EB%8A%A5%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EB%B3%B4%EC%9E%90" class="hash-link" aria-label="구현할 기능에 대한 정보를 작성해보자에 대한 직접 링크" title="구현할 기능에 대한 정보를 작성해보자에 대한 직접 링크">​</a></h3>
<ul>
<li>로컬에서 캐시 데이터들을 담아둘 수 있는 변수 (서버에서 받은 데이터를 저장해 놓을 무언가 필요)</li>
<li>cache time 이내의 서버 요청 호출 방지 처리 (캐시 타임 비교 로직)</li>
<li>서버 데이터 요청에 대한 status를 가지고 있는 custom hook (의존성 주입을 통한 비동기 로직 캡슐화)</li>
</ul>
<p>간단히 말하면 서버에서 받아온 데이터를 변수(특정 자료구조)에 저장하고, 로컬에 유효한 데이터가 있으면 이를 사용, 데이터가 없거나 유효하지 않으면 서버에 다시 요청을 보내는 과정을 구현하면 될 것 같다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="2-핵심-기능-구현">2. 핵심 기능 구현<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#2-%ED%95%B5%EC%8B%AC-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84" class="hash-link" aria-label="2. 핵심 기능 구현에 대한 직접 링크" title="2. 핵심 기능 구현에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="캐시를-저장할-객체-생성">캐시를 저장할 객체 생성<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EC%BA%90%EC%8B%9C%EB%A5%BC-%EC%A0%80%EC%9E%A5%ED%95%A0-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1" class="hash-link" aria-label="캐시를 저장할 객체 생성에 대한 직접 링크" title="캐시를 저장할 객체 생성에 대한 직접 링크">​</a></h3>
<p>제일 먼저 로컬에서 '캐시'를 관리할 객체를 생성해보자. 캐시를 객체로 관리하는 이유는?</p>
<ul>
<li>key-value 구조로 일관적이다.</li>
<li>데이터를 확장하는 데 유용하다.</li>
<li>value에 대한 접근성이 좋다.</li>
</ul>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>필자는 <code>Map</code> 객체를 활용하여 <code>cacheStore</code>를 만들어 주었다. 사실, 일반 객체로 만들어도 무방하지만.. 아래와 같은 이유로 <code>Map</code>을 선택했다.</p>
<ul>
<li><code>Map</code> 객체는 key가 단 하나만 존재해야 한다는 점<br>
<!-- -->-&gt; <strong>해당 key에는 유일한 캐시 값이 보장된다.</strong></li>
<li>객체를 컨트롤 할 수 있는 직관적인 프로토타입 메서드들을 제공(ex: <code>has()</code>, <code>set()</code> 등)<br>
<!-- -->-&gt; <strong>선언적인 코드 작성이 가능하다.</strong></li>
<li>후술할 테 지만 추가 기능을 고려해 순서가 보장되는 <code>Map</code>을 선택했다.<br>
<!-- -->-&gt; <strong>데이터 삽입 순서가 보장된다.</strong></li>
</ul>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="캐싱-커스텀-훅-구현">캐싱 커스텀 훅 구현<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EC%BA%90%EC%8B%B1-%EC%BB%A4%EC%8A%A4%ED%85%80-%ED%9B%85-%EA%B5%AC%ED%98%84" class="hash-link" aria-label="캐싱 커스텀 훅 구현에 대한 직접 링크" title="캐싱 커스텀 훅 구현에 대한 직접 링크">​</a></h3>
<p>관심사를 분리하여 캐시를 확인해서 데이터를 받아오는 로직들만을 가진 훅을 만들어보자.
React-Query의 <code>useQuery</code>의 이름을 본따 <code>useCacheQuery</code>라는 커스텀 훅을 만들었다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useCacheQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>cacheStore</code> 객체를 <code>useCacheQuery.js</code>의 모듈스코프에 선언함으로서 <code>cacheStore</code>를 공유할 수 있도록 했다.</li>
<li>즉, <code>useCacheQuery</code>를 어디서 호출하든 <code>cacheStore</code>에 접근할 수 있다.
(파일로 분리해도 된다. ex: <code>cacheStore.js</code>)</li>
</ul>
<p>데이터 요청의 상태를 컴포넌트에서 사용할 수 있도록 <code>isLoading</code>과 <code>error</code>에 대한 상태도 함께 캡슐화한다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useCacheQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>매개변수로는 <code>cacheStore</code>의 key가 될 <code>queryKey</code>와 요청을 수행할 <code>queryFn</code> 비동기 함수, 캐시의 유효시간 <code>cacheTime</code>를 선택적으로 주입 받을 수 있도록 하자.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initialCacheTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useCacheQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> queryKey</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> queryFn</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> cacheTime </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> initialCacheTime </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>그리고 데이터를 서버에서 가져오고 캐시에 저장하는 로직을 작성해보자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fetchWithCache</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">createAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>서버에서 받아온 데이터는 <code>cacheStore</code>에 <code>{ data: 서버에서 가져온 데이터, createAt: 현재 시간 }</code> 의 형태로 저장하도록 하였다. 현재 시간을 함께 저장해야 후에 캐시 타임과 비교를 할 수 있기 때문이다.</p>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p><code>isLoading</code> 상태는 요청이 성공하든 실패를 하든 비동기 작업이 완료가 되면 <code>false</code>로 변경해주어야 하므로 <code>finally</code> 문에서 처리해준다.</p></div></div>
<p>그렇담 우리의 캐시 확인 과정은 언제 어떻게 이루어질까? 서버에서 데이터를 가져오는 로직에 캐시 확인 과정을 얹어보자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fetchWithCache</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">has</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createAt</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> cacheTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>사용자의 요청이 들어오면 <code>cacheStore</code>에 <code>queryKey</code>가 있는지 확인한다.</li>
<li><code>cacheStore</code>에 해당 key가 존재한다면 value의 생성시간(ms)과 현재시간(ms)의 차이를 <code>cacheTime</code>과 비교한다.</li>
<li>만약 조건이 모두 만족되면 캐시를 사용하여 <code>data</code>상태를 업데이트하고 서버에 데이터 요청을 보내지 않는다. 유효한 캐시가 없을 경우 서버에 데이터 요청을 수행한다.</li>
</ol>
<p>마지막으로 <code>useCallback</code>과 <code>useEffect</code>로 비동기 함수를 정리해보자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fetchWithCache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cacheTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryKey</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">fetchWithCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">fetchWithCache</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary>지금까지의 <code>useCacheQuery</code> 코드 전문</summary><div><div class="collapsibleContent_RtnQ"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useCallback </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initialCacheTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useCacheQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> queryKey</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> queryFn</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> cacheTime </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> initialCacheTime </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fetchWithCache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">has</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createAt</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> cacheTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">createAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cacheTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryKey</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchWithCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">fetchWithCache</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="프로젝트에-적용해보기">프로젝트에 적용해보기<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0" class="hash-link" aria-label="프로젝트에 적용해보기에 대한 직접 링크" title="프로젝트에 적용해보기에 대한 직접 링크">​</a></h3>
<p>자동완성 검색 기능에 방금 만든 이 커스텀 훅을 적용해보자. <code>getSearchTerms</code>는 <code>input</code>을 파라미터로 설정하여 서버에 데이터 요청을 하는 비동기 함수다. (<code>input</code> 상태 대한 디바운싱 처리와 텍스트 전처리로 캐시에 불필요한 요청이 들어가지 않도록 처리해두었다. 컴포넌트의 상세 코드는 생략한다.)</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">SearchBar.jsx</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> recommendations</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCacheQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">@Suggestion </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">input</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSearchTerms</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이에 대한 결과는 다음과 같다.</p>
<p><img decoding="async" loading="lazy" alt="example image 1" src="https://5kdk.github.io/assets/images/asset-1-d24ca9fa20460a642fe62426af52c6a9.png" width="1200" height="556" class="img_praT">
<img decoding="async" loading="lazy" alt="example image 2" src="https://5kdk.github.io/assets/images/asset-2-6f9b4bb0da042e7764d8a9071a7cfd01.png" width="869" height="364" class="img_praT"></p>
<p>같은 검색어를 여러차례 검색했지만 요청은 1번만 일어났다. <code>cacheStore</code>에 제대로 들어가 있는 것을 보니 캐싱이 제대로 동작하는 것을 확인했다.</p>
<p>그런데 이 커스텀 훅엔 문제점이 있다.</p>
<ul>
<li>현재 캐시는 로컬 메모리에 저장되고 있다.</li>
<li>쿼리의 개수가 늘어날수록 캐시가 무한정 커진다.</li>
<li>즉, 메모리 누수가 생긴다.</li>
</ul>
<p>이를 방지하기 위해 적절한 캐시 정책을 구현해야 한다. 캐시에 대한 만료 정책이나 제한된 메모리 사용을 고려해보자.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="3-캐시-정책-구현">3. 캐시 정책 구현<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#3-%EC%BA%90%EC%8B%9C-%EC%A0%95%EC%B1%85-%EA%B5%AC%ED%98%84" class="hash-link" aria-label="3. 캐시 정책 구현에 대한 직접 링크" title="3. 캐시 정책 구현에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="어떻게-하면-캐시-정책을-구현할-수-있을까">어떻게 하면 캐시 정책을 구현할 수 있을까?<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EB%A9%B4-%EC%BA%90%EC%8B%9C-%EC%A0%95%EC%B1%85%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C" class="hash-link" aria-label="어떻게 하면 캐시 정책을 구현할 수 있을까?에 대한 직접 링크" title="어떻게 하면 캐시 정책을 구현할 수 있을까?에 대한 직접 링크">​</a></h3>
<p>필자는 최대 캐시의 개수를 설정하고 이를 넘을시 오래된 캐시부터 지우는 방법을 선택했다.</p>
<ul>
<li>최대 캐시 개수 선언</li>
<li>데이터 요청 과정중 캐시 확인 작업(개수, 최신화)</li>
<li>오래된 캐시 삭제 작업</li>
</ul>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="커스텀-훅에-적용하기">커스텀 훅에 적용하기<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EC%BB%A4%EC%8A%A4%ED%85%80-%ED%9B%85%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0" class="hash-link" aria-label="커스텀 훅에 적용하기에 대한 직접 링크" title="커스텀 훅에 적용하기에 대한 직접 링크">​</a></h3>
<p>우선 최대 캐시 개수 <code>maxCacheSize</code>를 선언해주자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useCallback </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initialCacheTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maxCacheSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>cacheStore</code>가 <code>maxCacheSize</code>의 개수를 넘는다면 오래된 캐시를 삭제해주는 로직을 추가해주자. <code>Map</code>은 삽입된 순서를 기억하므로 첫번째 key를 추출하고 캐시를 지워주면 된다!</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">createAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">size</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> maxCacheSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldestCacheKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oldestCacheKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>단, 캐시를 최근에 사용했음에도 먼저 지워지는 것을 방지해주기 위해 캐시 순서를 최신화 해주어야한다.</p>
<p>그리고 캐시타임이 지났을 경우도 삭제해 주어야한다. 두 로직을 추가해주자.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fetchWithCache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">has</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createAt</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> cacheTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cacheTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryKey</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이제 무수한 데이터로 메모리 누수가 될 위험을 제거했다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="4-부가-기능-구현">4. 부가 기능 구현<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#4-%EB%B6%80%EA%B0%80-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84" class="hash-link" aria-label="4. 부가 기능 구현에 대한 직접 링크" title="4. 부가 기능 구현에 대한 직접 링크">​</a></h2>
<p>지금 상태에서 받아온 데이터를 컴포넌트에서 가공하여 사용할 수 있다. 부가적으로, 커스텀 훅에 <code>select</code> 옵션을 만들어서 데이터를 가공하여 원하는 형태로 가져올 수 있으면 좋을 것 같았다.</p>
<p>그리고 <code>initialData</code>도 추가했다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useCacheQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  queryKey</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  queryFn</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token parameter">  initialData</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  cacheTime </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> initialCacheTime</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token parameter">  select</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter"></span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> select </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> useCacheQuery</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> recommendations</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCacheQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">queryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">@Suggestion </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">input</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">queryFn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSearchTerms</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">initialData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">cacheTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">select</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>경고</div><div class="admonitionContent_ocWh"><p><code>select</code>로 사용할 콜백 함수에 부수효과가 있는(원본 배열을 바꾸는) 메서드를 사용하지 않는다.
부수효과는 예기치 못한 결과를 만들어 낸다.</p><p>ex) <code>push</code>, <code>shift</code>, <code>splice</code>, <code>concat</code> 등</p></div></div>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="마치며">마치며<a href="https://5kdk.github.io/blog/2023/07/23/caching-technique-without-libraries#%EB%A7%88%EC%B9%98%EB%A9%B0" class="hash-link" aria-label="마치며에 대한 직접 링크" title="마치며에 대한 직접 링크">​</a></h2>
<details class="details_y01A alert alert--info details_JAWh" data-collapsed="true"><summary>완성된 <code>useCacheQuery</code> 코드 전문</summary><div><div class="collapsibleContent_RtnQ"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_KhXT">useCacheQuery.js</div><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useCallback</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initialCacheTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cacheStore </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maxCacheSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useCacheQuery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  queryKey</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  queryFn</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  initialData</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  cacheTime </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> initialCacheTime</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">  select</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter"></span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fetchWithCache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">has</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createAt</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> cacheTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">queryFn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">createAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">size</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> maxCacheSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldestCacheKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cacheStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oldestCacheKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cacheTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryKey</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchWithCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">fetchWithCache</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> select </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> useCacheQuery</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>요약하자면 <code>useCacheQuery</code>를 호출하면 <code>initialData</code>를 초기 상태로 저장하고 비동기 함수 <code>queryFn</code>을 래핑한 <code>fetchWithCache</code>를 <code>useEffect</code>에서 호출한다. <code>fetchWithCache</code>에서는 로컬 캐시를 확인하고 최신화하며 필요시 서버에 데이터를 요청해 <code>data</code>와 캐시를 업데이트한다. <code>data</code>를 <code>select</code>여부에 따라 가공해서 반환하거나 그대로 반환한다.</p></div></div></details>
<p>이렇게 fetching 전용 로컬 캐싱 기능을 가진 커스텀 훅을 구현해봤다.</p>
<p>짧은 기간, 작은 프로젝트지만 어떻게 캐싱을 구현할지 고민해보는 시간이 알찼던거 같다. (덕분에 react query 복습도)</p>
<p>추가로 서버에 POST, PUT, DELETE 등 요청을 담당하는 mutation 기능, 상태의 낙관적 업데이트와 비관적 업데이트, 데이터 변경시 query invalid 기능, 선언적으로 에러, 로딩 처리를 할 수 있도록 <code>ErrorBoundary</code>와 <code>Suspence</code>를 지원하는 기능까지 추가하면 좋을 것 같다.</p>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="React" term="React"/>
        <category label="SWR" term="SWR"/>
        <category label="React-Query" term="React-Query"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[useMemo, useCallback으로 최적화가 꼭 필요할까?]]></title>
        <id>https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback</id>
        <link href="https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback"/>
        <updated>2023-07-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[React의 메모제이션과 최적화에 대한 고찰.]]></summary>
        <content type="html"><![CDATA[<p><code>useCallback</code>과 <code>useMemo</code>는 리액트의 최적화를 지원하는 Hook들이다. 두 Hook 모두 '최적화'라는 키워드가 있어 사용하지 않으면 손해라고 생각할 수 있다. <del>(필자 역시 처음엔 그렇게 생각했었다...)</del></p>
<p>사실, 이 훅들은 주로 성능 개선을 목적으로 사용되지만, 항상 성능이 향상되는 것은 아닐 수 있다.</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p><strong>useCallback</strong></p><p><code>useCallback</code>은 이벤트 핸들러와 같은 함수를 메모이제이션(memorization)할 때 사용되는 Hook이다. 컴포넌트가 리렌더링될 때마다 함수를 새로 생성하는 것을 방지하고, 이전에 생성한 함수를 재사용하여 불필요한 렌더링을 줄여준다.</p><p><strong>useMemo</strong></p><p><code>useMemo</code>는 렌더링 중에 발생하는 연산량이 큰 함수의 결과값을 메모이제이션하며, 이전 결과값을 재사용할 수 있도록 도와준다.</p></div></div>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="남용하지-말아야할-이유">남용하지 말아야할 이유<a href="https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback#%EB%82%A8%EC%9A%A9%ED%95%98%EC%A7%80-%EB%A7%90%EC%95%84%EC%95%BC%ED%95%A0-%EC%9D%B4%EC%9C%A0" class="hash-link" aria-label="남용하지 말아야할 이유에 대한 직접 링크" title="남용하지 말아야할 이유에 대한 직접 링크">​</a></h2>
<p><code>useCallback</code>과 <code>useMemo</code>는 성능 최적화의 목적으로 사용되긴 하지만, 무분별하게 사용할 경우 오히려 성능 저하를 초래할 수 있다.</p>
<ol>
<li>
<p><strong>메모이제이션 자체의 비용</strong>: 이 두 Hook을 사용하면 함수와 계산 결과를 캐싱하기 위한 메모리 사용량이 늘어난다. 게다가, 새롭게 계산되는 값이 일정 기간 동안 사용되지 않아도 메모리에 남아 있어야 하므로 메모리 관리의 측면에서 비효율적일 수 있다. (가비지 컬렉터가 무시)</p>
</li>
<li>
<p><strong>의존성 배열의 관리</strong>: <code>useCallback</code>과 <code>useMemo</code>는 의존성 배열이 필요한데, 이 배열에 들어간 값들이 변경될 때마다 메모이제이션 된 값을 무효화하고 새로 계산한다. 이 과정에서 복잡성이 증가하며, 관리가 미흡한 경우 오히려 성능이 저하될 수 있다.</p>
</li>
<li>
<p><strong>남용에 따른 실수</strong>: 무분별한 사용으로 인해 모든 함수나 결과값을 메모이제이션하려 할 때 실수가 발생할 가능성이 높아진다. 이로 인해 성능 최적화를 기대하는 대신 버그나 성능 저하를 초래할 수 있는 상황이 생길 수 있다.</p>
</li>
</ol>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="usecallback과-usememo를-사용하기-좋은-상황">useCallback과 useMemo를 사용하기 좋은 상황<a href="https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback#usecallback%EA%B3%BC-usememo%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%A2%8B%EC%9D%80-%EC%83%81%ED%99%A9" class="hash-link" aria-label="useCallback과 useMemo를 사용하기 좋은 상황에 대한 직접 링크" title="useCallback과 useMemo를 사용하기 좋은 상황에 대한 직접 링크">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>경고</div><div class="admonitionContent_ocWh"><p>아래 이어지는 코드는 단순 이해를 돕기 위해 작성된 💩 코드들이다. 개념만 알고 넘어가자!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="예시-1-usecallback을-활용한-참조-동일성-보장">예시 1: <code>useCallback</code>을 활용한 참조 동일성 보장<a href="https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback#%EC%98%88%EC%8B%9C-1-usecallback%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%B0%B8%EC%A1%B0-%EB%8F%99%EC%9D%BC%EC%84%B1-%EB%B3%B4%EC%9E%A5" class="hash-link" aria-label="예시-1-usecallback을-활용한-참조-동일성-보장에 대한 직접 링크" title="예시-1-usecallback을-활용한-참조-동일성-보장에 대한 직접 링크">​</a></h3>
<p>큰 목록을 렌더링하는 구성 요소가 있다고 가정한다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">useSearch</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./fetch-items'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">MyBigList</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">memo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> term</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> onItemClick </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> items </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useSearch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">term</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">items</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">item</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">item</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">id</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onItemClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">contents</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">MyParent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> term </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onItemClick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter">event</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'You clicked '</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">currentTarget</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">term</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">MyBigList</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">term</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">term</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onItemClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onItemClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>목록은 수백 수천 개의 항목일 수 있다. <code>&lt;MyBigList /&gt;</code>가 다시 렌더링되는 것을 방지하려면 목록을 <code>React.memo()</code>로 감싸 메모이제이션 하려고 한다.</p>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p><code>React.memo()</code>는 props가 동일하다면 리렌더링 되지 않는다.</p></div></div>
<p><code>React.memo()</code>가 제대로 동작하기 위해서 props를 동일하게 유지하여야 한다. 하지만 React 컴포넌트의 내부 함수들은 렌더링 될 때 마다 새로운 함수를 생성하기 때문에 모두 다른 참조 값을 가진다.</p>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p>자바스크립트의 함수는 일급 '객체'다.</p><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'a'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'a'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> a2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'f'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">f2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'f'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> f2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'f'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'f'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p><code>useCallback</code>으로 <code>onItemClick</code>을 감싸면 <code>term</code>이 바뀌지 않는 이상 새로 함수를 만들지 않아 동일한 참조를 가지게 된다. 이를 통해 <code>props</code>로 전달한 <code>onItemClick</code> 함수의 동일성을 보장하고 하위 컴포넌트 <code>MyBigList</code>의 불필요한 렌더링을 방지할 수 있다.</p>
<p>이처럼 props에 전달하거나 훅에 종속성으로 사용되는 경우 <code>useMemo</code>, <code>useCallback</code>을 사용해서 동일성을 보장해야 한다.</p>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="예시-2-복잡한-계산에서의-usememo">예시 2: 복잡한 계산에서의 <code>useMemo</code><a href="https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback#%EC%98%88%EC%8B%9C-2-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EA%B3%84%EC%82%B0%EC%97%90%EC%84%9C%EC%9D%98-usememo" class="hash-link" aria-label="예시-2-복잡한-계산에서의-usememo에 대한 직접 링크" title="예시-2-복잡한-계산에서의-usememo에 대한 직접 링크">​</a></h3>
<p>복잡한 계산을 하는 작업이 있다고 가정하자. 예제애서는 곱하기 연산으로 대체한다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useMemo </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">expensiveCalculation</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 복잡하고 길고 비용이 많이 드는 코드…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Calculator</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> a</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> b </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expensiveCalculation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">결과값: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">App</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setA</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setB</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">number</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">a</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript parameter" style="color:#00009f">e</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setA</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript function" style="color:#d73a49">parseInt</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">e</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">target</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">value</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">number</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">b</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript parameter" style="color:#00009f">e</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setB</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript function" style="color:#d73a49">parseInt</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">e</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">target</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">value</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Calculator</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">a</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">a</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">b</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">b</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>값을 입력하는 입력란의 변화에 따라 <code>a</code>와 <code>b</code> 값이 변경되고 <code>expensiveCalculation</code>이 실행된다.</p>
<p><code>useMemo</code>를 사용하여 <code>a</code>와 <code>b</code>가 실제로 변경될 때만 계산을 실행하고, 이전 결과값을 캐싱하여 불필요한 연산을 방지한다. (<code>a</code>와 <code>b</code>를 의존성 배열에 포함하여 변경되는 경우에만 <code>expensiveCalculation</code>을 호출)</p>
<p>React 공식문서에 따르면 <code>useMemo</code>는 비용이 많이 드는 계산을 캐싱하기 위해 사용되는 훅이며, <strong>"비용이 많이 드는 계산"</strong> 의 예로 수천 개의 객체를 만들거나 반복해야 일을 <strong>"비용이 많이드는 계산"</strong> 이라 하고 있다.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="결론">결론<a href="https://5kdk.github.io/blog/2023/07/04/necessary-with-usememo-and-usecallback#%EA%B2%B0%EB%A1%A0" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<blockquote>
<p><strong>모든 추상화(및 성능 최적화)에는 비용이 따른다.</strong></p>
</blockquote>
<p>말 그대로 최적화에는 공짜가 없다. <code>useCallback</code>과 <code>useMemo</code>는 신중하게 사용되어야 하고, 필요한 경우에만 적용하여 성능 최적화를 추구하는 것이 좋다.</p>
<p>진짜 성능 이슈가 있는 곳에서만 해당 Hook 들을 사용하고, 대부분의 상황에서는 <code>useCallback</code>, <code>useMemo</code>를 사용하지 않는 편이 성능, 가독성 측면에 이점이 있을 것이다!</p>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="React" term="React"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[useNavigate의 옵션을 활용한 뒤로가기 사용성 개선]]></title>
        <id>https://5kdk.github.io/blog/2023/06/17/usenavigate-options</id>
        <link href="https://5kdk.github.io/blog/2023/06/17/usenavigate-options"/>
        <updated>2023-06-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[라우팅시 뒤로가기 오류를 고쳤던 경험]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/5kdk/wanted-pre-onboarding-frontend/tree/main" target="_blank" rel="noopener noreferrer">원티드 프리온보딩 사전과제</a>를 진행하며 여러 리다이렉트 작업이 필요했다.</p>
<p><code>Root</code> 컴포넌트 <code>/</code> 경로 접근 시 <code>SignIn</code> 페이지로 리다이렉트를 하고 있었으며 라우팅 시 <code>SignIn</code>과 <code>Todo</code> 페이지는 로그인 여부에 따라 리다이렉트 처리하는 고차 컴포넌트 <code>AuthenticationGuard</code>가 감싸고 있었다.</p>
<p><code>useNavigate</code>로 라우팅할 때 리다이렉트 로직으로 인해 뒤로가기가 제대로 되지 않는 문제가 발견되었고, 이를 해결하기 위해 <code>useNavigate</code>를 좀 더 꼼꼼하게 살펴보게 되었다.</p>
<p>이 글을 볼 때쯤이면 이미 이 문제를 발견했을 테지만, 아니라면 자신의 프로젝트 인증과 관련된 리다이렉팅을 수행하는 프로젝트를 켜고 로그인 후 뒤로가기를 살포시 눌러보시라! (프리온보딩 팀원 중에서도 같은 이슈를 찾으신 분이 계신다.)</p>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="usenavigate-톺아보기">useNavigate 톺아보기<a href="https://5kdk.github.io/blog/2023/06/17/usenavigate-options#usenavigate-%ED%86%BA%EC%95%84%EB%B3%B4%EA%B8%B0" class="hash-link" aria-label="useNavigate 톺아보기에 대한 직접 링크" title="useNavigate 톺아보기에 대한 직접 링크">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>정보</div><div class="admonitionContent_ocWh"><p>React Router의 <code>useNavigate</code> 훅은 React 컴포넌트에서 프로그래밍 방식으로 라우팅을 제어할 수 있게 해주는 도구다.</p><p><code>useNavigate</code>를 사용하면 URL을 변경하거나 특정 경로로 이동할 수 있으며, <code>useNavigate</code>는 React Router v6부터 도입되었다.</p></div></div>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react-router-dom'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>useNavigate</code> 훅은 라우터 컴포넌트 내부에서 사용되어야 한다. 예를 들어, 다음과 같이 컴포넌트를 정의할 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react-router-dom'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useNavigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleClick</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">navigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/other-route'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">My Component</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Go to Other Route</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>위의 예제에서 <code>handleClick</code> 함수에서 <code>navigate</code> 함수를 호출하면 URL을 변경하고 <code>/other-route</code>로 이동한다.</p>
<p><code>useNavigate</code>를 사용하여 다양한 옵션을 지정할 수도 있으며 이를 통해 리다이렉트, 상태 변경, 쿼리 매개변수 전달 등 다양한 작업을 수행할 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react-router-dom'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useNavigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleClick</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">navigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/other-route'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">state</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">replace</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">My Component</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Go to Other Route</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>위의 예제에서는 <code>navigate</code> 함수의 두 번째 인수로 객체를 전달하여 옵션을 설정할 수 있는데, <code>state</code> 프로퍼티를 사용하여 상태를 전달하고, <code>replace</code> 프로퍼티를 <code>true</code>로 설정하여 이동한 후에 브라우저의 기록에 남지 않도록 할 수 있다.</p>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="state와-replace-프로퍼티를-활용하기">state와 replace 프로퍼티를 활용하기<a href="https://5kdk.github.io/blog/2023/06/17/usenavigate-options#state%EC%99%80-replace-%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B0" class="hash-link" aria-label="state와 replace 프로퍼티를 활용하기에 대한 직접 링크" title="state와 replace 프로퍼티를 활용하기에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="state-프로퍼티">state 프로퍼티<a href="https://5kdk.github.io/blog/2023/06/17/usenavigate-options#state-%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0" class="hash-link" aria-label="state 프로퍼티에 대한 직접 링크" title="state 프로퍼티에 대한 직접 링크">​</a></h3>
<p>게시글 목록이 있는 페이지에서 사용자가 특정 게시글을 클릭하면 해당 게시글의 상세 페이지로 이동하고, 상세 페이지에서는 게시글의 ID와 함께 추가적인 데이터를 사용해야 할 때 <code>state</code> 프로퍼티를 활용할 수 있다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react-router-dom'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">PostList</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useNavigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handlePostClick</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">postId</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 게시글 ID와 추가 데이터를 함께 전달하여 상세 페이지로 이동</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">navigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/post/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">postId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">state</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> postId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">additionalData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Some data'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Post List</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">handlePostClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript number" style="color:#36acaa">1</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Post 1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">handlePostClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript number" style="color:#36acaa">2</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Post 2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">handlePostClick</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript number" style="color:#36acaa">3</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Post 3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useLocation </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react-router-dom'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">PostDetail</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">location</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> additionalData </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Post Detail</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ID: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Additional Data: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">additionalData</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="replace-프로퍼티">replace 프로퍼티<a href="https://5kdk.github.io/blog/2023/06/17/usenavigate-options#replace-%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0" class="hash-link" aria-label="replace 프로퍼티에 대한 직접 링크" title="replace 프로퍼티에 대한 직접 링크">​</a></h3>
<p>로그인 후에 사용자를 로그인 페이지로 돌아갈 수 없도록 하기 위해, 브라우저의 기록에서 이전 로그인 페이지를 대체하면 사용자 경험을 향상 시킬 수 있다.</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">LoginPage</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useNavigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleLogin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 로그인 처리 로직...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 로그인 성공 후 대시보드 페이지로 이동 (replace: true 옵션 사용)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">navigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/dashboard'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">replace</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Login</span><span class="token plain"> </span><span class="token maybe-class-name">Page</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">handleLogin</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Login</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_ZulA alert alert--success"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>팁</div><div class="admonitionContent_ocWh"><p><code>Navigate</code> 컴포넌트를 사용할때는 props에 <code>replace</code>만 적어주어도 된다. <code>replace={true}</code>로 동작하기 때문.</p></div></div>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="결론">결론<a href="https://5kdk.github.io/blog/2023/06/17/usenavigate-options#%EA%B2%B0%EB%A1%A0" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<p>이처럼 <code>useNavigate</code>를 사용하여 React 컴포넌트에서 프로그래밍 방식으로 라우팅을 제어할 수 있으며 <code>useNavigate</code>의 다양한 옵션을 활용하면 더욱 유연하고 풍부한 사용자 경험을 제공할 수 있다.</p>
<p>저의 경우 결국 리다이렉트시 <code>{ replace: true }</code> 옵션을 사용하지 않아 계속되는 리다이렉트 문제가 생겼고 이를 해당 옵션을 통해 손쉽게 해결할 수 있었다.</p>
<p><code>useNavigate</code>, <code>Navigate</code>(useNavigate를 둘러싼 컴포넌트 래퍼)는 <code>replace</code> 프로퍼티를 사용하여 브라우저의 기록에 새로운 항목을 추가하지 않고 이전 항목을 대체할 수 있다.</p>
<p>로그인 또는 인증과 관련된 경로 전환과 같이 이전 페이지로 돌아가지 않아야 하는 상황에서 <code>replace</code> 프로퍼티를 잘 활용하자.</p>
<blockquote>
<p><a href="https://reactrouter.com/en/main/hooks/use-navigate" target="_blank" rel="noopener noreferrer">https://reactrouter.com/en/main/hooks/use-navigate</a><br>
<a href="https://reactrouter.com/en/main/components/navigate" target="_blank" rel="noopener noreferrer">https://reactrouter.com/en/main/components/navigate</a></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="React" term="React"/>
        <category label="React-router" term="React-router"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[useCallback으로 useEffect 심화 활용 해보기]]></title>
        <id>https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback</id>
        <link href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback"/>
        <updated>2022-12-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[useCallback으로 useEffect 심화 활용 해보기]]></summary>
        <content type="html"><![CDATA[<p><a href="https://react.dev/reference/react/useCallback" target="_blank" rel="noopener noreferrer"><code>useCallback</code></a>은 함수를 메모이제이션(memoization) 하기 위해서 사용되는 Hook 들이다. React의 <code>useCallback</code>을 <a href="https://react.dev/reference/react/useEffect" target="_blank" rel="noopener noreferrer"><code>useEffect</code></a>와 함께 사용하여 여러방면으로 효율적인 코드를 구성할 수 있는 방법이 있다. <code>useCallback</code>은 <code>useEffect</code>와 생긴 것은 똑같지만, 역할은 조금 다르다.</p>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="예제로-보는-useeffect심화활용">예제로 보는 useEffect&nbsp;심화&nbsp;활용<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#%EC%98%88%EC%A0%9C%EB%A1%9C-%EB%B3%B4%EB%8A%94-useeffect%EC%8B%AC%ED%99%94%ED%99%9C%EC%9A%A9" class="hash-link" aria-label="예제로 보는 useEffect&nbsp;심화&nbsp;활용에 대한 직접 링크" title="예제로 보는 useEffect&nbsp;심화&nbsp;활용에 대한 직접 링크">​</a></h2>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> memoizedCallback </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>useCallback</code>을 살펴보자면 첫 번째 인자로 콜백함수를 넣어주고, 두 번째로 인자로 의존성 배열을 넣어준다. <code>a</code>나 <code>b</code>가 바뀌었을 때만 <code>useCallback</code>의 콜백 함수를 새로 생성하고, 그렇지 않을 경우 콜백 함수를 생성하지 않는다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="usecallback을-useeffect와-함께-사용하는-예">useCallback을 useEffect와 함께 사용하는 예<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#usecallback%EC%9D%84-useeffect%EC%99%80-%ED%95%A8%EA%BB%98-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%98%88" class="hash-link" aria-label="useCallback을 useEffect와 함께 사용하는 예에 대한 직접 링크" title="useCallback을 useEffect와 함께 사용하는 예에 대한 직접 링크">​</a></h3>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> memoizedCallback </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">memoizedCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">memoizedCallback</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>useEffect</code>의 의존성 배열에 <code>memoizedCallback</code>이 있고, 콜백함수에서 <code>memoizedCallback</code>을 호출하고 있다.</p>
<p><code>memoizedCallback</code>는 <code>a</code>, <code>b</code>에 의존적이므로, <code>a</code>와 <code>b</code>가 변경이 생겼을 때만 생성될 것이고, <code>useEffect</code>는 <code>memoizedCallback</code>이 새로 생성되었을 때 <code>memoizedCallback</code>을 호출할 것이다.</p>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="여기서-usecallback은-왜-사용할까">여기서 useCallback은 왜 사용할까?<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#%EC%97%AC%EA%B8%B0%EC%84%9C-usecallback%EC%9D%80-%EC%99%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C" class="hash-link" aria-label="여기서 useCallback은 왜 사용할까?에 대한 직접 링크" title="여기서 useCallback은 왜 사용할까?에 대한 직접 링크">​</a></h2>
<p>사실, 위 코드는 앞서본 코드와 같은 형태를 띠게 된다. 음 훨씬 간단해 보인다. 그렇다면 왜 <code>useCallback</code>을 사용할까?</p>
<div class="theme-admonition theme-admonition-warning admonition_ZulA alert alert--warning"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>문제점</div><div class="admonitionContent_ocWh"><ul>
<li>useEffect에서 하는 행동이 많아질수록 코드가 복잡해진다.</li>
<li>dependency array가 길어 질 수 있다.</li>
<li>추후에 유지보수를 하려하면 헷갈리게 될 수 있다.</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>해결방안</div><div class="admonitionContent_ocWh"><ul>
<li><code>useEffect</code>는 우리가 원하는 side effect를 실행만 해주고, <code>useCallback</code>에서 실제 해야 하는 것들을 선언해주면 코드의 분리가 가능하다.</li>
<li>콜백 함수의 구체적인 역할을 이름을 통해 명시적으로 확인할 수 있다.</li>
<li>코드를 정리하고 가독성을 높여서 유지보수를 수월하게 해 줄 수 있다.</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="state가-바뀔-때마다-데이터를-받아와야-하는-경우">state가 바뀔 때마다 데이터를 받아와야 하는 경우<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#state%EA%B0%80-%EB%B0%94%EB%80%94-%EB%95%8C%EB%A7%88%EB%8B%A4-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%B0%9B%EC%95%84%EC%99%80%EC%95%BC-%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0" class="hash-link" aria-label="state가 바뀔 때마다 데이터를 받아와야 하는 경우에 대한 직접 링크" title="state가 바뀔 때마다 데이터를 받아와야 하는 경우에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="1-useeffect만-사용하는-예">1. useEffect만 사용하는 예<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#1-useeffect%EB%A7%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%98%88" class="hash-link" aria-label="1. useEffect만 사용하는 예에 대한 직접 링크" title="1. useEffect만 사용하는 예에 대한 직접 링크">​</a></h4>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getDate</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'some url'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">someDeps</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>useEffect</code>의 콜백함수는 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer">Promise</a>를 반환하는 비동기 함수가 될 수 없다. 때문에, <code>getData</code>라는 비동기 함수를 <code>useEffect</code>가 실행될 때마다 생성해주고, 그 안에서 데이터를 가져오고 <code>setData</code>를 해주게 된다. 그리고 만든 <code>getData</code>라는 함수를 실행하게 된다. <code>useEffect</code>가 실행될 때마다 매번 함수가 생성되고 실행되니 매우 비효율적으로 볼 수 있다.</p>
<h4 class="anchor anchorWithStickyNavbar_YLfa" id="2-useeffect--usecallback-조합한-예">2. useEffect + useCallback 조합한 예<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#2-useeffect--usecallback-%EC%A1%B0%ED%95%A9%ED%95%9C-%EC%98%88" class="hash-link" aria-label="2. useEffect + useCallback 조합한 예에 대한 직접 링크" title="2. useEffect + useCallback 조합한 예에 대한 직접 링크">​</a></h4>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> getData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'some url'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">someDeps</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">getData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="결론">결론<a href="https://5kdk.github.io/blog/2022/12/15/advanced-usage-of-useeffect-with-usecallback#%EA%B2%B0%EB%A1%A0" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<p><code>useCallback</code>을 활용하면, <code>useCallback</code>안에서 데이터를 가져오는 콜백 함수를 <code>getData</code>에 넣어주고, <code>useEffect</code>안에서는 <code>getData</code>만 호출을 해주면 코드가 훨씬 깔끔해지고, 로직도 분리되며 가독성이 올라가는 효과를 얻을 수 있다.</p>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="React" term="React"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[key가 필요한 이유와 주의할 점]]></title>
        <id>https://5kdk.github.io/blog/2022/12/10/react-key-props</id>
        <link href="https://5kdk.github.io/blog/2022/12/10/react-key-props"/>
        <updated>2022-12-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[React에서의 key는 어떤 역할을 하고 왜 필요한지 알아보자]]></summary>
        <content type="html"><![CDATA[<p>React에서 map으로 컴포넌트를 반복 렌더 할 경우 콘솔에서 'Warning: Each child in a list should have a unique "key" prop'이라는 주의 문구를 확인할 수 있는데,&nbsp;여기서 <code>key</code>는 무엇이며 왜 필요한지에 대해 알아본다.</p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Each child in a list should have a unique "key" prop</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="자식에-대한-재귀적-처리">자식에 대한 재귀적 처리<a href="https://5kdk.github.io/blog/2022/12/10/react-key-props#%EC%9E%90%EC%8B%9D%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9E%AC%EA%B7%80%EC%A0%81-%EC%B2%98%EB%A6%AC" class="hash-link" aria-label="자식에 대한 재귀적 처리에 대한 직접 링크" title="자식에 대한 재귀적 처리에 대한 직접 링크">​</a></h2>
<p>DOM 노드의 자식들을 재귀적으로 처리할 때, React는 기본적으로 동시에 두 리스트를 순회하고 차이점이 있으면 변경을 생성한다.</p>
<div class="language-html codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-html codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Duke</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Villanova</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 변경 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Connecticut</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Duke</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Villanova</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>위의 경우 React는 <code>&lt;li&gt;Duke&lt;/li&gt;</code>와 <code>&lt;li&gt;Villanova&lt;/li&gt;</code> 종속 트리를 그대로 유지하는 대신 모든 자식을 변경 (다시 렌더링)한다.</p>
<p>React가 <code>setState</code>를 할 때를 떠올리면, 비동기로 동작하고 연속적으로 호출했을 때 batch 처리를 했는데, 그 이유는 React는 DOM을 효율적으로 업데이트하기 위함이다.</p>
<p>React 입장에서 컴포넌트를 반복해서 렌더링하는 일은 매우 비효율적이기 때문이다.</p>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="key는-무엇인가">Key는 무엇인가?<a href="https://5kdk.github.io/blog/2022/12/10/react-key-props#key%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80" class="hash-link" aria-label="Key는 무엇인가?에 대한 직접 링크" title="Key는 무엇인가?에 대한 직접 링크">​</a></h2>
<p>이러한 문제를 해결하기 위해 존재하는것이 <code>key</code> 속성이다. 자식들이 <code>key</code>를 가지고 있다면, React는 <code>key</code>를 통해 기존 트리와 이후 트리의 자식들이 일치하는지 캐치할 수 있고 효율적으로 렌더링 할 수 있다.</p>
<p>간만히 말해 <code>key</code>는 엘리먼트에 안정적인 고유성을 부여하기 위해 배열 내부의 엘리먼트에 지정하는 것이라 볼 수 있다.</p>
<div class="language-html codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-html codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2015</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Duke</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2016</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Villanova</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 변경 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2014</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Connecticut</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2015</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Duke</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2016</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Villanova</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>요소에 <code>key</code>를 추가하여 트리의 변환 작업이 효율적으로 수행되도록 수정했다.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="map에서의-key-사용">Map()에서의 Key 사용<a href="https://5kdk.github.io/blog/2022/12/10/react-key-props#map%EC%97%90%EC%84%9C%EC%9D%98-key-%EC%82%AC%EC%9A%A9" class="hash-link" aria-label="Map()에서의 Key 사용에 대한 직접 링크" title="Map()에서의 Key 사용에 대한 직접 링크">​</a></h3>
<div class="language-jsx codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-jsx codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">ListItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> onClickTitle</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> badges </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ListItemLayout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">role</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">button</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onClickTitle</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">title</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Issue Example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">badges </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            badges</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">badgeProps</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> idx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Badge</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">idx</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag spread punctuation" style="color:#393A34">{</span><span class="token tag spread operator" style="color:#393A34">...</span><span class="token tag spread" style="color:#00009f">badgeProps</span><span class="token tag spread punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript property-access" style="color:#00009f">description</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"># Description</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">ListItemLayout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li><code>map</code> 함수 인자로 전달되는 함수 내부에서 <code>key</code>를 컴포넌트 <code>props</code>를 설정하는 것과 같이 작성한다.</li>
<li><code>key</code>는 요소의 '고유한 값'이어야 한다, 배열 요소의 고유한 값을 사용하거나 <code>index</code>로 사용할 수 있다.</li>
<li>단, 항목의 순서가 바뀔 수 있는 경우 순서가 바뀌면 <code>index</code>도 바뀌기 때문에 권장하지 않는다. 성능이 저하되거나 <code>state</code>관련 문제가 발생하기 때문에, 최후의 수단이라 할 수 있다.</li>
</ol>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="key-사용-시-주의할-점">key 사용 시 주의할 점<a href="https://5kdk.github.io/blog/2022/12/10/react-key-props#key-%EC%82%AC%EC%9A%A9-%EC%8B%9C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90" class="hash-link" aria-label="key 사용 시 주의할 점에 대한 직접 링크" title="key 사용 시 주의할 점에 대한 직접 링크">​</a></h2>
<p><code>key</code>는 반드시 변하지 않고, 예상 가능하며, 유일해야 한다.</p>
<p><code>key</code>는 형제 노드에서만 고유하면 된다. 즉, 전역에서 고유할 필요는 없고 해당 배열 안에서만 고유하면 된다.</p>
<p>최후의 수단으로 배열의 인덱스를 <code>key</code>로 사용할 수 있다. 항목들이 재배열되지 않는다면 이 방법도 잘 동작할 것이지만, 만약 재배열되는 경우 컴포넌트의 <code>state</code>와 관련된 문제가 발생할 수 있다.</p>
<p>컴포넌트 인스턴스는 <code>key</code>를 기반으로 갱신되고 재사용되는데 인덱스를 <code>key</code>로 사용하면, 항목의 순서가 바뀌었을 때 <code>key</code> 또한 바뀌기 때문이다. 그 결과로, 컴포넌트의 <code>state</code>가 엉망이 되거나 의도하지 않은 방식으로 바뀔 수도 있다.</p>
<p>변하는 key(<code>Math.random()</code>으로 생성된 값 등)를 사용하면 많은 컴포넌트 인스턴스와 DOM 노드를 불필요하게 재생성하여 성능이 나빠지거나 자식 컴포넌트의 <code>state</code>가 유실될 수 있다.</p>
<br>
<blockquote>
<p>참고자료<br>
<a href="https://ko.reactjs.org/docs/lists-and-keys" target="_blank" rel="noopener noreferrer">React 공식문서 - 리스트와 Key</a><br>
<a href="https://ko.reactjs.org/docs/reconciliation" target="_blank" rel="noopener noreferrer">React 공식문서 - 재조정</a></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="React" term="React"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[배열 반복을 효과적으로 만드는 11가지 메서드]]></title>
        <id>https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods</id>
        <link href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods"/>
        <updated>2022-11-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[자바스크립트 for 문을 대체할 수 있는 11가지 메서드를 알아보자]]></summary>
        <content type="html"><![CDATA[<p>이 포스팅은 해외 저자의 글을 요약 및 번역하고 살을 붙여 옮긴다. 필자가 자바스크립트를 처음 접하고 배열을 막 다루기 시작할 때에 큰 도움이 되었다. 원문은 하단 링크로 남긴다.</p>
<p>이제부터 자바스크립트 배열 반복을 효과적으로 만드는 11가지 메서드에 대해 알아보자!</p>
<blockquote>
<p>원문 저자의 서문:<br>
<em>Javascript의 일상적인 프로그래밍에서는 배열 요소에 대해 일종의 작업을 수행해야 합니다.&nbsp;배열의 각 항목을 처리하는 것은 매우 일반적입니다.&nbsp;따라서 각 배열 요소의 처리를 더 쉽고 효율적으로 만들기 위해 Javascript는 Iteration 메서드의 힘을 사용합니다.</em></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="반복iteration-메서드">반복(Iteration) 메서드<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#%EB%B0%98%EB%B3%B5iteration-%EB%A9%94%EC%84%9C%EB%93%9C" class="hash-link" aria-label="반복(Iteration) 메서드에 대한 직접 링크" title="반복(Iteration) 메서드에 대한 직접 링크">​</a></h2>
<p>반복 메서드들은 배열의 모든 요소에 대해 한 번에 하나씩 작동하는 방법이다.&nbsp;이러한 메서드는 loof와 유사하다.</p>
<p>각 메서드들을 활용하여 배열을 반복하고, 각 항목에 대해 일부 기능을 수행하고, 원하는 결과를 필터링하고, 단일 값으로 줄이고, 검색하여 찾는 것과 같은 방법들을 살펴보자.</p>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="1-arraymap">1. Array.map()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#1-arraymap" class="hash-link" aria-label="1. Array.map()에 대한 직접 링크" title="1. Array.map()에 대한 직접 링크">​</a></h3>
<p><code>Array.map()</code> : <code>map()</code>을 사용 하면 각 배열 요소에 대해 <strong>작업을 수행하여 새 배열 요소를 반환</strong>한다. 부수효과가 없다. 즉, 기존 배열 요소에는 변경사항이 없다는 뜻 이다.</p>
<p>콜백 함수에는 3개의 매개 변수(<code>value</code>, <code>index</code>, <code>array</code>)를 받을 수 있다. <code>index와</code> <code>array는</code> 선택적 매개변수다.</p>
<p><strong>예제</strong></p>
<p>원래 배열 요소에 3을 곱한 새 배열 생성</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numsMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">30,60,90,120,150</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="2-arrayfilter">2. Array.filter()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#2-arrayfilter" class="hash-link" aria-label="2. Array.filter()에 대한 직접 링크" title="2. Array.filter()에 대한 직접 링크">​</a></h3>
<p><code>Array.filter()</code> : 이름에서 알 수 있듯이 일부 <strong>조건을 기반으로 필터링하여 새 배열을 반환</strong>한다.</p>
<p><code>filter()</code>&nbsp;또한&nbsp;콜백 함수에는 3개의 매개 변수(<code>value</code>, <code>index</code>, <code>array</code>)를 받을 수 있다. <code>index와</code> <code>array는</code> 선택적 이다.</p>
<p><strong>예제</strong></p>
<p>배열안의 30보다 큰 수를 선별하기</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">29</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numOver30 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">50, 40</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="3-arrayforeach">3. Array.forEach()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#3-arrayforeach" class="hash-link" aria-label="3. Array.forEach()에 대한 직접 링크" title="3. Array.forEach()에 대한 직접 링크">​</a></h3>
<p><code>Array.forEach()</code>&nbsp;: <strong>for 문과 같습니다.</strong> 배열의 각 요소에 대해 함수를 실행한다.</p>
<p><strong>예제</strong></p>
<p><code>Hello</code> 문자열에 <code>names</code> 배열의 요소를 함께를 함께 출력하기</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> prntVal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'Frank'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Charles'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Dolly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Robert'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Bob'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">names</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prntVal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prntVal </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Hello '</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'&lt;br/&gt;'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">Hello Frank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Charles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Dolly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Robert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Bob</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="4-arrayreduce">4. Array.reduce()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#4-arrayreduce" class="hash-link" aria-label="4. Array.reduce()에 대한 직접 링크" title="4. Array.reduce()에 대한 직접 링크">​</a></h3>
<p><code>Array.reduce()</code> : 각 배열 요소에서 함수를 실행하여 <strong>단일 값을 생성</strong>한다.</p>
<p>초기값(<code>initialValue</code>) 또는 이전에 반환된 값을 유지하는 데 사용되는 새 매개변수 <code>accumulator</code>와&nbsp;<code>currentValue</code>, <code>index</code> 및 <code>array</code>의 매개변수가 있다.</p>
<p><strong>예제</strong></p>
<p>배열을 만들고 <code>reduce()</code>&nbsp;함수를 사용하여 배열 요소의 합을 알아보기</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">total</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">150</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">accumulator</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentValue</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> currentIndex</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="5-arrayreduceright">5. Array.reduceRight()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#5-arrayreduceright" class="hash-link" aria-label="5. Array.reduceRight()에 대한 직접 링크" title="5. Array.reduceRight()에 대한 직접 링크">​</a></h3>
<p><code>Array.reduceRight()</code> : 끝 인덱스 부터 시작한다는 점을 제외하고는 <code>reduce()</code>와 같다.</p>
<p><strong>예제</strong></p>
<p>배열을 만들고&nbsp;<code>reduce()</code>&nbsp;함수를 사용하여 배열 요소의 합을 알아보기</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">total</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">150</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="6-arraysome">6. Array.some()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#6-arraysome" class="hash-link" aria-label="6. Array.some()에 대한 직접 링크" title="6. Array.some()에 대한 직접 링크">​</a></h3>
<p><code>Array.some()</code>&nbsp;: <strong>배열 요소 중 일부가 조건을 통과</strong>하는지 여부를 확인하는 데 사용할 수 있다.</p>
<p><strong>예제</strong></p>
<p>배열에 30 이상의 요소가 있는지 확인하고, 조건을 충족하면 <code>true</code>를 반환 그렇지 않으면 <code>false</code>를 반환하는 예</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> over30 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="7-arrayevery">7. Array.every()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#7-arrayevery" class="hash-link" aria-label="7. Array.every()에 대한 직접 링크" title="7. Array.every()에 대한 직접 링크">​</a></h3>
<p><code>Array.every()</code> :&nbsp;<strong>배열 요소 모두 조건을 통과</strong>하는지 여부를 확인하는 데 사용 할 수 있다.</p>
<p><strong>예제</strong></p>
<p>배열에 30 이상의 요소가 있는지 확인하고, 조건을 충족하면 <code>true</code>를 반환 그렇지 않으면 <code>false</code>를 반환하는 예</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> over30 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">false</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">every</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="8-arrayfind">8. Array.find()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#8-arrayfind" class="hash-link" aria-label="8. Array.find()에 대한 직접 링크" title="8. Array.find()에 대한 직접 링크">​</a></h3>
<p><code>Array.find()</code> :&nbsp;주어진 <strong>조건을 만족하는 첫 번째 배열 요소의 값</strong>을 반환한다.</p>
<p><strong>예제</strong></p>
<p>배열에 <code>30</code> 이상의 요소가 있는지 확인하고, 조건을 충족하면 <code>true</code>를 반환 그렇지 않으면 <code>false</code>를 반환하는 예</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> firstNum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">40</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="9-arrayfindindex">9. Array.findIndex()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#9-arrayfindindex" class="hash-link" aria-label="9. Array.findIndex()에 대한 직접 링크" title="9. Array.findIndex()에 대한 직접 링크">​</a></h3>
<p><code>Array.findIndex()</code> :&nbsp;주어진 <strong>조건을 만족하는&nbsp;첫 번째 배열 요소의 인덱스</strong>을 반환한다.</p>
<p><strong>예제</strong></p>
<p>배열에 <code>30</code> 이상의 요소가 있는지 확인하고, 조건을 충족하면 요소의 인덱스를 반환하는 예</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> firstIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Arrow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">callbackFn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Inline callback function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">findIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">element</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* … */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> thisArg</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="10-arrayindexof">10. Array.indexOf()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#10-arrayindexof" class="hash-link" aria-label="10. Array.indexOf()에 대한 직접 링크" title="10. Array.indexOf()에 대한 직접 링크">​</a></h3>
<p><code>Array.indexOf()</code>&nbsp;:&nbsp;배열 내에서 요소를 검색하고 해당 위치를 반환한다. 배열 요소의 위치를 ​​반환하며&nbsp;발견된 요소의 첫 번째 항목을 반환하고, 만약 요소를 찾지 못하면 <code>-1</code>을 반환한다.</p>
<p><strong>예제</strong></p>
<p>배열에서 <code>Dolly</code>의 위치 찾기</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'Frank'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Charles'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Dolly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Robert'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Bob'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> names</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Dolly'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">searchElement</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">searchElement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fromIndex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<h3 class="anchor anchorWithStickyNavbar_YLfa" id="11-arraylastindexof">11. Array.lastIndexOf()<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#11-arraylastindexof" class="hash-link" aria-label="11. Array.lastIndexOf()에 대한 직접 링크" title="11. Array.lastIndexOf()에 대한 직접 링크">​</a></h3>
<p><code>Array.indexOf()</code> :&nbsp;배열의 끝에서부터 요소를 검색한다.</p>
<p><strong>예제</strong></p>
<p>배열에서 <code>Dolly</code>의 위치 찾기</p>
<div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'Frank'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Charles'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Dolly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Robert'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Bob'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> names</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Dolly'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>출력</strong></p>
<div class="codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-text codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_ZulA alert alert--info"><div class="admonitionHeading_urbH"><span class="admonitionIcon_BPqY"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>mdn web docs</div><div class="admonitionContent_ocWh"><div class="language-js codeBlockContainer_MEPR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Fb4i"><pre tabindex="0" class="prism-code language-js codeBlock_T7Ux thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_FeG_"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">lastIndexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">searchElement</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">lastIndexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">searchElement</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fromIndex</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_dEFT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_KZRX" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nAEx"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_OeXI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_YLfa" id="결론">결론<a href="https://5kdk.github.io/blog/2022/11/11/11-array-iteration-methods#%EA%B2%B0%EB%A1%A0" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<p>다양한 유형의 JavaScript 배열 반복 메서드에 대해 살펴보았다. 앞에 살펴본 메서드들은 일상적인 프로그래밍에 정말 유용한데 이를 사용하여 다양한 작업을 손쉽게 수행할 수 도 있고, 보다 선언적인 코드를 작성하는 데 큰 도움이 되므로 잘 활용하면 좋을 것 같다.</p>
<blockquote>
<p><strong>원문 및 참고자료</strong></p>
<p><a href="https://www.zeptobook.com/eleven-ways-to-learn-javascript-array-iteration-effectively/" target="_blank" rel="noopener noreferrer">https://www.zeptobook.com/eleven-ways-to-learn-javascript-array-iteration-effectively/</a><br>
<a href="https://developer.mozilla.org/en-US/search?q=array" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/search?q=array</a></p>
</blockquote>]]></content>
        <author>
            <name>Dongkyu Kim</name>
            <uri>https://github.com/5kdk</uri>
        </author>
        <category label="JavaScript" term="JavaScript"/>
    </entry>
</feed>